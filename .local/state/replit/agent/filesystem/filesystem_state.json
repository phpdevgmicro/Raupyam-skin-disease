{"file_contents":{"client/src/components/examples/CameraCapture.tsx":{"content":"import CameraCapture from '../CameraCapture';\n\nexport default function CameraCaptureExample() {\n  const handleCapture = (imageSrc: string) => {\n    console.log('Image captured:', imageSrc.substring(0, 50) + '...');\n  };\n\n  const handleClose = () => {\n    console.log('Camera closed');\n  };\n\n  return <CameraCapture onCapture={handleCapture} onClose={handleClose} />;\n}\n","size_bytes":369},"client/src/components/examples/AnalysisLoading.tsx":{"content":"import AnalysisLoading from '../AnalysisLoading';\n\nexport default function AnalysisLoadingExample() {\n  return <AnalysisLoading />;\n}\n","size_bytes":134},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/examples/AnalysisResults.tsx":{"content":"import AnalysisResults from '../AnalysisResults';\n\nexport default function AnalysisResultsExample() {\n  const mockResults = {\n    severity: \"moderate\" as const,\n    analysis: \"Based on the images provided, the skin appears to show signs of acne vulgaris with moderate inflammatory lesions. The affected areas show a combination of comedones (blackheads and whiteheads) and papules, primarily concentrated in the T-zone area.\\n\\nThe skin also exhibits some signs of post-inflammatory hyperpigmentation, which is common with acne. The overall skin texture appears to be combination type with some areas showing increased sebum production.\",\n    recommendations: [\n      \"Use a gentle, non-comedogenic cleanser twice daily to maintain skin hygiene without stripping natural oils\",\n      \"Apply a topical treatment containing salicylic acid or benzoyl peroxide to affected areas\",\n      \"Consider incorporating a retinoid into your nighttime routine to help prevent clogged pores\",\n      \"Use a broad-spectrum SPF 30+ sunscreen daily to prevent further hyperpigmentation\",\n      \"Avoid picking or squeezing lesions to minimize scarring and inflammation\",\n      \"Consult with a dermatologist for personalized treatment options, which may include prescription medications\"\n    ]\n  };\n\n  return <AnalysisResults results={mockResults} />;\n}\n","size_bytes":1333},"client/src/components/Header.tsx":{"content":"import logoImage from '@assets/logo.png';\n\nexport default function Header() {\n  return (\n    <header className=\"border-b bg-card/50 backdrop-blur-sm sticky top-0 z-40\">\n      <div className=\"container mx-auto px-4 py-4\">\n        <div className=\"flex items-center justify-center md:justify-center\">\n          <div className=\"flex items-center gap-3\">\n            <img \n              src={logoImage} \n              alt=\"Skin Analysis\" \n              className=\"h-12 w-auto\"\n              data-testid=\"img-logo\"\n            />\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n}\n","size_bytes":590},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ImageUpload.tsx":{"content":"import { useState, useRef } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Upload, Camera, X, ImagePlus } from \"lucide-react\";\nimport CameraCapture from \"./CameraCapture\";\n\ninterface ImageUploadProps {\n  onImagesChange: (images: string[]) => void;\n  maxImages?: number;\n}\n\nexport default function ImageUpload({ onImagesChange, maxImages = 6 }: ImageUploadProps) {\n  const [images, setImages] = useState<string[]>([]);\n  const [showCamera, setShowCamera] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (!files) return;\n\n    const newImages: string[] = [];\n    const remainingSlots = maxImages - images.length;\n    const filesToProcess = Math.min(files.length, remainingSlots);\n\n    for (let i = 0; i < filesToProcess; i++) {\n      const file = files[i];\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        newImages.push(reader.result as string);\n        if (newImages.length === filesToProcess) {\n          const updatedImages = [...images, ...newImages];\n          setImages(updatedImages);\n          onImagesChange(updatedImages);\n        }\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleCameraCapture = (imageSrc: string) => {\n    if (images.length < maxImages) {\n      const updatedImages = [...images, imageSrc];\n      setImages(updatedImages);\n      onImagesChange(updatedImages);\n    }\n    setShowCamera(false);\n  };\n\n  const removeImage = (index: number) => {\n    const updatedImages = images.filter((_, i) => i !== index);\n    setImages(updatedImages);\n    onImagesChange(updatedImages);\n  };\n\n  if (showCamera) {\n    return (\n      <CameraCapture\n        onCapture={handleCameraCapture}\n        onClose={() => setShowCamera(false)}\n      />\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <Card\n          className=\"hover-elevate cursor-pointer border-2 border-dashed transition-colors hover:border-primary/50\"\n          onClick={() => fileInputRef.current?.click()}\n          data-testid=\"card-upload-file\"\n        >\n          <CardContent className=\"flex flex-col items-center justify-center min-h-56 p-8\">\n            <div className=\"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-4\">\n              <Upload className=\"w-8 h-8 text-primary\" />\n            </div>\n            <p className=\"font-semibold text-lg text-center mb-2\">Upload Images</p>\n            <p className=\"text-sm text-muted-foreground text-center\">\n              Click to browse or drag and drop\n            </p>\n            <p className=\"text-xs text-muted-foreground text-center mt-2\">\n              PNG, JPG or JPEG (max. {maxImages} images)\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card\n          className=\"hover-elevate cursor-pointer border-2 border-dashed transition-colors hover:border-primary/50\"\n          onClick={() => setShowCamera(true)}\n          data-testid=\"card-upload-camera\"\n        >\n          <CardContent className=\"flex flex-col items-center justify-center min-h-56 p-8\">\n            <div className=\"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-4\">\n              <Camera className=\"w-8 h-8 text-primary\" />\n            </div>\n            <p className=\"font-semibold text-lg text-center mb-2\">Take Photo</p>\n            <p className=\"text-sm text-muted-foreground text-center\">\n              Use your device camera\n            </p>\n            <p className=\"text-xs text-muted-foreground text-center mt-2\">\n              Front or back camera available\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <input\n        type=\"file\"\n        ref={fileInputRef}\n        onChange={handleFileUpload}\n        accept=\"image/*\"\n        multiple\n        className=\"hidden\"\n        data-testid=\"input-file-upload\"\n      />\n\n      {images.length > 0 && (\n        <div className=\"pt-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n              <ImagePlus className=\"w-5 h-5 text-primary\" />\n              Uploaded Images ({images.length}/{maxImages})\n            </h3>\n            {images.length < maxImages && (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => fileInputRef.current?.click()}\n                data-testid=\"button-add-more\"\n              >\n                <Upload className=\"w-4 h-4 mr-2\" />\n                Add More\n              </Button>\n            )}\n          </div>\n          <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n            {images.map((image, index) => (\n              <div\n                key={index}\n                className=\"relative group aspect-square rounded-lg overflow-hidden border-2 border-border\"\n                data-testid={`image-preview-${index}`}\n              >\n                <img\n                  src={image}\n                  alt={`Upload ${index + 1}`}\n                  className=\"w-full h-full object-cover\"\n                />\n                <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors flex items-center justify-center\">\n                  <button\n                    onClick={() => removeImage(index)}\n                    className=\"opacity-0 group-hover:opacity-100 transition-opacity bg-destructive text-destructive-foreground rounded-full p-2 hover-elevate\"\n                    data-testid={`button-remove-image-${index}`}\n                  >\n                    <X className=\"w-5 h-5\" />\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":5979},"client/src/components/examples/ProgressSteps.tsx":{"content":"import ProgressSteps from '../ProgressSteps';\n\nexport default function ProgressStepsExample() {\n  return (\n    <ProgressSteps \n      currentStep={2} \n      steps={['Consent Form', 'Upload Images', 'Analysis', 'Results']} \n    />\n  );\n}\n","size_bytes":236},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"postcss.config.js":{"content":"import tailwindcss from 'tailwindcss';\nimport autoprefixer from 'autoprefixer';\n\nexport default {\n  plugins: [\n    tailwindcss,\n    autoprefixer,\n  ],\n}\n","size_bytes":153},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"shared/schema.ts":{"content":"import { z } from \"zod\";\n\nexport const consentFormSchema = z.object({\n  fullName: z.string().min(2, \"Full name must be at least 2 characters\"),\n  age: z.coerce.number().min(1, \"Age is required\").max(120, \"Please enter a valid age\"),\n  gender: z.enum([\"male\", \"female\", \"non-binary\", \"prefer-not-to-say\"], {\n    required_error: \"Please select your vibe\",\n  }),\n  skinType: z.enum([\"oily\", \"dry\", \"combination\", \"sensitive\", \"normal\"], {\n    required_error: \"Please select your skin's mood\",\n  }),\n  topConcern: z.array(z.enum([\"acne\", \"fine-lines\", \"dullness\", \"redness\", \"other\"]))\n    .min(1, \"Please select at least one concern\")\n    .max(2, \"Please select at most 2 concerns\"),\n  cityName: z.string().min(2, \"Please select a city\"),\n  city: z.string().min(2, \"City is required\"),\n  state: z.string().min(2, \"State is required\"),\n  country: z.string().min(2, \"Country is required\"),\n});\n\nexport type ConsentFormData = z.infer<typeof consentFormSchema>;\n\nexport const feedbackFormSchema = z.object({\n  suggestion: z.string().min(10, \"Please provide at least 10 characters of feedback\"),\n  email: z.string().email(\"Please enter a valid email address\"),\n});\n\nexport type FeedbackFormData = z.infer<typeof feedbackFormSchema>;\n\nexport interface AnalysisRequest {\n  consentData: ConsentFormData;\n  images: string[];\n}\n\nexport interface AnalysisResponse {\n  analysis: string;\n  recommendations: string[];\n  severity: \"mild\" | \"moderate\" | \"severe\";\n}\n\nexport interface User {\n  id: string;\n  username: string;\n  password: string;\n}\n\nexport type InsertUser = Omit<User, \"id\">;\n","size_bytes":1572},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"server/storage.ts":{"content":"// No storage needed - using external PHP backend\nexport interface IStorage {}\nexport class MemStorage implements IStorage {}\nexport const storage = new MemStorage();\n","size_bytes":167},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/examples/FeedbackForm.tsx":{"content":"import FeedbackForm from '../FeedbackForm';\n\nexport default function FeedbackFormExample() {\n  return <FeedbackForm />;\n}\n","size_bytes":122},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/components/FeedbackForm.tsx":{"content":"import { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { feedbackFormSchema, type FeedbackFormData } from \"@/types/schema\";\nimport { submitFeedback } from \"@/lib/api\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { MessageSquare } from \"lucide-react\";\n\nexport default function FeedbackForm() {\n  const { toast } = useToast();\n  const form = useForm<FeedbackFormData>({\n    resolver: zodResolver(feedbackFormSchema),\n    defaultValues: {\n      suggestion: \"\",\n      email: \"\",\n    },\n  });\n\n  const onSubmit = async (data: FeedbackFormData) => {\n    try {\n      await submitFeedback(data.suggestion, data.email);\n      toast({\n        title: \"Feedback submitted\",\n        description: \"Thank you for your feedback. We'll get back to you soon.\",\n      });\n      form.reset();\n    } catch (error) {\n      toast({\n        title: \"Submission failed\",\n        description: \"There was an error submitting your feedback. Please try again.\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  return (\n    <Card data-testid=\"card-feedback-form\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <MessageSquare className=\"w-5 h-5 text-primary\" />\n          Reply here for tweaks\n        </CardTitle>\n        <CardDescription>\n          Let us know if you'd like any adjustments to your analysis\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n            <FormField\n              control={form.control}\n              name=\"suggestion\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Your Suggestions *</FormLabel>\n                  <FormControl>\n                    <Textarea\n                      placeholder=\"Please share any questions or requests for clarification...\"\n                      className=\"min-h-32 resize-none\"\n                      data-testid=\"textarea-suggestion\"\n                      {...field}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"email\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Email Address *</FormLabel>\n                  <FormControl>\n                    <Input\n                      type=\"email\"\n                      placeholder=\"your.email@example.com\"\n                      data-testid=\"input-feedback-email\"\n                      {...field}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"flex justify-end\">\n              <Button\n                type=\"submit\"\n                className=\"px-6\"\n                data-testid=\"button-submit-feedback\"\n              >\n                Submit Feedback\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":3542},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"design_guidelines.md":{"content":"# Skin Analysis Web App - Design Guidelines\n\n## Design Approach\n**System**: Material Design principles with healthcare-focused refinements\n**Rationale**: Medical applications require trust, clarity, and accessibility. Material Design provides established patterns for forms, loading states, and data display while maintaining professional credibility. Reference apps like Zocdoc and One Medical for healthcare-specific UI patterns.\n\n## Typography Hierarchy\n**Font Stack**: Inter (primary), system-ui fallback\n- **Headings**: \n  - H1: 2.5rem (40px), font-weight 700 - Page titles\n  - H2: 1.75rem (28px), font-weight 600 - Section headers\n  - H3: 1.25rem (20px), font-weight 600 - Subsections\n- **Body Text**: 1rem (16px), font-weight 400, line-height 1.6\n- **Form Labels**: 0.875rem (14px), font-weight 500\n- **Helper Text**: 0.75rem (12px), font-weight 400\n- **Button Text**: 1rem (16px), font-weight 500\n\n## Layout System\n**Spacing Units**: Use Tailwind's 4, 6, 8, 12, 16, 24 (e.g., p-4, gap-6, mb-8)\n**Container Max-width**: max-w-2xl for forms, max-w-4xl for results display\n**Section Padding**: py-8 mobile, py-12 desktop\n**Form Field Spacing**: gap-6 between form groups, gap-4 within groups\n\n## Multi-Step Flow Structure\n\n### Step 1: Consent Form\n**Layout**: Single column, centered form (max-w-2xl)\n**Form Groups**:\n- Personal Info: Full name, Age (side-by-side on desktop: grid-cols-2)\n- Demographics: Gender, Skin Type (dropdown selects, side-by-side)\n- Address: Google autocomplete field (full width), followed by auto-populated City, State, Country (grid-cols-3, read-only fields with subtle treatment)\n\n**Form Components**:\n- Input fields: h-12, rounded-lg, border with focus states, px-4\n- Dropdowns: Same height as inputs, chevron icon\n- Labels: mb-2, required indicator (asterisk)\n- Submit button: w-full on mobile, w-auto px-8 on desktop, h-12, rounded-lg\n\n### Step 2: Image Upload Interface\n**Layout**: Grid layout for three upload methods (grid-cols-1 md:grid-cols-3, gap-4)\n\n**Upload Cards** (equal height, min-h-48):\n1. **File Upload**: Dashed border, upload icon, \"Upload from device\" text, click-to-browse\n2. **Gallery**: Image icon, \"Choose from gallery\" text\n3. **Camera**: Camera icon, \"Take photo\" text, with front/back toggle indicator\n\n**Camera Interface** (when activated):\n- Full-width camera preview area (aspect-ratio-4/3)\n- Controls bar below preview: Front/Back toggle button + Capture button (prominent, circular, centered)\n- Close/Cancel option\n\n**Image Preview Grid**: \n- Display uploaded images in grid (grid-cols-2 md:grid-cols-4, gap-3)\n- Each preview: rounded-lg, relative positioning for remove button (top-right corner, small, circular)\n- Max 6 images, counter display\n\n**Analysis Trigger**: \n- \"Start Analysis\" button below previews, prominent, w-full md:w-auto, h-12, disabled state when no images\n\n### Step 3: Loading State\n**Full-screen overlay** approach:\n- Semi-transparent backdrop\n- Centered card (max-w-md) with:\n  - Animated spinner (large, 64px)\n  - \"Analyzing your skin...\" text (h3 size)\n  - Progress indicator or animated dots\n  - \"This may take 30-60 seconds\" helper text\n- Keep minimal and professional, avoid over-animation\n\n### Step 4: Results Display\n**Layout**: max-w-4xl container\n\n**Results Card**:\n- Generous padding (p-8)\n- Analysis content with proper typography hierarchy\n- Structured sections with h3 headings for different analysis aspects\n- Use subtle dividers between major sections (border-t, pt-6, mt-6)\n\n**Feedback Section** (\"Reply here for tweaks\"):\n- Separate card below results (mt-8)\n- Title: \"Reply here for tweaks\" (h3 styling)\n- Textarea: min-h-32, rounded-lg, full-width\n- Email input: h-12, mb-4\n- Submit button: right-aligned, px-6, h-12\n\n## Component Specifications\n\n**Buttons**:\n- Primary: h-12, px-6, rounded-lg, font-medium\n- Secondary: Same dimensions, outline variant\n- Disabled state: reduced opacity (0.5)\n\n**Form Inputs**:\n- Height: h-12\n- Border radius: rounded-lg\n- Padding: px-4\n- Focus: prominent focus ring\n- Error state: red border, error message below (text-red-600, text-sm)\n\n**Cards**:\n- Padding: p-6 md:p-8\n- Border radius: rounded-xl\n- Subtle shadow for elevation\n\n**Autocomplete Dropdown**:\n- Appears below address input\n- Items: py-3 px-4, hover background\n- Max height with scroll\n\n## Responsive Behavior\n**Breakpoints**:\n- Mobile: Single column, full-width buttons, stacked form fields\n- Tablet (md:): Two-column grids where appropriate\n- Desktop (lg:): Three-column image upload grid, side-by-side form fields\n\n**Mobile Optimizations**:\n- Camera interface uses full viewport width\n- Larger touch targets (min 44px)\n- Sticky submit buttons on long forms\n\n## Form Validation\n- Real-time validation on blur\n- Inline error messages below fields\n- Required field indicators in labels\n- Disabled submit until all required fields valid\n\n## Accessibility Requirements\n- All form inputs have associated labels (not just placeholders)\n- ARIA labels for icon-only buttons\n- Focus management in multi-step flow\n- Sufficient contrast ratios throughout\n- Camera permission error states with clear messaging","size_bytes":5104},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"client/src/components/AnalysisResults.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { AlertCircle, CheckCircle, AlertTriangle, Sparkles } from \"lucide-react\";\nimport type { AnalysisResponse } from \"@/types/schema\";\n\ninterface AnalysisResultsProps {\n  results: AnalysisResponse;\n}\n\nexport default function AnalysisResults({ results }: AnalysisResultsProps) {\n  const severityConfig = {\n    mild: {\n      icon: CheckCircle,\n      color: \"text-green-600 dark:text-green-400\",\n      bgColor: \"bg-green-50 dark:bg-green-950/50\",\n      borderColor: \"border-green-200 dark:border-green-800\",\n      label: \"Mild Condition\",\n    },\n    moderate: {\n      icon: AlertTriangle,\n      color: \"text-yellow-600 dark:text-yellow-400\",\n      bgColor: \"bg-yellow-50 dark:bg-yellow-950/50\",\n      borderColor: \"border-yellow-200 dark:border-yellow-800\",\n      label: \"Moderate Condition\",\n    },\n    severe: {\n      icon: AlertCircle,\n      color: \"text-red-600 dark:text-red-400\",\n      bgColor: \"bg-red-50 dark:bg-red-950/50\",\n      borderColor: \"border-red-200 dark:border-red-800\",\n      label: \"Severe Condition\",\n    },\n  };\n\n  const config = severityConfig[results.severity];\n  const SeverityIcon = config.icon;\n\n  return (\n    <Card data-testid=\"card-analysis-results\">\n      <CardHeader>\n        <div className=\"flex items-start justify-between gap-4 flex-wrap\">\n          <div className=\"flex-1\">\n            <CardTitle className=\"text-2xl flex items-center gap-2\">\n              <Sparkles className=\"w-6 h-6 text-primary\" />\n              AI Analysis Results\n            </CardTitle>\n            <CardDescription className=\"mt-2\">\n              Based on the images and information you provided\n            </CardDescription>\n          </div>\n          <Badge \n            variant=\"outline\" \n            className={`${config.bgColor} ${config.color} ${config.borderColor} border px-3 py-1.5 text-sm font-medium`}\n          >\n            <SeverityIcon className=\"w-4 h-4 mr-1.5\" />\n            {config.label}\n          </Badge>\n        </div>\n      </CardHeader>\n      <CardContent className=\"space-y-8\">\n        <div>\n          <h3 className=\"text-lg font-semibold mb-4 flex items-center gap-2\">\n            <div className=\"w-1 h-5 bg-primary rounded-full\" />\n            Detailed Analysis\n          </h3>\n          <div className=\"bg-muted/30 rounded-lg p-6\">\n            <p className=\"text-foreground leading-relaxed whitespace-pre-wrap\" data-testid=\"text-analysis\">\n              {results.analysis}\n            </p>\n          </div>\n        </div>\n\n        {results.recommendations.length > 0 && (\n          <div className=\"pt-2\">\n            <h3 className=\"text-lg font-semibold mb-4 flex items-center gap-2\">\n              <div className=\"w-1 h-5 bg-primary rounded-full\" />\n              Recommendations\n            </h3>\n            <div className=\"space-y-3\">\n              {results.recommendations.map((recommendation, index) => (\n                <div\n                  key={index}\n                  className=\"flex items-start gap-4 bg-card border rounded-lg p-4 hover-elevate\"\n                  data-testid={`recommendation-${index}`}\n                >\n                  <div className=\"w-8 h-8 rounded-full bg-primary text-primary-foreground flex items-center justify-center flex-shrink-0 font-semibold\">\n                    {index + 1}\n                  </div>\n                  <p className=\"text-sm leading-relaxed flex-1 pt-1\">{recommendation}</p>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        <div className=\"pt-4\">\n          <div className=\"bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800 rounded-lg p-4\">\n            <div className=\"flex gap-3\">\n              <AlertCircle className=\"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5\" />\n              <div>\n                <p className=\"text-sm font-medium text-amber-900 dark:text-amber-100 mb-1\">\n                  Important Disclaimer\n                </p>\n                <p className=\"text-sm text-amber-800 dark:text-amber-200\">\n                  This analysis is AI-generated and should not replace professional medical advice. Please consult with a qualified dermatologist for proper diagnosis and treatment.\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":4474},"client/src/components/ConsentForm.tsx":{"content":"import { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { consentFormSchema, type ConsentFormData } from \"@/types/schema\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useEffect, useRef } from \"react\";\nimport { MapPin } from \"lucide-react\";\n\ninterface ConsentFormProps {\n  onSubmit: (data: ConsentFormData) => void;\n}\n\nexport default function ConsentForm({ onSubmit }: ConsentFormProps) {\n  const addressInputRef = useRef<HTMLInputElement>(null);\n  const autocompleteRef = useRef<google.maps.places.Autocomplete | null>(null);\n\n  const form = useForm<ConsentFormData>({\n    resolver: zodResolver(consentFormSchema),\n    defaultValues: {\n      fullName: \"\",\n      age: 0,\n      gender: undefined,\n      skinType: undefined,\n      address: \"\",\n      city: \"\",\n      state: \"\",\n      country: \"\",\n    },\n  });\n\n  useEffect(() => {\n    if (addressInputRef.current && window.google?.maps?.places) {\n      autocompleteRef.current = new google.maps.places.Autocomplete(\n        addressInputRef.current,\n        {\n          types: [\"address\"],\n        }\n      );\n\n      autocompleteRef.current.addListener(\"place_changed\", () => {\n        const place = autocompleteRef.current?.getPlace();\n        if (place?.formatted_address) {\n          form.setValue(\"address\", place.formatted_address);\n\n          let city = \"\";\n          let state = \"\";\n          let country = \"\";\n\n          place.address_components?.forEach((component: google.maps.places.AddressComponent) => {\n            const types = component.types;\n            if (types.includes(\"locality\")) {\n              city = component.long_name;\n            }\n            if (types.includes(\"administrative_area_level_1\")) {\n              state = component.long_name;\n            }\n            if (types.includes(\"country\")) {\n              country = component.long_name;\n            }\n          });\n\n          form.setValue(\"city\", city);\n          form.setValue(\"state\", state);\n          form.setValue(\"country\", country);\n        }\n      });\n    }\n  }, [form]);\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"text-xl\">Patient Information</CardTitle>\n        <CardDescription>\n          Please provide your information before proceeding with the skin analysis. All information is kept confidential.\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"fullName\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Full Name *</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"John Doe\"\n                        data-testid=\"input-fullname\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"age\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Age *</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"number\"\n                        placeholder=\"25\"\n                        data-testid=\"input-age\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"gender\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Gender *</FormLabel>\n                    <Select\n                      onValueChange={field.onChange}\n                      defaultValue={field.value}\n                      data-testid=\"select-gender\"\n                    >\n                      <FormControl>\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select gender\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"male\">Male</SelectItem>\n                        <SelectItem value=\"female\">Female</SelectItem>\n                        <SelectItem value=\"other\">Other</SelectItem>\n                        <SelectItem value=\"prefer-not-to-say\">Prefer not to say</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"skinType\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Skin Type *</FormLabel>\n                    <Select\n                      onValueChange={field.onChange}\n                      defaultValue={field.value}\n                      data-testid=\"select-skintype\"\n                    >\n                      <FormControl>\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select skin type\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"oily\">Oily</SelectItem>\n                        <SelectItem value=\"dry\">Dry</SelectItem>\n                        <SelectItem value=\"combination\">Combination</SelectItem>\n                        <SelectItem value=\"sensitive\">Sensitive</SelectItem>\n                        <SelectItem value=\"normal\">Normal</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"address\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel className=\"flex items-center gap-2\">\n                    <MapPin className=\"w-4 h-4\" />\n                    Address *\n                  </FormLabel>\n                  <FormControl>\n                    <Input\n                      placeholder=\"Start typing your address...\"\n                      data-testid=\"input-address\"\n                      {...field}\n                      ref={addressInputRef}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"city\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>City *</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"Enter city\"\n                        data-testid=\"input-city\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"state\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>State *</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"Enter state\"\n                        data-testid=\"input-state\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"country\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Country *</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"Enter country\"\n                        data-testid=\"input-country\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"pt-4\">\n              <Button\n                type=\"submit\"\n                size=\"lg\"\n                className=\"w-full md:w-auto px-8\"\n                data-testid=\"button-submit-consent\"\n              >\n                Continue to Image Upload\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":9551},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2210},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n\n  --background: 210 5% 98%;\n  --foreground: 215 16% 12%;\n  --border: 214 6% 88%;\n  --card: 210 5% 96%;\n  --card-foreground: 215 16% 12%;\n  --card-border: 214 6% 90%;\n  --sidebar: 210 5% 94%;\n  --sidebar-foreground: 215 16% 12%;\n  --sidebar-border: 214 6% 86%;\n  --sidebar-primary: 210 82% 42%;\n  --sidebar-primary-foreground: 210 15% 98%;\n  --sidebar-accent: 210 12% 88%;\n  --sidebar-accent-foreground: 215 16% 18%;\n  --sidebar-ring: 210 82% 42%;\n  --popover: 210 5% 92%;\n  --popover-foreground: 215 16% 12%;\n  --popover-border: 214 6% 84%;\n  --primary: 210 82% 42%;\n  --primary-foreground: 210 15% 98%;\n  --secondary: 210 8% 86%;\n  --secondary-foreground: 215 16% 16%;\n  --muted: 210 10% 90%;\n  --muted-foreground: 215 12% 32%;\n  --accent: 210 14% 88%;\n  --accent-foreground: 215 16% 18%;\n  --destructive: 0 72% 48%;\n  --destructive-foreground: 0 8% 98%;\n  --input: 214 10% 75%;\n  --ring: 210 82% 42%;\n  --chart-1: 210 82% 42%;\n  --chart-2: 170 75% 38%;\n  --chart-3: 280 65% 45%;\n  --chart-4: 35 85% 48%;\n  --chart-5: 335 78% 42%;\n\n  --font-sans: Inter, Open Sans, sans-serif, system-ui, -apple-system;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .5rem; /* 8px */\n  --shadow-2xs: 0px 1px 2px 0px hsl(210 10% 8% / 0.05);\n  --shadow-xs: 0px 1px 3px 0px hsl(210 10% 8% / 0.08);\n  --shadow-sm: 0px 2px 4px 0px hsl(210 10% 8% / 0.06), 0px 1px 2px -1px hsl(210 10% 8% / 0.04);\n  --shadow: 0px 4px 6px 0px hsl(210 10% 8% / 0.06), 0px 2px 4px -1px hsl(210 10% 8% / 0.04);\n  --shadow-md: 0px 6px 12px 0px hsl(210 10% 8% / 0.08), 0px 2px 4px -1px hsl(210 10% 8% / 0.06);\n  --shadow-lg: 0px 10px 20px 0px hsl(210 10% 8% / 0.10), 0px 4px 6px -1px hsl(210 10% 8% / 0.08);\n  --shadow-xl: 0px 16px 32px 0px hsl(210 10% 8% / 0.12), 0px 8px 10px -1px hsl(210 10% 8% / 0.10);\n  --shadow-2xl: 0px 24px 48px 0px hsl(210 10% 8% / 0.14);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n\n  --opaque-button-border-intensity: 9;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n\n  --background: 215 5% 8%;\n  --foreground: 210 8% 92%;\n  --border: 215 6% 18%;\n  --card: 215 5% 10%;\n  --card-foreground: 210 8% 92%;\n  --card-border: 215 6% 20%;\n  --sidebar: 215 5% 12%;\n  --sidebar-foreground: 210 8% 92%;\n  --sidebar-border: 215 6% 22%;\n  --sidebar-primary: 210 78% 38%;\n  --sidebar-primary-foreground: 210 10% 96%;\n  --sidebar-accent: 210 10% 18%;\n  --sidebar-accent-foreground: 210 8% 88%;\n  --sidebar-ring: 210 78% 42%;\n  --popover: 215 5% 14%;\n  --popover-foreground: 210 8% 92%;\n  --popover-border: 215 6% 24%;\n  --primary: 210 78% 38%;\n  --primary-foreground: 210 10% 96%;\n  --secondary: 215 8% 20%;\n  --secondary-foreground: 210 8% 88%;\n  --muted: 215 10% 16%;\n  --muted-foreground: 210 10% 68%;\n  --accent: 210 12% 18%;\n  --accent-foreground: 210 8% 88%;\n  --destructive: 0 68% 42%;\n  --destructive-foreground: 0 6% 96%;\n  --input: 215 12% 32%;\n  --ring: 210 78% 42%;\n  --chart-1: 210 85% 58%;\n  --chart-2: 170 75% 58%;\n  --chart-3: 280 70% 65%;\n  --chart-4: 35 90% 62%;\n  --chart-5: 335 80% 62%;\n\n  --shadow-2xs: 0px 1px 2px 0px hsl(0 0% 0% / 0.20);\n  --shadow-xs: 0px 1px 3px 0px hsl(0 0% 0% / 0.25);\n  --shadow-sm: 0px 2px 4px 0px hsl(0 0% 0% / 0.22), 0px 1px 2px -1px hsl(0 0% 0% / 0.18);\n  --shadow: 0px 4px 6px 0px hsl(0 0% 0% / 0.24), 0px 2px 4px -1px hsl(0 0% 0% / 0.20);\n  --shadow-md: 0px 6px 12px 0px hsl(0 0% 0% / 0.28), 0px 2px 4px -1px hsl(0 0% 0% / 0.24);\n  --shadow-lg: 0px 10px 20px 0px hsl(0 0% 0% / 0.32), 0px 4px 6px -1px hsl(0 0% 0% / 0.28);\n  --shadow-xl: 0px 16px 32px 0px hsl(0 0% 0% / 0.36), 0px 8px 10px -1px hsl(0 0% 0% / 0.32);\n  --shadow-2xl: 0px 24px 48px 0px hsl(0 0% 0% / 0.40);\n\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}","size_bytes":9773},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/pages/skin-analysis.tsx":{"content":"import { useState } from \"react\";\nimport { type ConsentFormData, type AnalysisResponse } from \"@/types/schema\";\nimport { analyzeImages } from \"@/lib/api\";\nimport Header from \"@/components/Header\";\nimport ConsentForm from \"@/components/ConsentForm\";\nimport ImageUpload from \"@/components/ImageUpload\";\nimport AnalysisLoading from \"@/components/AnalysisLoading\";\nimport AnalysisResults from \"@/components/AnalysisResults\";\nimport FeedbackForm from \"@/components/FeedbackForm\";\nimport ProgressSteps from \"@/components/ProgressSteps\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { ArrowLeft, Sparkles } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ntype Step = \"consent\" | \"upload\" | \"loading\" | \"results\";\n\nconst stepMapping: Record<Step, number> = {\n  consent: 1,\n  upload: 2,\n  loading: 3,\n  results: 4,\n};\n\nexport default function SkinAnalysis() {\n  const [step, setStep] = useState<Step>(\"consent\");\n  const [consentData, setConsentData] = useState<ConsentFormData | null>(null);\n  const [images, setImages] = useState<string[]>([]);\n  const [analysisResults, setAnalysisResults] = useState<AnalysisResponse | null>(null);\n  const { toast } = useToast();\n\n  const handleConsentSubmit = (data: ConsentFormData) => {\n    setConsentData(data);\n    setStep(\"upload\");\n  };\n\n  const handleStartAnalysis = async () => {\n    if (images.length === 0) {\n      toast({\n        title: \"No images uploaded\",\n        description: \"Please upload at least one image to continue.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setStep(\"loading\");\n\n    try {\n      // Call your PHP backend API\n      const results = await analyzeImages(consentData, images);\n      setAnalysisResults(results);\n      setStep(\"results\");\n    } catch (error) {\n      console.error('Analysis error:', error);\n      toast({\n        title: \"Analysis failed\",\n        description: \"There was an error analyzing your images. Please try again.\",\n        variant: \"destructive\",\n      });\n      setStep(\"upload\");\n    }\n  };\n\n  const handleBackToConsent = () => {\n    setStep(\"consent\");\n  };\n\n  const handleStartOver = () => {\n    setStep(\"consent\");\n    setConsentData(null);\n    setImages([]);\n    setAnalysisResults(null);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Header />\n      \n      <div className=\"container mx-auto px-4 py-8 md:py-12\">\n        {step !== \"loading\" && (\n          <ProgressSteps\n            currentStep={stepMapping[step]}\n            steps={['Consent Form', 'Upload Images', 'Analysis', 'Results']}\n          />\n        )}\n\n        {step === \"consent\" && (\n          <div className=\"max-w-2xl mx-auto\">\n            <div className=\"text-center mb-8\">\n              <h2 className=\"text-2xl md:text-3xl font-bold mb-2\">Welcome to Skin Analysis</h2>\n              <p className=\"text-muted-foreground\">\n                Let's start by collecting some basic information about you\n              </p>\n            </div>\n            <ConsentForm onSubmit={handleConsentSubmit} />\n          </div>\n        )}\n\n        {step === \"upload\" && (\n          <div className=\"space-y-8 max-w-4xl mx-auto\">\n            <div className=\"text-center\">\n              <h2 className=\"text-2xl md:text-3xl font-bold mb-2\">Upload Your Images</h2>\n              <p className=\"text-muted-foreground\">\n                Upload clear photos of the affected skin areas for accurate analysis\n              </p>\n            </div>\n\n            <Card>\n              <CardHeader>\n                <div className=\"flex items-center gap-4\">\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={handleBackToConsent}\n                    data-testid=\"button-back-to-consent\"\n                  >\n                    <ArrowLeft className=\"w-5 h-5\" />\n                  </Button>\n                  <div className=\"flex-1\">\n                    <CardTitle>Image Upload</CardTitle>\n                    <CardDescription>\n                      Choose images from your device or take photos with your camera\n                    </CardDescription>\n                  </div>\n                </div>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <ImageUpload onImagesChange={setImages} />\n                \n                {images.length > 0 && (\n                  <div className=\"pt-6 border-t flex justify-end\">\n                    <Button\n                      size=\"lg\"\n                      onClick={handleStartAnalysis}\n                      data-testid=\"button-start-analysis\"\n                      className=\"gap-2\"\n                    >\n                      <Sparkles className=\"w-5 h-5\" />\n                      Start AI Analysis\n                    </Button>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n        )}\n\n        {step === \"loading\" && <AnalysisLoading />}\n\n        {step === \"results\" && analysisResults && (\n          <div className=\"space-y-8 max-w-4xl mx-auto\">\n            <AnalysisResults results={analysisResults} />\n            <FeedbackForm />\n            \n            <div className=\"flex justify-center pt-4\">\n              <Button\n                variant=\"outline\"\n                size=\"lg\"\n                onClick={handleStartOver}\n                data-testid=\"button-start-over\"\n              >\n                Start New Analysis\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":5661},"client/src/components/AnalysisLoading.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { Loader2 } from \"lucide-react\";\n\nexport default function AnalysisLoading() {\n  return (\n    <div className=\"fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-50\">\n      <Card className=\"max-w-md w-full mx-4\">\n        <CardContent className=\"flex flex-col items-center justify-center py-12 px-6\">\n          <Loader2 className=\"w-16 h-16 text-primary animate-spin mb-6\" data-testid=\"loading-spinner\" />\n          <h3 className=\"text-xl font-semibold mb-2\">Analyzing your skin...</h3>\n          <p className=\"text-sm text-muted-foreground text-center mb-4\">\n            Our AI is carefully examining your images\n          </p>\n          <div className=\"flex gap-1.5 items-center\">\n            <div className=\"w-2 h-2 bg-primary rounded-full animate-bounce\" style={{ animationDelay: '0ms' }}></div>\n            <div className=\"w-2 h-2 bg-primary rounded-full animate-bounce\" style={{ animationDelay: '150ms' }}></div>\n            <div className=\"w-2 h-2 bg-primary rounded-full animate-bounce\" style={{ animationDelay: '300ms' }}></div>\n          </div>\n          <p className=\"text-xs text-muted-foreground mt-6\">\n            This may take 30-60 seconds\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":1320},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/examples/ImageUpload.tsx":{"content":"import ImageUpload from '../ImageUpload';\n\nexport default function ImageUploadExample() {\n  const handleImagesChange = (images: string[]) => {\n    console.log('Images updated:', images.length);\n  };\n\n  return <ImageUpload onImagesChange={handleImagesChange} />;\n}\n","size_bytes":264},"client/src/components/CameraCapture.tsx":{"content":"import { useState, useRef } from \"react\";\nimport Webcam from \"react-webcam\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Camera, X, FlipHorizontal } from \"lucide-react\";\n\ninterface CameraCaptureProps {\n  onCapture: (imageSrc: string) => void;\n  onClose: () => void;\n}\n\nexport default function CameraCapture({ onCapture, onClose }: CameraCaptureProps) {\n  const [facingMode, setFacingMode] = useState<\"user\" | \"environment\">(\"user\");\n  const webcamRef = useRef<Webcam>(null);\n\n  const capture = () => {\n    const imageSrc = webcamRef.current?.getScreenshot();\n    if (imageSrc) {\n      onCapture(imageSrc);\n    }\n  };\n\n  const toggleCamera = () => {\n    setFacingMode((prev) => (prev === \"user\" ? \"environment\" : \"user\"));\n  };\n\n  return (\n    <Card className=\"max-w-2xl mx-auto\">\n      <CardHeader className=\"flex flex-row items-center justify-between gap-4\">\n        <CardTitle>Camera</CardTitle>\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          onClick={onClose}\n          data-testid=\"button-close-camera\"\n        >\n          <X className=\"w-5 h-5\" />\n        </Button>\n      </CardHeader>\n      <CardContent className=\"space-y-4\">\n        <div className=\"relative aspect-video rounded-lg overflow-hidden bg-muted\">\n          <Webcam\n            ref={webcamRef}\n            audio={false}\n            screenshotFormat=\"image/jpeg\"\n            videoConstraints={{\n              facingMode: facingMode,\n            }}\n            className=\"w-full h-full object-cover\"\n            data-testid=\"webcam-preview\"\n          />\n        </div>\n\n        <div className=\"flex items-center justify-center gap-4\">\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={toggleCamera}\n            data-testid=\"button-toggle-camera\"\n          >\n            <FlipHorizontal className=\"w-5 h-5\" />\n          </Button>\n          <Button\n            size=\"lg\"\n            className=\"rounded-full w-16 h-16\"\n            onClick={capture}\n            data-testid=\"button-capture-photo\"\n          >\n            <Camera className=\"w-6 h-6\" />\n          </Button>\n        </div>\n\n        <p className=\"text-sm text-muted-foreground text-center\">\n          {facingMode === \"user\" ? \"Front Camera\" : \"Back Camera\"}\n        </p>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":2402},"client/src/types/schema.ts":{"content":"import { z } from \"zod\";\n\nexport const consentFormSchema = z.object({\n  fullName: z.string().min(2, \"Full name must be at least 2 characters\"),\n  age: z.coerce.number().min(1, \"Age is required\").max(120, \"Please enter a valid age\"),\n  gender: z.enum([\"male\", \"female\", \"other\", \"prefer-not-to-say\"], {\n    required_error: \"Please select a gender\",\n  }),\n  skinType: z.enum([\"oily\", \"dry\", \"combination\", \"sensitive\", \"normal\"], {\n    required_error: \"Please select your skin type\",\n  }),\n  address: z.string().min(5, \"Please enter a valid address\"),\n  city: z.string().min(2, \"City is required\"),\n  state: z.string().min(2, \"State is required\"),\n  country: z.string().min(2, \"Country is required\"),\n});\n\nexport type ConsentFormData = z.infer<typeof consentFormSchema>;\n\nexport const feedbackFormSchema = z.object({\n  suggestion: z.string().min(10, \"Please provide at least 10 characters of feedback\"),\n  email: z.string().email(\"Please enter a valid email address\"),\n});\n\nexport type FeedbackFormData = z.infer<typeof feedbackFormSchema>;\n\nexport interface AnalysisRequest {\n  consentData: ConsentFormData;\n  images: string[];\n}\n\nexport interface AnalysisResponse {\n  analysis: string;\n  recommendations: string[];\n  severity: \"mild\" | \"moderate\" | \"severe\";\n}\n","size_bytes":1261},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/examples/ConsentForm.tsx":{"content":"import ConsentForm from '../ConsentForm';\n\nexport default function ConsentFormExample() {\n  const handleSubmit = (data: any) => {\n    console.log('Consent form submitted:', data);\n  };\n\n  return <ConsentForm onSubmit={handleSubmit} />;\n}\n","size_bytes":238},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/types/google-maps.d.ts":{"content":"declare namespace google {\n  namespace maps {\n    namespace places {\n      class Autocomplete {\n        constructor(\n          input: HTMLInputElement,\n          opts?: AutocompleteOptions\n        );\n        addListener(eventName: string, handler: () => void): void;\n        getPlace(): PlaceResult;\n      }\n\n      interface AutocompleteOptions {\n        types?: string[];\n      }\n\n      interface PlaceResult {\n        formatted_address?: string;\n        address_components?: AddressComponent[];\n      }\n\n      interface AddressComponent {\n        long_name: string;\n        short_name: string;\n        types: string[];\n      }\n    }\n  }\n}\n\ninterface Window {\n  google?: typeof google;\n}\n","size_bytes":689},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // No backend routes needed - using external PHP backend\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":283},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/lib/api.ts":{"content":"// API Configuration\n// TODO: Update this URL with your PHP backend endpoint\nexport const API_BASE_URL = 'https://your-backend-url.com/api';\n\nexport const API_ENDPOINTS = {\n  analyze: `${API_BASE_URL}/analyze`,\n  feedback: `${API_BASE_URL}/feedback`,\n};\n\nexport async function analyzeImages(consentData: any, images: string[]) {\n  const formData = new FormData();\n  \n  // Add consent data\n  formData.append('consentData', JSON.stringify(consentData));\n  \n  // Add images\n  images.forEach((image, index) => {\n    // Convert base64 to blob\n    const byteString = atob(image.split(',')[1]);\n    const mimeString = image.split(',')[0].split(':')[1].split(';')[0];\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n    for (let i = 0; i < byteString.length; i++) {\n      ia[i] = byteString.charCodeAt(i);\n    }\n    const blob = new Blob([ab], { type: mimeString });\n    formData.append(`image_${index}`, blob, `image_${index}.jpg`);\n  });\n\n  const response = await fetch(API_ENDPOINTS.analyze, {\n    method: 'POST',\n    body: formData,\n  });\n\n  if (!response.ok) {\n    throw new Error('Analysis failed');\n  }\n\n  return response.json();\n}\n\nexport async function submitFeedback(suggestion: string, email: string) {\n  const response = await fetch(API_ENDPOINTS.feedback, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ suggestion, email }),\n  });\n\n  if (!response.ok) {\n    throw new Error('Feedback submission failed');\n  }\n\n  return response.json();\n}\n","size_bytes":1547},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport SkinAnalysis from \"@/pages/skin-analysis\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={SkinAnalysis} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <Router />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":724},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  base: process.env.NODE_ENV === 'production' ? '/skin-disease/' : '/',\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"src\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist\"),\n    emptyOutDir: true,\n  },\n  server: {\n    host: \"0.0.0.0\",\n    port: 5000,\n    allowedHosts: true,\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":738},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/examples/Header.tsx":{"content":"import Header from '../Header';\n\nexport default function HeaderExample() {\n  return <Header />;\n}\n","size_bytes":98},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ProgressSteps.tsx":{"content":"import { Check } from \"lucide-react\";\n\ninterface ProgressStepsProps {\n  currentStep: number;\n  steps: string[];\n}\n\nexport default function ProgressSteps({ currentStep, steps }: ProgressStepsProps) {\n  return (\n    <div className=\"w-full max-w-3xl mx-auto mb-8\">\n      <div className=\"flex items-center justify-between\">\n        {steps.map((step, index) => {\n          const stepNumber = index + 1;\n          const isActive = currentStep === stepNumber;\n          const isCompleted = currentStep > stepNumber;\n\n          return (\n            <div key={index} className=\"flex items-center flex-1\">\n              <div className=\"flex flex-col items-center\">\n                <div\n                  className={`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all ${\n                    isCompleted\n                      ? \"bg-primary border-primary text-primary-foreground\"\n                      : isActive\n                      ? \"border-primary text-primary bg-primary/10\"\n                      : \"border-border text-muted-foreground\"\n                  }`}\n                  data-testid={`step-${stepNumber}`}\n                >\n                  {isCompleted ? (\n                    <Check className=\"w-5 h-5\" />\n                  ) : (\n                    <span className=\"font-semibold\">{stepNumber}</span>\n                  )}\n                </div>\n                <span\n                  className={`text-xs mt-2 text-center font-medium ${\n                    isActive || isCompleted ? \"text-foreground\" : \"text-muted-foreground\"\n                  }`}\n                >\n                  {step}\n                </span>\n              </div>\n              {index < steps.length - 1 && (\n                <div\n                  className={`flex-1 h-0.5 mx-2 transition-colors ${\n                    isCompleted ? \"bg-primary\" : \"bg-border\"\n                  }`}\n                />\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n","size_bytes":1999},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"replit.md":{"content":"# Raupyam - AI-Powered Skin Analysis Application\n\n## Overview\n\nRaupyam is a healthcare-focused web application that provides AI-powered skin analysis. Users complete a consent form, upload skin images, and receive detailed analysis with personalized recommendations. The application follows Material Design principles adapted for medical contexts, emphasizing trust, clarity, and accessibility, with a business vision to provide accessible and accurate skin health insights.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Framework**: React with TypeScript and Vite.\n**UI Component System**: shadcn/ui components built on Radix UI, located in `client/src/components/ui/`.\n**Styling**: Tailwind CSS with custom HSL-based design tokens, \"New York\" style variant, and Inter font family.\n**Form Management**: React Hook Form with Zod validation for type-safe forms, schemas in `shared/schema.ts`.\n**State Management**: React Query (TanStack Query) for server state and caching.\n**Routing**: Wouter for lightweight client-side navigation.\n**Session Storage**: Browser session storage for temporary data persistence during workflow, including patient data, air quality, and uploaded images.\n\n### Multi-Step User Flow\n\nThe application guides users through a multi-step process:\n1.  **Consent Form**: Collects personal info, integrates Google Places Autocomplete for address, geocodes for coordinates, and triggers background air quality API call. Features \"Behind the Scenes\" accordion that shows personalized skincare insights based on auto-detected location and environmental data immediately upon opening - no profile data required. Optional profile fields (age, gender, skin type, concerns) enhance personalization when provided.\n2.  **Image Upload**: Allows single image upload via file or camera capture (using react-webcam), with Base64 encoding.\n3.  **Analysis Loading**: Displays a full-screen loading overlay.\n4.  **Results Display**: Shows severity-based color-coded analysis, personalized recommendations, and a feedback form.\n\n### Backend Architecture\n\n**Server Framework**: Express.js with TypeScript, acting as a minimal proxy to an external PHP service.\n**API Integration**: Communicates with a PHP backend for AI analysis. The frontend sends only useful and relevant data - user profile fields, minimal air quality summary, minimal weather summary, and image. The PHP backend uses OpenAI GPT-4.1-mini for analysis, stores data in MySQL and Google Sheets, and uploads images to Google Drive.\n**Data Flow Philosophy**: Frontend extracts and sends only relevant fields from collected data to backend APIs. This reduces payload size and improves performance while providing all necessary information for analysis.\n**Retry Loop Prevention**: Implements hash-based tracking to prevent infinite API retry loops. When an API call fails, the system won't retry unless the user profile changes or an explicit retry is requested.\n**Build Process**: Vite for frontend (to `dist/public`), esbuild for backend (to `dist`).\n\n### Data Schema Design\n\n**Consent Form Schema**: Validated with Zod, includes full name, age, gender, skin type, concerns, and complete address details (cityName, city, state, country).\n\n**Personalize Magic Request**: Sends structured payload with loading state protection:\n- **Payload Structure**: `{ userData, environmentData }` matching PHP backend expectations\n- **User Data**: `{ age, gender, skinType, topConcern }`\n- **Environment Data**: `{ city, aqi, aqiCategory, dominantPollutant, temperature, feelsLike, humidity, humidityCategory, uvIndex, windSpeed, weatherDesc, waterHardness, pm25, pm10, co, no2, so2, o3 }`\n- **Loading Gate**: `isEnvLoading` state flag prevents stale data - API calls blocked until environmental data finishes fetching for new location\n- **Pollutant Extraction**: Normalized code matching (lowercase, strip dots/underscores) handles Google API variations (pm2.5, PM2_5, pm25)\n- **Humidity Categories**: Low (0-40%), Medium (41-70%), High (71-100%) with null/undefined as \"Medium\"\n\n**Analysis Request**: Sends minimal structured data:\n- **Patient Data**: Complete user profile with coordinates\n- **Air Quality Summary**: Same minimal structure as Personalize Magic (not full JSON)\n- **Weather Summary**: Same minimal structure as Personalize Magic (not full JSON)\n- **Image**: Single base64-encoded image\n\n**Backend Response Handling**: Frontend displays backend HTML responses as-is using dangerouslySetInnerHTML (sanitized with DOMPurify) - no frontend text processing or formatting.\n\n### Design System\n\n**Color Palette**: Neutral-based with primary blue, semantic colors for severity (green, yellow, red), and a dark charcoal text based on Raupyam branding.\n**Typography**: Main UI uses \"Onest\" sans-serif, analysis results use \"DM Sans\" sans-serif for readability.\n**Component Patterns**: Cards with rounded corners, buttons with elevation, 44px height for form inputs, and progressive disclosure.\n**Responsive Design**: Mobile-first approach with desktop enhancements at `md` breakpoint (768px).\n**UX Enhancements**: \n- Icon-based skin type selector\n- Pill-style multi-select for concerns (2-item max)\n- Increased touch targets/spacing for mobile accessibility (44px+ tap targets)\n- Snappy loading animations (200ms zoom-in)\n- Auto-closing \"Personalize Magic\" accordion when form fields change (prevents stale data)\n**HTML-Formatted AI Responses**: Analysis results are rendered as HTML, sanitized with DOMPurify, and styled using Tailwind Typography.\n\n## External Dependencies\n\n### Third-Party Services\n\n**Google Maps APIs**: Utilized for Address Autocomplete (Places API), Geocoding (to coordinates), and Air Quality API. Requires API key configuration.\n**External PHP Backend**: A separate service responsible for AI-powered skin analysis via `/analyze` and user feedback via `/feedback` endpoints.\n**OpenAI**: GPT-4.1-mini model is used by the PHP backend for skin analysis.\n\n### Key NPM Dependencies\n\n**UI Framework**: `react`, `react-dom`, `@radix-ui/*`, `tailwindcss`, `class-variance-authority`, `lucide-react`.\n**Forms & Validation**: `react-hook-form`, `zod`, `@hookform/resolvers`.\n**Development**: `vite`, `typescript`, `tsx`, `esbuild`.\n**Utilities**: `wouter`, `@tanstack/react-query`, `react-webcam`, `clsx`, `tailwind-merge`, `dompurify`.\n\n### Database\n\n**ORM**: Drizzle ORM configured for PostgreSQL.\n**Database**: MySQL (used by the external PHP service for data storage), and Google Sheets.","size_bytes":6554},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./index.html\", \"./src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\" /* 9px */,\n        md: \".375rem\" /* 6px */,\n        sm: \".1875rem\" /* 3px */,\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        customText: \"#393939\",\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\",\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4068},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"src/components/ConsentForm.tsx":{"content":"import { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { consentFormSchema, type ConsentFormData } from \"@/types/schema\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tooltip, TooltipContent, TooltipTrigger } from \"@/components/ui/tooltip\";\nimport {\n  Accordion,\n  AccordionContent,\n  AccordionItem,\n  AccordionTrigger,\n} from \"@/components/ui/accordion\";\nimport { useEffect, useRef, useState, useMemo, useCallback } from \"react\";\nimport { MapPin, Loader2, Info, Droplets, Wind, Heart, Zap, Sun, Cloud, ArrowRight, CheckCircle2, Lock, X, Sparkles } from \"lucide-react\";\nimport { BulletIcon } from \"@/components/BulletIcon\";\nimport { fetchEnvironmentalData, detectLocationFromIP, type Coordinates, type AirQualityResponse, type WeatherResponse } from \"@/lib/googleApis\";\nimport { sessionStorage } from \"@/lib/sessionStorage\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { formatPersonalizationData } from \"@/lib/magicSection\";\nimport { getPersonalizedMagicText } from \"@/lib/api\";\n\ninterface ConsentFormProps {\n  onSubmit: (data: ConsentFormData) => void;\n  initialData?: ConsentFormData | null;\n}\n\nexport default function ConsentForm({ onSubmit, initialData }: ConsentFormProps) {\n  const cityInputRef = useRef<HTMLInputElement>(null);\n  const autocompleteRef = useRef<google.maps.places.Autocomplete | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [citySelected, setCitySelected] = useState(!!initialData?.cityName);\n  const [coordinates, setCoordinates] = useState<Coordinates | null>(\n    (initialData as any)?.coordinates || null\n  );\n  const [lastSubmittedCity, setLastSubmittedCity] = useState<string>(\n    initialData?.cityName || \"\"\n  );\n  const [lastGeocodedCity, setLastGeocodedCity] = useState<string>(\n    initialData?.cityName || \"\"\n  );\n  const [environmentalData, setEnvironmentalData] = useState<{\n    airQuality: AirQualityResponse | null;\n    weather: WeatherResponse | null;\n    city: string;\n  } | null>(null);\n  const [isAutoDetecting, setIsAutoDetecting] = useState(false);\n  const [isEnvLoading, setIsEnvLoading] = useState(false);\n  const [personalizedMagicText, setPersonalizedMagicText] = useState<string | null>(null);\n  const [isLoadingMagicText, setIsLoadingMagicText] = useState(false);\n  const [cachedProfileHash, setCachedProfileHash] = useState<string | null>(null);\n  const [accordionOpen, setAccordionOpen] = useState<string>(\"\");\n  const [isManuallyOpened, setIsManuallyOpened] = useState(false);\n  const [retryRequested, setRetryRequested] = useState(false);\n  const requestTokenRef = useRef(0);\n  const lastFetchedHashRef = useRef<string | null>(null);\n  const { toast } = useToast();\n\n  const form = useForm<ConsentFormData>({\n    resolver: zodResolver(consentFormSchema),\n    defaultValues: initialData || {\n      fullName: \"\",\n      age: 0,\n      gender: undefined,\n      skinType: undefined,\n      topConcern: [],\n      cityName: \"\",\n      city: \"\",\n      state: \"\",\n      country: \"\",\n    },\n  });\n\n  // Watch form values for completion validation\n  const age = form.watch(\"age\");\n  const gender = form.watch(\"gender\");\n  const skinType = form.watch(\"skinType\");\n  const topConcern = form.watch(\"topConcern\");\n\n  // Watch location fields for manual entry\n  const city = form.watch(\"city\");\n  const cityName = form.watch(\"cityName\");\n\n  // Get effective location - prefer manual entry over auto-detected data\n  const effectiveLocation = useMemo(() => {\n    // If user has selected a city via autocomplete, use cityName\n    if (cityName && cityName.trim()) {\n      return cityName.trim();\n    }\n    // Otherwise use city field if available\n    if (city && city.trim()) {\n      return city.trim();\n    }\n    // Otherwise use environmental data city if available\n    if (environmentalData?.city) {\n      return environmentalData.city;\n    }\n    return null;\n  }, [cityName, city, environmentalData?.city]);\n\n  // Check if environmental data is ready for personalization\n  const isPersonalizationReady = useMemo(() => {\n    // Environmental data must be loaded, match current location, and not be currently loading\n    const envMatchesLocation = environmentalData?.city === effectiveLocation;\n    return !!(effectiveLocation && environmentalData && envMatchesLocation && !isEnvLoading);\n  }, [effectiveLocation, environmentalData, isEnvLoading]);\n\n  // Check if user has added profile enhancements\n  const hasProfileData = useMemo(() => {\n    return !!(age > 0 || gender || skinType || (topConcern && topConcern.length > 0));\n  }, [age, gender, skinType, topConcern]);\n\n  // Generate hash of current profile for caching\n  const generateProfileHash = useCallback(() => {\n    return JSON.stringify({\n      age,\n      gender,\n      skinType,\n      topConcern: topConcern ? [...topConcern].sort() : [],\n      // Use effective location (prioritizes manual over auto-detect)\n      locationCity: effectiveLocation,\n      // Only include environmental data if it matches effective location\n      aqi: (effectiveLocation === environmentalData?.city) ? environmentalData?.airQuality?.aqi : null,\n      aqiCategory: (effectiveLocation === environmentalData?.city) ? environmentalData?.airQuality?.category : null,\n      humidity: (effectiveLocation === environmentalData?.city) ? environmentalData?.weather?.humidity : null,\n      temperature: (effectiveLocation === environmentalData?.city) ? environmentalData?.weather?.temperature : null,\n      uvIndex: (effectiveLocation === environmentalData?.city) ? environmentalData?.weather?.uvIndex : null,\n    });\n  }, [age, gender, skinType, topConcern, effectiveLocation, environmentalData]);\n\n  // Auto-close accordion when profile changes (fixes timing issues with controlled Radix component)\n  useEffect(() => {\n    const currentHash = generateProfileHash();\n\n    // If profile hash changed and we have cached data, reset personalization state\n    if (cachedProfileHash && cachedProfileHash !== currentHash) {\n      setPersonalizedMagicText(null);\n      setCachedProfileHash(null);\n      setAccordionOpen(\"\");\n      setIsManuallyOpened(false);\n    }\n  }, [age, gender, skinType, topConcern, effectiveLocation, environmentalData, generateProfileHash, cachedProfileHash]);\n\n  // Centralized handler for form field changes - clears cached data and closes accordion\n  const handleFormFieldChange = useCallback(() => {\n    // Always clear cached personalization when fields change\n    setPersonalizedMagicText(null);\n    setCachedProfileHash(null);\n\n    // Reset lastFetchedHashRef to allow new fetches for the updated profile\n    lastFetchedHashRef.current = null;\n\n    // Always close accordion when any field is filled so user reopens to fetch fresh data\n    setAccordionOpen(\"\");\n    setIsManuallyOpened(false);\n  }, []);\n\n  // Extracted fetch logic for personalization\n  const fetchMagicText = useCallback(async () => {\n    const currentHash = generateProfileHash();\n\n    // Skip if we already have cached result for this exact profile\n    if (cachedProfileHash === currentHash && personalizedMagicText) {\n      return;\n    }\n\n    // Set lastFetchedHashRef before making the API call to prevent retry loops\n    lastFetchedHashRef.current = currentHash;\n\n    // Clear retryRequested when starting a fetch\n    setRetryRequested(false);\n\n    // Increment request token to invalidate any in-flight requests\n    const thisRequestToken = ++requestTokenRef.current;\n\n    setIsLoadingMagicText(true);\n\n    try {\n      // Get all current form values\n      const formValues = form.getValues();\n\n      // Send complete raw data without filtering - backend will handle everything\n      const personalizationData = formatPersonalizationData(\n        formValues,\n        effectiveLocation || \"your area\",\n        environmentalData?.airQuality || null,\n        environmentalData?.weather || null\n      );\n\n      const response = await getPersonalizedMagicText(personalizationData);\n\n      // Ignore response if a newer request has been made\n      if (thisRequestToken !== requestTokenRef.current) {\n        return;\n      }\n\n      if (response.personalizedText) {\n        setPersonalizedMagicText(response.personalizedText);\n        setCachedProfileHash(currentHash);\n      } else if (response.error) {\n        console.error('Failed to get personalized text:', response.error);\n        setPersonalizedMagicText(null);\n        toast({\n          title: \"Couldn't load personalized magic\",\n          description: \"Please try again in a moment.\",\n          variant: \"destructive\",\n          duration: 3000,\n        });\n      }\n    } catch (error) {\n      console.error('Error fetching personalized text:', error);\n\n      // Ignore errors from stale requests\n      if (thisRequestToken !== requestTokenRef.current) {\n        return;\n      }\n\n      setPersonalizedMagicText(null);\n      toast({\n        title: \"Something went wrong\",\n        description: \"Please try again later.\",\n        variant: \"destructive\",\n        duration: 3000,\n      });\n    } finally {\n      // Only clear loading flag if this is still the current request\n      if (thisRequestToken === requestTokenRef.current) {\n        setIsLoadingMagicText(false);\n      }\n    }\n  }, [generateProfileHash, cachedProfileHash, personalizedMagicText, effectiveLocation, environmentalData, form, toast]);\n\n  // Handle accordion toggle - fetch personalized magic when opened\n  const handleAccordionChange = async (value: string | undefined) => {\n    setAccordionOpen(value || \"\");\n\n    // Track if user manually opened the accordion\n    if (value === \"behind-scenes\") {\n      setIsManuallyOpened(true);\n    } else {\n      setIsManuallyOpened(false);\n    }\n\n    // Only fetch when accordion opens and profile is ready\n    if (value === \"behind-scenes\" && isPersonalizationReady) {\n      fetchMagicText();\n    }\n  };\n\n  // Auto-refetch when accordion is open and profile data changes\n  useEffect(() => {\n    const currentHash = generateProfileHash();\n    \n    // Only fetch if profile hash has changed from last attempt OR retry is explicitly requested\n    const shouldFetch = \n      accordionOpen === \"behind-scenes\" &&\n      isPersonalizationReady &&\n      !personalizedMagicText &&\n      !isLoadingMagicText &&  // Prevent duplicate requests while one is in flight\n      (lastFetchedHashRef.current !== currentHash || retryRequested);  // NEW: Only run when hash changed OR retry requested\n    \n    if (shouldFetch) {\n      // Debounce to avoid excessive requests during rapid edits\n      const timeoutId = setTimeout(() => {\n        fetchMagicText();\n      }, 500);\n\n      return () => clearTimeout(timeoutId);\n    }\n  }, [accordionOpen, isPersonalizationReady, personalizedMagicText, isLoadingMagicText, retryRequested, generateProfileHash, fetchMagicText]);\n\n  useEffect(() => {\n    if (cityInputRef.current && window.google?.maps?.places) {\n      autocompleteRef.current = new google.maps.places.Autocomplete(\n        cityInputRef.current,\n        {\n          types: [\"(cities)\"],\n        }\n      );\n\n      autocompleteRef.current.addListener(\"place_changed\", async () => {\n        const place = autocompleteRef.current?.getPlace();\n        if (place?.formatted_address) {\n          let cityName = \"\";\n          let city = \"\";\n          let state = \"\";\n          let country = \"\";\n          let countryCode = \"\";\n\n          place.address_components?.forEach((component: google.maps.places.AddressComponent) => {\n            const types = component.types;\n            if (types.includes(\"locality\")) {\n              city = component.long_name;\n              cityName = component.long_name;\n            }\n            if (types.includes(\"administrative_area_level_1\")) {\n              state = component.long_name;\n            }\n            if (types.includes(\"country\")) {\n              country = component.long_name;\n              countryCode = component.short_name;\n            }\n          });\n\n          form.setValue(\"cityName\", cityName, { shouldValidate: true });\n          form.setValue(\"city\", city || cityName, { shouldValidate: true });\n          form.setValue(\"state\", state, { shouldValidate: true });\n          form.setValue(\"country\", country, { shouldValidate: true });\n\n          // Validate that required fields are present\n          if (!cityName || !state || !country) {\n            // Clear the fields if incomplete\n            form.setValue(\"cityName\", \"\", { shouldValidate: false });\n            form.setValue(\"city\", \"\", { shouldValidate: false });\n            form.setValue(\"state\", \"\", { shouldValidate: false });\n            form.setValue(\"country\", \"\", { shouldValidate: false });\n            setCitySelected(false);\n\n            toast({\n              title: \"Incomplete Location\",\n              description: \"The selected city is missing some required details (state or country). Please try selecting a different city from the suggestions.\",\n              variant: \"destructive\",\n              duration: 6000,\n            });\n            return;\n          }\n\n          // Reset magic section when location changes\n          handleFormFieldChange();\n\n          if ((place as any).geometry?.location) {\n            const coords = {\n              lat: (place as any).geometry.location.lat(),\n              lng: (place as any).geometry.location.lng(),\n            };\n            setCoordinates(coords);\n\n            // Only fetch environmental data if city actually changed\n            if (cityName !== lastGeocodedCity) {\n              setLastGeocodedCity(cityName);\n\n              // Set loading state before fetching environmental data\n              setIsEnvLoading(true);\n              \n              try {\n                const envData = await fetchEnvironmentalData(coords);\n                setEnvironmentalData({\n                  airQuality: envData.airQuality,\n                  weather: envData.weather,\n                  city: cityName,\n                });\n              } finally {\n                // Clear loading state after fetch completes (success or failure)\n                setIsEnvLoading(false);\n              }\n            }\n          }\n\n          setCitySelected(true);\n        }\n      });\n    }\n  }, [form]);\n\n  useEffect(() => {\n    async function autoDetectLocation() {\n      if (initialData?.city) {\n        return;\n      }\n\n      const savedAutoLocation = sessionStorage.getAutoLocation();\n\n      if (savedAutoLocation) {\n        form.setValue(\"cityName\", savedAutoLocation.city, { shouldValidate: false });\n        form.setValue(\"city\", savedAutoLocation.city, { shouldValidate: false });\n        form.setValue(\"state\", savedAutoLocation.state, { shouldValidate: false });\n        form.setValue(\"country\", savedAutoLocation.country, { shouldValidate: false });\n        setCoordinates(savedAutoLocation.coordinates);\n        setCitySelected(true);\n        setEnvironmentalData({\n          airQuality: savedAutoLocation.airQuality,\n          weather: savedAutoLocation.weather,\n          city: savedAutoLocation.city,\n        });\n        return;\n      }\n\n      setIsAutoDetecting(true);\n      setIsEnvLoading(true);\n\n      try {\n        const location = await detectLocationFromIP();\n\n        if (location) {\n          const coords = {\n            lat: location.latitude,\n            lng: location.longitude,\n          };\n\n          const envData = await fetchEnvironmentalData(coords);\n\n          const autoLocationData = {\n            city: location.city,\n            state: location.region,\n            country: location.country,\n            coordinates: coords,\n            airQuality: envData.airQuality,\n            weather: envData.weather,\n            detectedAt: new Date().toISOString(),\n          };\n\n          sessionStorage.saveAutoLocation(autoLocationData);\n\n          form.setValue(\"cityName\", location.city, { shouldValidate: false });\n          form.setValue(\"city\", location.city, { shouldValidate: false });\n          form.setValue(\"state\", location.region, { shouldValidate: false });\n          form.setValue(\"country\", location.country, { shouldValidate: false });\n          setCoordinates(coords);\n          setCitySelected(true);\n          setEnvironmentalData({\n            airQuality: envData.airQuality,\n            weather: envData.weather,\n            city: location.city,\n          });\n        }\n      } catch (error) {\n        console.error('Auto-detection failed:', error);\n      } finally {\n        setIsAutoDetecting(false);\n        setIsEnvLoading(false);\n      }\n    }\n\n    autoDetectLocation();\n  }, [form, initialData]);\n\n  const handleFormSubmit = async (data: ConsentFormData) => {\n    // Validate that location fields are not empty\n    if (!data.cityName || !data.city || !data.state || !data.country) {\n      form.setError(\"cityName\", {\n        type: \"manual\",\n        message: \"Please select a city from the dropdown\"\n      });\n      form.setError(\"city\", {\n        type: \"manual\",\n        message: \"City is required\"\n      });\n      toast({\n        title: \"Incomplete Location\",\n        description: \"Please select a city from the dropdown. Start typing your city name and choose from the suggestions.\",\n        variant: \"destructive\",\n        duration: 5000,\n      });\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    try {\n      const patientData = coordinates ? { ...data, coordinates } : data;\n\n      sessionStorage.savePatientData(patientData);\n\n      // Only save environmental data if we already have it (from auto-detection or address selection)\n      // Don't make new API calls on form submit - those should only happen when address is manually selected\n      if (environmentalData?.airQuality) {\n        sessionStorage.saveAirQuality({\n          ...environmentalData.airQuality,\n          timestamp: new Date().toISOString(),\n        });\n      }\n      if (environmentalData?.weather) {\n        sessionStorage.saveWeather({\n          ...environmentalData.weather,\n          timestamp: new Date().toISOString(),\n        });\n      }\n\n      if (!coordinates && data.cityName !== lastSubmittedCity) {\n        toast({\n          title: \"Location not found\",\n          description: \"We couldn't get coordinates for your city, but you can still proceed.\",\n          duration: 5000,\n        });\n      }\n\n      setLastSubmittedCity(data.cityName);\n      onSubmit(patientData as ConsentFormData);\n    } catch (error) {\n      console.error('Form submission error:', error);\n\n      const errorMessage = error instanceof Error\n        ? error.message\n        : \"There was an error processing your information. Please try again.\";\n\n      toast({\n        title: \"Error\",\n        description: errorMessage.includes('storage') || errorMessage.includes('quota')\n          ? \"Failed to save your information. Please check your browser storage settings and try again.\"\n          : errorMessage,\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Card className=\"bg-[#f8f8f8] dark:bg-gray-900/50 shadow-md\">\n      <CardHeader>\n        <CardTitle className=\"text-2xl md:text-3xl font-bold\">Your Skin Story Starter</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(handleFormSubmit)} className=\"space-y-8\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"fullName\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-base font-semibold\">What's the name behind that glow? </FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"Alex Rivera\"\n                        data-testid=\"input-fullname\"\n                        autoComplete=\"off\"\n                        className=\"min-h-11 text-base mt-15 placeholder:opacity-100 focus:placeholder:opacity-0\"\n                        {...field}\n                        onChange={(e) => {\n                          field.onChange(e);\n                          handleFormFieldChange();\n                        }}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"age\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"flex items-center gap-2 text-base font-semibold\">\n                      How many trips around the sun? (Age)\n                      <span onClick={(e) => e.preventDefault()}>\n                        <Tooltip delayDuration={0}>\n                          <TooltipTrigger asChild>\n                            <Info className=\"w-5 h-5 text-muted-foreground cursor-help\" />\n                          </TooltipTrigger>\n                          <TooltipContent className=\"px-4 py-3 text-base leading-relaxed max-w-sm\">\n                            <p className=\"tool-tip-info\">This lets us tweak for your vibeantioxidants for 20s pollution fighters, peptides for 40+ firmness.</p>\n                          </TooltipContent>\n                        </Tooltip>\n                      </span>\n                    </FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"number\"\n                        placeholder=\"24\"\n                        data-testid=\"input-age\"\n                        autoComplete=\"off\"\n                        className=\"min-h-11 text-base placeholder:opacity-100 focus:placeholder:opacity-0\"\n                        {...field}\n                        value={field.value || \"\"}\n                        onFocus={() => {\n                          if (field.value === 0) {\n                            form.setValue(\"age\", \"\" as any);\n                          }\n                        }}\n                        onChange={(e) => {\n                          const value = e.target.value;\n                          if (value === \"\") {\n                            form.setValue(\"age\", \"\" as any);\n                          } else {\n                            const numValue = parseInt(value, 10);\n                            if (!isNaN(numValue)) {\n                              field.onChange(numValue);\n                            }\n                          }\n                          handleFormFieldChange();\n                        }}\n                        onBlur={(e) => {\n                          const value = e.target.value;\n                          if (value === \"\" || value === \"0\") {\n                            form.setValue(\"age\", 0);\n                          } else {\n                            const numValue = parseInt(value, 10);\n                            if (!isNaN(numValue)) {\n                              field.onChange(numValue);\n                            }\n                          }\n                        }}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"gender\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel className=\"flex items-center gap-2 text-base font-semibold\">\n                    What's your vibe? Gender?\n                    <span onClick={(e) => e.preventDefault()}>\n                      <Tooltip delayDuration={0}>\n                        <TooltipTrigger asChild>\n                          <Info className=\"w-5 h-5 text-muted-foreground cursor-help\" />\n                        </TooltipTrigger>\n                        <TooltipContent className=\"px-4 py-3 text-base leading-relaxed max-w-sm\">\n                          <p className=\"tool-tip-info\">Hormones play a rolee.g., oil control for testosterone-driven 20s guys, hydration heroes for estrogen dips in women.</p>\n                        </TooltipContent>\n                      </Tooltip>\n                    </span>\n                  </FormLabel>\n                  <Select\n                    onValueChange={(value) => {\n                      field.onChange(value);\n                      handleFormFieldChange();\n                    }}\n                    defaultValue={field.value}\n                    data-testid=\"select-gender\"\n                  >\n                    <FormControl>\n                      <SelectTrigger className=\"min-h-11 text-base\">\n                        <SelectValue placeholder=\"Select your vibe\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      <SelectItem value=\"male\">Male</SelectItem>\n                      <SelectItem value=\"female\">Female</SelectItem>\n                      <SelectItem value=\"non-binary\">Non-Binary</SelectItem>\n                      <SelectItem value=\"prefer-not-to-say\">Prefer Not to Say</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"skinType\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel className=\"flex items-center gap-2 text-base font-semibold\">\n                    Your skin's mood today? (Flaky rebel or oily adventurer?) \n                    <Tooltip delayDuration={0}>\n                      <TooltipTrigger asChild>\n                        <Info className=\"w-5 h-5 text-muted-foreground cursor-help big-width\" />\n                      </TooltipTrigger>\n                      <TooltipContent className=\"px-4 py-3 text-base leading-relaxed max-w-sm\">\n                        <p className=\"tool-tip-info\">This fine-tunes emulsionse.g., lightweight gels for oily types in humid climate.</p>\n                      </TooltipContent>\n                    </Tooltip>\n                  </FormLabel>\n                  <FormControl>\n                    <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4 sm:gap-3\">\n                      {[\n                        { value: 'oily', label: 'Oily', icon: Droplets },\n                        { value: 'dry', label: 'Dry', icon: Wind },\n                        { value: 'combination', label: 'Combo', icon: Sparkles },\n                        { value: 'sensitive', label: 'Sensitive', icon: Heart },\n                        { value: 'normal', label: 'Normal', icon: Zap },\n                      ].map((type) => {\n                        const Icon = type.icon;\n                        const isSelected = field.value === type.value;\n\n                        return (\n                          <Button\n                            key={type.value}\n                            type=\"button\"\n                            variant={isSelected ? \"default\" : \"outline\"}\n                            className=\"min-h-[60px] sm:min-h-[80px] flex flex-col items-center justify-center gap-1 sm:gap-2 px-1 sm:px-2 py-2 sm:py-3\"\n                            onClick={() => {\n                              field.onChange(type.value);\n                              handleFormFieldChange();\n                            }}\n                            data-testid={`button-skintype-${type.value}`}\n                          >\n                            <Icon className=\"w-4 h-4 sm:w-6 sm:h-6\" />\n                            <span className=\"text-xs sm:text-sm\">{type.label}</span>\n                          </Button>\n                        );\n                      })}\n                    </div>\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"topConcern\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel className=\"flex items-center gap-2 text-base font-semibold\">\n                    What's bugging your glow most? (Pick 1-2we've got fixes.) \n                    <Tooltip delayDuration={0}>\n                      <TooltipTrigger asChild>\n                        <Info className=\"w-5 h-5 text-muted-foreground cursor-help big-width\" />\n                      </TooltipTrigger>\n                      <TooltipContent className=\"px-4 py-3 text-base leading-relaxed max-w-sm\">\n                        <p className=\"tool-tip-info\">Zeroes in on heroes like bakuchiol for lines or niacinamide for redness, synced to your water quality.</p>\n                      </TooltipContent>\n                    </Tooltip>\n                  </FormLabel>\n                  <FormControl>\n                    <div className=\"flex flex-wrap gap-2 sm:gap-3\">\n                      {(['acne', 'fine-lines', 'dullness', 'redness', 'other'] as const).map((concern) => {\n                        const isSelected = field.value?.includes(concern);\n                        const isDisabled = !isSelected && (field.value?.length ?? 0) >= 2;\n                        const concernLabels = {\n                          'acne': 'Acne',\n                          'fine-lines': 'Fine Lines',\n                          'dullness': 'Dullness',\n                          'redness': 'Redness',\n                          'other': 'Other'\n                        };\n\n                        return (\n                          <Button\n                            key={concern}\n                            type=\"button\"\n                            variant={isSelected ? \"default\" : \"outline\"}\n                            size=\"lg\"\n                            className=\"rounded-full min-h-9 sm:min-h-11 px-4 sm:px-6 text-sm sm:text-base\"\n                            disabled={isDisabled}\n                            onClick={() => {\n                              const currentValues = field.value || [];\n                              if (isSelected) {\n                                field.onChange(currentValues.filter((v: string) => v !== concern));\n                              } else if (currentValues.length < 2) {\n                                field.onChange([...currentValues, concern]);\n                              }\n                              handleFormFieldChange();\n                            }}\n                            data-testid={`badge-concern-${concern}`}\n                          >\n                            {concernLabels[concern]}\n                          </Button>\n                        );\n                      })}\n                    </div>\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <FormField\n                control={form.control}\n                name=\"country\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-base font-semibold\">Country *</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"Auto-filled from city\"\n                        data-testid=\"input-country\"\n                        autoComplete=\"off\"\n                        {...field}\n                        readOnly\n                        className=\"min-h-11 text-base bg-muted/30\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"state\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel className=\"text-base font-semibold\">State *</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"Auto-filled from city\"\n                        data-testid=\"input-state\"\n                        autoComplete=\"off\"\n                        {...field}\n                        readOnly\n                        className=\"min-h-11 text-base bg-muted/30\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"cityName\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel className=\"flex items-center gap-2 text-base font-semibold\">\n                    <MapPin className=\"w-4 h-4\" />\n                    City *\n                  </FormLabel>\n                  <FormControl>\n                    <Input\n                      placeholder=\"Start typing your city...\"\n                      data-testid=\"input-city-name\"\n                      autoComplete=\"off\"\n                      className=\"min-h-11 text-base placeholder:opacity-100 focus:placeholder:opacity-0\"\n                      {...field}\n                      ref={cityInputRef}\n                      onChange={(e) => {\n                        field.onChange(e);\n                        handleFormFieldChange();\n                      }}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            {/* Auto-detected Location Message */}\n            {environmentalData && environmentalData.city && (\n              <div className=\"mt-6 p-4 bg-primary/5 border border-primary/20 rounded-lg\">\n                <div className=\"flex items-start gap-3\">\n                  <MapPin className=\"w-5 h-5 text-primary mt-[.12rem] flex-shrink-0\" />\n                  <p className=\"text-sm text-customText line-height-less\">\n                    <span className=\"font-semibold\">We grabbed {environmentalData.city}</span>\n                    {environmentalData.airQuality?.aqi !== undefined && environmentalData.airQuality?.aqi !== null && (\n                      <>\n                        its AQI{' '}\n                        <span className=\"font-semibold\">{environmentalData.airQuality.aqi}</span>\n                        {environmentalData.airQuality.category && (\n                          <span> ({environmentalData.airQuality.category})</span>\n                        )}\n                        {' '}means extra anti-pollution shields in your mix.\n                      </>\n                    )}\n                    {environmentalData.weather?.humidity !== undefined && environmentalData.weather?.humidity !== null && (\n                      <>\n                        {' '}\n                        {environmentalData.weather.humidity > 70\n                          ? \"We'll soften formulas to avoid that tight feeling.\"\n                          : \"Humidity here? We'll balance your routine perfectly.\"}\n                      </>\n                    )}\n                  </p>\n                </div>\n              </div>\n            )}\n\n            {/* Behind the Scenes Accordion - Magic Section */}\n            {effectiveLocation && (\n              <div className=\"mt-6\">\n                <Accordion type=\"single\" collapsible className=\"w-full\" value={accordionOpen} onValueChange={handleAccordionChange}>\n                  <AccordionItem value=\"behind-scenes\" className=\"border-none\">\n                    <AccordionTrigger className=\"text-lg md:text-xl hover:no-underline text-customText px-0 items-center\">\n                      <div className=\"flex items-center justify-between gap-2 flex-1 text-left\">\n                        <div className=\"text-[1.1rem] text-left\">\n                          <span className=\"font-semibold\">Behind the Scenes:</span>\n                          <span className=\"font-normal block md:inline md:ml-1\">How We Make Magic for {effectiveLocation}</span>\n                        </div>                        \n                      </div>\n                    </AccordionTrigger>\n                    <AccordionContent className=\"text-base text-customText/90 space-y-5 pt-3\">\n                      {isEnvLoading ? (\n                        <div className=\"flex flex-col items-center justify-center py-12 space-y-5\">\n                          <div className=\"relative flex items-center justify-center\">\n                            <Loader2 className=\"w-12 h-12 animate-spin text-primary\" />\n                          </div>\n                          <p className=\"text-base md:text-lg text-customText/70 animate-pulse text-center\">\n                            Fetching environmental data for {effectiveLocation}...\n                          </p>\n                        </div>\n                      ) : isLoadingMagicText ? (\n                        <div className=\"flex flex-col items-center justify-center py-12 space-y-5\">\n                          <div className=\"relative flex items-center justify-center\">\n                            <Loader2 className=\"w-12 h-12 animate-spin text-primary\" />\n                          </div>\n                          <p className=\"text-base md:text-lg text-customText/70 animate-pulse text-center\">\n                            Creating personalized magic text...\n                          </p>\n                        </div>\n                      ) : personalizedMagicText ? (\n                        <div \n                          className=\"max-w-none animate-in fade-in duration-500 pl-0 text-left prose prose-sm md:prose-base dark:prose-invert max-w-full\" \n                          style={{ fontFamily: 'var(--font-body)' }}\n                          dangerouslySetInnerHTML={{ __html: personalizedMagicText }}\n                        />\n                      ) : (\n                        <p className=\"text-base text-customText/70 text-center py-6\">\n                          Something went wrong. Please try again.\n                        </p>\n                      )}    \n                    </AccordionContent>\n                  </AccordionItem>\n                </Accordion>\n              </div>\n            )}\n          </form>\n        </Form>\n      </CardContent>\n\n      <div className=\"px-6 pb-6 space-y-4 mb-2\">\n        <Button\n          type=\"submit\"\n          onClick={form.handleSubmit(handleFormSubmit)}\n          size=\"lg\"\n          className=\"w-full px-8 min-h-12 md:h-14 group shadow-lg hover:shadow-xl transition-shadow duration-300 text-[16px] md:text-[18px]\"\n          data-testid=\"button-submit-consent\"\n          disabled={isSubmitting}\n        >\n          {isSubmitting ? (\n            <>\n              <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n              Processing...\n            </>\n          ) : (\n            <>\n              Reveal My World-Ready Routine\n              <ArrowRight className=\"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform\" />\n            </>\n          )}\n        </Button>\n\n        {/* Fun Fact Footer */}\n        <div className=\"text-left text-sm text-muted-foreground italic\">\n          <span className=\"flex mt-5 line-height-less\">           \n            Fun fact: 92% of globe-trotters like you unlocked brighter vibes in 2 weeks. Your move? (Data's vaultedpromise.)\n          </span>\n        </div>\n      </div>\n    </Card>\n  );\n}\n","size_bytes":39836},"src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"api/classes/admin.php":{"content":"<?php  \nrequire_once(\"config.php\");\n\nuse Rakit\\Validation\\Validator;\nuse Orhanerday\\OpenAi\\OpenAi;\nclass ADMIN extends dbconfig {\n   public static $data;\n   function __construct() {\n     parent::__construct();\n   }\n\n\n        public static function login($req){\n                try {                   \n                        if($req['email'] == \"\" || $req['password'] == \"\"){\n                                throw new exception(\"Email Or Password not match\");\n                        }\n                        $email= mysqli_real_escape_string(self::$con, $req['email']);\n                        $password= mysqli_real_escape_string(self::$con, $req['password']);\n                 \n                        $query = \"SELECT * FROM `admin` WHERE email = '\".$email.\"' AND password = '\".md5($password).\"' LIMIT 1\";\n                        $result = dbconfig::run($query);\n                        if(!$result) {\n                                throw new exception(\"Server not responde!\");\n                        }\n                        if(mysqli_num_rows($result) > 0){\n                                $resultSet = mysqli_fetch_assoc($result);\n                                $data = array('status'=>'success', 'msg'=>\"User detail fetched successfully.\", 'result'=>$resultSet);\n                        }else{\n                                $data = array('status'=>'error', 'msg'=>\"Username/Password Not exist!\", 'result'=>array());\n                        }               \n                }catch(Exception $e) {\n                        $data = array('status'=>'error', 'msg'=>$e->getMessage());\n                }finally{\n                        return $data;\n                }\n        }       \n        \n        public static function addPrompt($req, $model){\n                try {   \n                        $prompt= mysqli_real_escape_string(self::$con, $req['prompt']);\n\n                        $query = \"SELECT * FROM `prompts` WHERE model = '\".$model.\"'\";\n                        $result = dbconfig::run($query);\n                        if(!$result) {\n                                throw new exception(\"Server not responde!\");\n                        }                       \n                        if(mysqli_num_rows($result) > 0){\n                                $query = \"UPDATE `prompts` SET prompt = '\".$prompt.\"' WHERE model = '\".$model.\"'\";\n                        }else{\n                                $query = \"INSERT INTO `prompts` (prompt, model) VALUES ('\".$prompt.\"', '\".$model.\"')\";\n                        }               \n                        $result = dbconfig::run($query);\n                        if(!$result) {\n                                throw new exception(\"Server not responde2!\");\n                        }               \n                        $data = array('status'=>'success', 'msg'=>\"Prompt set successfully.\", 'result'=>'');\n                }catch(Exception $e) {\n                        $data = array('status'=>'error', 'msg'=>$e->getMessage());\n                }finally{\n                        return $data;\n                }\n        }       \n\n        public static function getPrompt($model=''){\n                try {   \n                        $resultSet = array();\n                        if($model == ''){\n                                $query = \"SELECT * FROM `prompts`\";\n                        }else{\n                                $query = \"SELECT * FROM `prompts` WHERE model = '\".$model.\"'\";\n                        }\n                        \n                        $result = dbconfig::run($query);  \n                        if(!$result) {\n                                throw new exception(\"Server not responde!\");\n                        }\n                        if(mysqli_num_rows($result) > 0){       \n                                while($row = mysqli_fetch_assoc($result)){\n                                        $resultSet[$row['model']] = $row['prompt'];     \n                                }               \n                        }\n                        $data = array('status'=>'success', 'msg'=>\"Instruction fetch successfully.\", 'result'=>$resultSet);\n                }catch(Exception $e) {\n                        $data = array('status'=>'error', 'msg'=>$e->getMessage());\n                }finally{\n                        return $data;\n                }\n        }\n\n        public static function checkUserExist($email){      \n                try {     \n                   $query = \"SELECT id FROM users WHERE email = '\".$email.\"'\"; \n                   $result = dbconfig::run($query);\n                   if(!$result) {\n                                        throw new exception(\"Oops! Something went wrong. <a href='\".HELPER_URL.base64_encode('error_support').\"'>Send error report to support</a>\");\n                   }\n                   $count = mysqli_num_rows($result);\n                   if($count > 0){\n                           throw new exception(\"User with this email already exists\");\n                   } \n                   $data = array('status'=>'success', 'msg'=>\"\", 'result'=>'');\n           } catch (Exception $e) {\n                   $data = array('status'=>'error', 'msg'=>$e->getMessage());\n           } finally {\n                   return $data;\n           }            \n        }\n\n        public static function editProfile($formdata, $id){\n                try {                           \n                        $query = \"UPDATE `admin` SET fullname = '\".$formdata['fullname'].\"', email = '\".$formdata['email'].\"'\";\n                        $result = dbconfig::run($query);  \n                        if(!$result) {\n                                throw new exception(\"Server not responde!\");\n                        }       \n                        $_SESSION['admin']['result']['fullname'] = $formdata['fullname'];       \n                        $_SESSION['admin']['result']['email'] = $formdata['email'];\n                        $data = array('status'=>'success', 'msg'=>\"Your profile update successfully.\", 'result'=>'');\n                }catch(Exception $e) {\n                        $data = array('status'=>'error', 'msg'=>$e->getMessage());\n                }finally{\n                        return $data;\n                }\n        }       \n\n        public static function changePassword($req, $id){\n                try {\n            // Validate password strength\n                        $uppercase = preg_match('@[A-Z]@', $req['password']);\n                        $lowercase = preg_match('@[a-z]@', $req['password']);\n                        $number    = preg_match('@[0-9]@', $req['password']);\n\n                        if(!$uppercase || !$lowercase || !$number || strlen($req['password']) < 8) {\n                            throw new exception('Password should be at least 8 characters in length and should include at least one upper case letter, one number.');\n                        }                       \n\n                        if($req['confirm_password'] !== $req['password']) {\n                throw new exception(\"Confirm password is not matched!\");\n        }               \n                        $query = \"UPDATE `admin` SET password = '\".md5($req['password']).\"', raw_password = '\".$req['password'].\"' WHERE id=\".$id;\n                        $result = dbconfig::run($query);  \n                        if(!$result) {\n                                throw new exception(\"Server not responde!\");\n                        }                               \n                        $data = array('status'=>'success', 'msg'=>\"Your password update successfully.\", 'result'=>'');\n                }catch(Exception $e) {\n                        $data = array('status'=>'error', 'msg'=>$e->getMessage());\n                }finally{\n                        return $data;\n                }\n        }\n\n}\n","size_bytes":7816},"src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"src/components/AnalysisLoading.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { sessionStorage } from \"@/lib/sessionStorage\";\n\nconst ROTATING_MESSAGES = [\n  { id: 1, label: \"Analyzing your location: {city}\", duration: 6000 },\n  { id: 2, label: \"Analyzing your air quality\", duration: 7000 },\n  { id: 3, label: \"Analyzing your weather condition\", duration: 7000 },\n  { id: 4, label: \"Reading your skin's unique story...\", duration: 7000 },\n  { id: 5, label: \"Crafting personalized recommendations...\", duration: 7000 },\n  { id: 6, label: \"Almost there...\", duration: 0 },\n];\n\nexport default function AnalysisLoading() {\n  const [currentMessage, setCurrentMessage] = useState(0);\n  const [detectedCity, setDetectedCity] = useState<string>(\"\");\n\n  useEffect(() => {\n    // Get detected city from session storage\n    const patientData = sessionStorage.getPatientData();\n    if (patientData?.city) {\n      setDetectedCity(patientData.city);\n    }\n\n    // Rotate through messages automatically\n    let messageTimer: ReturnType<typeof setTimeout>;\n\n    const progressToNextMessage = (messageIndex: number) => {\n      if (messageIndex >= ROTATING_MESSAGES.length) return;\n\n      setCurrentMessage(messageIndex);\n\n      const message = ROTATING_MESSAGES[messageIndex];\n      if (message.duration > 0) {\n        messageTimer = setTimeout(() => {\n          progressToNextMessage(messageIndex + 1);\n        }, message.duration);\n      }\n    };\n\n    progressToNextMessage(0);\n\n    return () => {\n      if (messageTimer) clearTimeout(messageTimer);\n    };\n  }, []);\n\n  const getCurrentMessageLabel = () => {\n    const message = ROTATING_MESSAGES[currentMessage];\n    if (!message) return \"\";\n    return message.label.replace(\"{city}\", detectedCity || \"your location\");\n  };\n\n  return (\n    <div className=\"bg-background/80 backdrop-blur-sm flex items-center justify-center w-full h-full\">\n      <Card className=\"max-w-md w-full mx-4 shadow-lg animate-in zoom-in-95 duration-200\">\n        <CardContent className=\"flex flex-col items-center justify-center py-12 px-6\">\n          <div className=\"relative mb-8\" data-testid=\"loading-spinner\">\n            <div className=\"w-20 h-20 border-8 border-gray-200 dark:border-gray-700 rounded-full\"></div>\n            <div className=\"absolute inset-0 w-20 h-20 border-8 border-[#34a853] border-t-transparent rounded-full animate-spin\"></div>\n          </div>\n\n          <h3 className=\"text-2xl md:text-3xl font-bold mb-6 text-center\">\n            Analyzing your skin's story\n          </h3>\n\n          <div className=\"flex gap-1.5 items-center mb-4\">\n            <div className=\"w-2 h-2 md:w-2.5 md:h-2.5 bg-[#4385f5] rounded-full animate-bounce\" style={{ animationDelay: '0ms' }}></div>\n            <div className=\"w-2 h-2 md:w-2.5 md:h-2.5 bg-[#fbbe04] rounded-full animate-bounce\" style={{ animationDelay: '150ms' }}></div>\n            <div className=\"w-2 h-2 md:w-2.5 md:h-2.5 bg-[#34a853] rounded-full animate-bounce\" style={{ animationDelay: '300ms' }}></div>\n            <div className=\"w-2 h-2 md:w-2.5 md:h-2.5 bg-[#ea4434] rounded-full animate-bounce\" style={{ animationDelay: '450ms' }}></div>\n          </div>\n\n          <p\n            key={currentMessage}\n            className=\"text-base md:text-lg font-medium text-primary animate-in fade-in slide-in-from-bottom-2 duration-500 text-center mb-4 min-h-[28px]\"\n            data-testid=\"progress-hint\"\n          >\n            {getCurrentMessageLabel()}\n          </p>\n\n          <p className=\"text-sm md:text-base text-muted-foreground text-center mb-2\">\n            This may take 30-60 seconds\n          </p>\n\n          <p className=\"text-sm md:text-base font-medium text-foreground/80 text-center\">\n            Hang tight! Don't go anywhere...\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":3837},"src/index.css":{"content":"/* Google Fonts - DM Sans for body text */\n@import url(\"https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap\");\n\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* Onest Font - Custom */\n@font-face {\n  font-family: \"Onest\";\n  src: url(\"/Onest-VariableFont_wght-VF_1762714768965.ttf\")\n      format(\"truetype\"),\n    url(\"/rP2Yp2ywxg089UriI5-g4vlH9VoD8Cmcqbu0-K4_1762714768963.woff2\")\n      format(\"woff2\");\n  font-weight: 100 900;\n  font-style: normal;\n  font-display: swap;\n}\n\n@font-face {\n  font-family: \"DM Sans\";\n  src: url(\"/DMSans-Regular.ttf\") format(\"truetype\");\n  font-weight: 100 900;\n  font-style: normal;\n  font-display: swap;\n}\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0, 0, 0, 0.1);\n  --badge-outline: rgba(0, 0, 0, 0.05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0, 0, 0, 0.03);\n  --elevate-2: rgba(0, 0, 0, 0.08);\n\n  --background: 0 0% 99%;\n  --foreground: 0 0% 21%;\n  --border: 0 0% 88%;\n  --card: 0 0% 100%;\n  --card-foreground: 0 0% 21%;\n  --card-border: 0 0% 90%;\n  --sidebar: 0 0% 97%;\n  --sidebar-foreground: 0 0% 21%;\n  --sidebar-border: 0 0% 86%;\n  --sidebar-primary: 217 91% 55%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 0 0% 92%;\n  --sidebar-accent-foreground: 0 0% 21%;\n  --sidebar-ring: 217 91% 55%;\n  --popover: 0 0% 100%;\n  --popover-foreground: 0 0% 21%;\n  --popover-border: 0 0% 88%;\n  --primary: 137 53% 43%;\n  --primary-foreground: 0 0% 100%;\n  --secondary: 0 0% 93%;\n  --secondary-foreground: 0 0% 21%;\n  --muted: 0 0% 95%;\n  --muted-foreground: 0 0% 45%;\n  --accent: 137 53% 43%;\n  --accent-foreground: 0 0% 100%;\n  --destructive: 4 90% 58%;\n  --destructive-foreground: 0 0% 100%;\n  --input: 0 0% 86%;\n  --ring: 217 91% 55%;\n  --chart-1: 217 91% 55%;\n  --chart-2: 45 100% 51%;\n  --chart-3: 142 76% 45%;\n  --chart-4: 0 84% 60%;\n  --chart-5: 280 65% 60%;\n\n  /* Raupyam Brand Colors - From Logo */\n  --raupyam-charcoal: 0 0% 21%;\n  --raupyam-blue: 217 91% 55%;\n  --raupyam-yellow: 45 100% 51%;\n  --raupyam-green: 142 76% 45%;\n  --raupyam-red: 0 84% 60%;\n\n  --font-sans: \"DM Sans\", sans-serif;\n  --font-body: \"DM Sans\", sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: 0.5rem; /* 8px */\n  --shadow-2xs: 0px 1px 2px 0px hsl(210 10% 8% / 0.05);\n  --shadow-xs: 0px 1px 3px 0px hsl(210 10% 8% / 0.08);\n  --shadow-sm: 0px 2px 4px 0px hsl(210 10% 8% / 0.06),\n    0px 1px 2px -1px hsl(210 10% 8% / 0.04);\n  --shadow: 0px 4px 6px 0px hsl(210 10% 8% / 0.06),\n    0px 2px 4px -1px hsl(210 10% 8% / 0.04);\n  --shadow-md: 0px 6px 12px 0px hsl(210 10% 8% / 0.08),\n    0px 2px 4px -1px hsl(210 10% 8% / 0.06);\n  --shadow-lg: 0px 10px 20px 0px hsl(210 10% 8% / 0.1),\n    0px 4px 6px -1px hsl(210 10% 8% / 0.08);\n  --shadow-xl: 0px 16px 32px 0px hsl(210 10% 8% / 0.12),\n    0px 8px 10px -1px hsl(210 10% 8% / 0.1);\n  --shadow-2xl: 0px 24px 48px 0px hsl(210 10% 8% / 0.14);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(\n    from hsl(var(--sidebar-primary)) h s\n      calc(l + var(--opaque-button-border-intensity)) / alpha\n  );\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(\n    from hsl(var(--sidebar-accent)) h s\n      calc(l + var(--opaque-button-border-intensity)) / alpha\n  );\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(\n    from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) /\n      alpha\n  );\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(\n    from hsl(var(--secondary)) h s\n      calc(l + var(--opaque-button-border-intensity)) / alpha\n  );\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(\n    from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) /\n      alpha\n  );\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(\n    from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) /\n      alpha\n  );\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(\n    from hsl(var(--destructive)) h s\n      calc(l + var(--opaque-button-border-intensity)) / alpha\n  );\n}\n\n.dark {\n  --button-outline: rgba(255, 255, 255, 0.1);\n  --badge-outline: rgba(255, 255, 255, 0.05);\n\n  --opaque-button-border-intensity: 9; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255, 255, 255, 0.04);\n  --elevate-2: rgba(255, 255, 255, 0.09);\n\n  --background: 0 0% 10%;\n  --foreground: 0 0% 95%;\n  --border: 0 0% 20%;\n  --card: 0 0% 12%;\n  --card-foreground: 0 0% 95%;\n  --card-border: 0 0% 18%;\n  --sidebar: 0 0% 14%;\n  --sidebar-foreground: 0 0% 95%;\n  --sidebar-border: 0 0% 18%;\n  --sidebar-primary: 217 91% 55%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 0 0% 20%;\n  --sidebar-accent-foreground: 0 0% 90%;\n  --sidebar-ring: 217 91% 55%;\n  --popover: 0 0% 15%;\n  --popover-foreground: 0 0% 95%;\n  --popover-border: 0 0% 22%;\n  --primary: 137 53% 43%;\n  --primary-foreground: 0 0% 100%;\n  --secondary: 0 0% 18%;\n  --secondary-foreground: 0 0% 90%;\n  --muted: 0 0% 16%;\n  --muted-foreground: 0 0% 65%;\n  --accent: 137 53% 43%;\n  --accent-foreground: 0 0% 100%;\n  --destructive: 4 90% 58%;\n  --destructive-foreground: 0 0% 100%;\n  --input: 0 0% 28%;\n  --ring: 217 91% 55%;\n  --chart-1: 217 91% 60%;\n  --chart-2: 45 100% 60%;\n  --chart-3: 142 76% 50%;\n  --chart-4: 0 84% 65%;\n  --chart-5: 280 65% 65%;\n\n  --shadow-2xs: 0px 1px 2px 0px hsl(0 0% 0% / 0.2);\n  --shadow-xs: 0px 1px 3px 0px hsl(0 0% 0% / 0.25);\n  --shadow-sm: 0px 2px 4px 0px hsl(0 0% 0% / 0.22),\n    0px 1px 2px -1px hsl(0 0% 0% / 0.18);\n  --shadow: 0px 4px 6px 0px hsl(0 0% 0% / 0.24),\n    0px 2px 4px -1px hsl(0 0% 0% / 0.2);\n  --shadow-md: 0px 6px 12px 0px hsl(0 0% 0% / 0.28),\n    0px 2px 4px -1px hsl(0 0% 0% / 0.24);\n  --shadow-lg: 0px 10px 20px 0px hsl(0 0% 0% / 0.32),\n    0px 4px 6px -1px hsl(0 0% 0% / 0.28);\n  --shadow-xl: 0px 16px 32px 0px hsl(0 0% 0% / 0.36),\n    0px 8px 10px -1px hsl(0 0% 0% / 0.32);\n  --shadow-2xl: 0px 24px 48px 0px hsl(0 0% 0% / 0.4);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background;\n  }\n}\n\n\n.ready-badge {\n  color: #fff;\n}\n\ndiv,\nlabel {\n  line-height: 1.7 !important;\n}\n\n.neg-mar {\n  margin-top: -2px !important;\n}\n\n.tool-tip-info {\n  line-height: 25px !important;\n}\n\ninput:focus,\ntextarea:focus,\nselect:focus,\nbutton:focus {\n  outline: none !important;\n  box-shadow: none !important;\n  ring: 0 !important;\n}\n\nh2,\nh3,\nh4,\nh5,\nh6 {\n  line-height: 40px !important;\n}\n\np,\nspan,\nli {\n  line-height: 32px !important;\n}\n\n.line-height-less, .line-height-less span {\n  line-height: 27px !important;\n}\n\n\nli strong {\n  margin-bottom: 15px;\n}\n\nul li {\n  margin-bottom: 10px !important;\n  margin-top: 10px !important;\n  list-style-type: none !important;\n}\n\n.results-div-main {\n  margin: 0;\n}\n\nlabel {\n  margin-bottom: 15px;\n}\n\n.mt-15 {\n  margin-top: 15px !important;\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {\n  }\n\n  .no-default-active-elevate {\n  }\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n\n  /* Slower, gentler pulse animation for progress steps */\n  @keyframes gentle-pulse {\n    0%,\n    100% {\n      opacity: 1;\n      transform: scale(1);\n    }\n    50% {\n      opacity: 0.85;\n      transform: scale(1.02);\n    }\n  }\n\n  .animate-gentle-pulse {\n    animation: gentle-pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n  }\n}\n\n@media screen and (max-width: 767px) {\n.big-width {\n  width: 30px;\n}\n.neg-mar {\n  margin-top: 4px !important;\n}\nspan {\n  line-height: 30px !important;\n}\ndiv {\n  line-height: 28px !important;\n}\nh4, h3 {\n  line-height: 28px !important;\n}\nh2 {\n  line-height: 32px !important;\n}\np, span, li {\n  line-height: 26px !important;\n}\n\n.less-line-height {\n  line-height: 23px !important;\n}\n\n}\n\n","size_bytes":12154},"src/components/examples/ProgressSteps.tsx":{"content":"import ProgressSteps from '../ProgressSteps';\n\nexport default function ProgressStepsExample() {\n  return (\n    <ProgressSteps \n      currentStep={2} \n      steps={['Consent Form', 'Upload Images', 'Analysis', 'Results']} \n    />\n  );\n}\n","size_bytes":236},"src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-3 pl-8 pr-2 text-base md:text-sm min-h-11 outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5761},"src/types/schema.ts":{"content":"import { z } from \"zod\";\n\nexport const consentFormSchema = z.object({\n  fullName: z.string().min(2, \"Full name must be at least 2 characters\"),\n  age: z.coerce.number().min(1, \"Age is required\").max(120, \"Please enter a valid age\"),\n  gender: z.enum([\"male\", \"female\", \"non-binary\", \"prefer-not-to-say\"], {\n    required_error: \"Please select your gender\",\n  }),\n  skinType: z.enum([\"oily\", \"dry\", \"combination\", \"sensitive\", \"normal\"]).optional(),\n  topConcern: z.array(z.enum([\"acne\", \"fine-lines\", \"dullness\", \"redness\", \"other\"]))\n    .max(2, \"Please select at most 2 concerns\")\n    .optional(),\n  cityName: z.string().min(2, \"Please select a city\"),\n  city: z.string().min(2, \"City is required\"),\n  state: z.string().min(2, \"State is required\"),\n  country: z.string().min(2, \"Country is required\"),\n});\n\nexport type ConsentFormData = z.infer<typeof consentFormSchema>;\n\nexport const feedbackFormSchema = z.object({\n  suggestion: z.string().min(10, \"Please provide at least 10 characters of feedback\"),\n  email: z.string().email(\"Please enter a valid email address\"),\n});\n\nexport type FeedbackFormData = z.infer<typeof feedbackFormSchema>;\n\nexport interface AnalysisRequest {\n  consentData: ConsentFormData;\n  images: string[];\n}\n\nexport interface AnalysisResponse {\n  analysis: string;\n  recommendations: string[];\n  severity: \"mild\" | \"moderate\" | \"severe\";\n}\n","size_bytes":1365},"src/components/examples/Header.tsx":{"content":"import Header from '../Header';\n\nexport default function HeaderExample() {\n  return <Header />;\n}\n","size_bytes":98},"src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"src/types/google-maps.d.ts":{"content":"declare namespace google {\n  namespace maps {\n    namespace places {\n      class Autocomplete {\n        constructor(\n          input: HTMLInputElement,\n          opts?: AutocompleteOptions\n        );\n        addListener(eventName: string, handler: () => void): void;\n        getPlace(): PlaceResult;\n      }\n\n      interface AutocompleteOptions {\n        types?: string[];\n      }\n\n      interface PlaceResult {\n        formatted_address?: string;\n        address_components?: AddressComponent[];\n      }\n\n      interface AddressComponent {\n        long_name: string;\n        short_name: string;\n        types: string[];\n      }\n    }\n  }\n}\n\ninterface Window {\n  google?: typeof google;\n}\n","size_bytes":689},"api/adminRoute.php":{"content":"<?php require_once('classes/admin.php'); \n\n$type = base64_decode($_GET['type']);\n\nif($type == 'login'){\t\t\n\t$call = ADMIN::login($_POST);\n\tif($call['status'] == 'error') {\n\t\tFD_add_notices('Please check Username or Password', 'error');\n\t\theader(\"location:\".ADMIN_URL.\"login\");\n\t\texit;\n\t}else if($call['status'] == 'success'){\t\t\n\t\t$_SESSION['admin'] = $call;\n\t\theader(\"location:\".ADMIN_URL);\t\t\n\t\texit;\n\t}\n}\n\nelse if($type == 'logout'){\t\n\tunset($_SESSION[\"admin\"]);\t\t\n\theader(\"location:\".ADMIN_URL.\"login\");\n}\n\nelse if($type == \"vision-prompt\"){\t\n\t$call = ADMIN::addPrompt($_POST, 'vision');\t\n\tif($call['status'] == 'error'){\n\t\t$show = array(\"msg\" => 'error', 'notice'=>$call['msg']);  \t\n\t}else{\n\t\t$show = array(\"msg\" => 'success', 'notice'=>$call['msg'], 'result'=>$call['result']);\n\t}\n\techo json_encode($show); \n}\n\nelse if($type == \"search-prompt\"){\t\n\t$call = ADMIN::addPrompt($_POST, 'search');\t\n\tif($call['status'] == 'error'){\n\t\t$show = array(\"msg\" => 'error', 'notice'=>$call['msg']);  \t\n\t}else{\n\t\t$show = array(\"msg\" => 'success', 'notice'=>$call['msg'], 'result'=>$call['result']);\n\t}\n\techo json_encode($show); \n}\n\nelse if($type == \"edit_profile\"){\n\t$call = ADMIN::editProfile($_POST, $_SESSION['admin']['result']['id']);\n\tif($call['status'] == 'error'){\n\t\tFD_add_notices($call['msg'], 'error');\n\t}else{\n\t\tFD_add_notices($call['msg'], 'success');\n\t} \n\theader(\"location:\".ADMIN_URL.'account-setting');\n}\n\nelse if($type == \"change_password\"){\n\t$call = ADMIN::changePassword($_POST, $_SESSION['admin']['result']['id']);\t\n\tif($call['status'] == 'error'){\n\t\tFD_add_notices($call['msg'], 'error');\t\n\t}else{\n\t\tFD_add_notices($call['msg'], 'success');\n\t} \n\theader(\"location:\".ADMIN_URL.'account-setting');\n} \n\n?>","size_bytes":1709},"src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-customText\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-customText/50 opacity-0 transition-opacity hover:text-customText focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"src/components/examples/CameraCapture.tsx":{"content":"import CameraCapture from '../CameraCapture';\n\nexport default function CameraCaptureExample() {\n  const handleCapture = (imageSrc: string) => {\n    console.log('Image captured:', imageSrc.substring(0, 50) + '...');\n  };\n\n  const handleClose = () => {\n    console.log('Camera closed');\n  };\n\n  return <CameraCapture onCapture={handleCapture} onClose={handleClose} />;\n}\n","size_bytes":369},"src/components/examples/ImageUpload.tsx":{"content":"import ImageUpload from '../ImageUpload';\n\nexport default function ImageUploadExample() {\n  const handleImagesChange = (images: string[]) => {\n    console.log('Images updated:', images.length);\n  };\n\n  return <ImageUpload onImagesChange={handleImagesChange} />;\n}\n","size_bytes":264},"src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-customText placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"src/lib/api.ts":{"content":"import { sessionStorage, PatientSessionData, AirQualityData, WeatherData } from './sessionStorage';\n\nexport const API_BASE_URL = import.meta.env.VITE_BACKEND_BASE_URL;\n\nexport const API_ENDPOINTS = {\n  analyze: `${API_BASE_URL}/route.php?type=${btoa('analysis')}`,\n  feedback: `${API_BASE_URL}/route.php?type=${btoa('feedback')}`,\n  personalizeMagic: `${API_BASE_URL}/route.php?type=${btoa('personalize-magic')}`,\n};\n\nexport interface AnalysisRequestData {\n  patientData: PatientSessionData;\n  airQuality?: AirQualityData | null;\n  image: string;\n}\n\nexport async function analyzeImages(images: string[]) {\n  const patientData = sessionStorage.getPatientData();\n  const airQuality = sessionStorage.getAirQuality();\n  const weather = sessionStorage.getWeather();\n\n  if (!patientData) {\n    throw new Error('Patient data not found in session. Please start from the beginning.');\n  }\n\n  if (images.length === 0) {\n    throw new Error('No images provided');\n  }\n\n  const image = images[0];\n\n  // Extract minimal air quality data\n  let airQualitySummary: AirQualitySummary | null = null;\n  if (airQuality && airQuality.aqi && airQuality.category) {\n    let pm2_5: number | null = null;\n    let pm10: number | null = null;\n    \n    if (airQuality.pollutants && Array.isArray(airQuality.pollutants)) {\n      const pm25Pollutant = airQuality.pollutants.find((p: any) => p.code === 'pm2.5' || p.code === 'pm25');\n      const pm10Pollutant = airQuality.pollutants.find((p: any) => p.code === 'pm10');\n      \n      pm2_5 = pm25Pollutant?.concentration?.value ?? null;\n      pm10 = pm10Pollutant?.concentration?.value ?? null;\n    }\n    \n    airQualitySummary = {\n      aqi: airQuality.aqi,\n      category: airQuality.category,\n      pm2_5,\n      pm10,\n    };\n  }\n  \n  // Extract minimal weather data\n  let weatherSummary: WeatherSummary | null = null;\n  if (weather && weather.temperature) {\n    weatherSummary = {\n      temperatureValue: weather.temperature.value,\n      temperatureUnit: weather.temperature.unit,\n      humidity: weather.humidity ?? null,\n      uvIndex: weather.uvIndex ?? null,\n    };\n  }\n\n  const formData = new FormData();\n  formData.append('image', image);\n  formData.append('user_detail', JSON.stringify(patientData));\n  formData.append('air_quality', JSON.stringify(airQualitySummary));\n  formData.append('weather', JSON.stringify(weatherSummary));\n\n  const response = await fetch(API_ENDPOINTS.analyze, {\n    method: 'POST',\n    body: formData,\n  });\n\n  if (!response.ok) {\n    const errorText = await response.text();\n    throw new Error(`Analysis failed: ${errorText}`);\n  }\n\n  return response.json();\n}\n\nexport async function submitFeedback(suggestion: string, email: string) {\n  const response = await fetch(API_ENDPOINTS.feedback, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ suggestion, email }),\n  });\n\n  if (!response.ok) {\n    throw new Error('Feedback submission failed');\n  }\n\n  return response.json();\n}\n\nexport interface AirQualitySummary {\n  aqi: number;\n  category: string;\n  pm2_5: number | null;\n  pm10: number | null;\n}\n\nexport interface WeatherSummary {\n  temperatureValue: number;\n  temperatureUnit: string;\n  humidity: number | null;\n  uvIndex: number | null;\n}\n\nexport interface EnvironmentData {\n  city: string;\n  aqi: number;\n  aqiCategory: string;\n  dominantPollutant: string;\n  temperature: number;\n  feelsLike: number;\n  humidity: number;\n  humidityCategory: string;\n  uvIndex: number;\n  windSpeed: number;\n  weatherDesc: string;\n  waterHardness: string;\n  pm25: number;\n  pm10: number;\n  co: number;\n  no2: number;\n  so2: number;\n  o3: number;\n}\n\nexport interface PersonalizeMagicRequest {\n  userData: {\n    age?: number;\n    gender?: string;\n    skinType?: string;\n    topConcern?: string[];\n  };\n  environmentData: Partial<EnvironmentData>;\n}\n\nexport interface PersonalizeMagicResponse {\n  personalizedText?: string;\n  error?: string;\n}\n\nexport async function getPersonalizedMagicText(data: PersonalizeMagicRequest): Promise<PersonalizeMagicResponse> {\n  try {\n    const response = await fetch(API_ENDPOINTS.personalizeMagic, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));\n      throw new Error(errorData.error || `API request failed with status ${response.status}`);\n    }\n\n    return await response.json();\n  } catch (error) {\n    console.error('Personalize magic API error:', error);\n    return {\n      error: error instanceof Error ? error.message : 'Failed to generate personalized text',\n    };\n  }\n}\n","size_bytes":4721},"src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\n// Global state to track which tooltip is currently open\nlet currentOpenTooltipId: string | null = null;\nconst tooltipStateListeners = new Set<(id: string | null) => void>();\n\nconst notifyTooltipStateChange = (id: string | null) => {\n  currentOpenTooltipId = id;\n  tooltipStateListeners.forEach(listener => listener(id));\n};\n\n// Context for managing tooltip open state\ninterface TooltipContextValue {\n  open: boolean;\n  toggle: () => void;\n}\n\nconst TooltipContext = React.createContext<TooltipContextValue | null>(null);\n\nconst useTooltipContext = () => {\n  const context = React.useContext(TooltipContext);\n  if (!context) {\n    throw new Error('Tooltip components must be used within a Tooltip');\n  }\n  return context;\n};\n\n// Tooltip wrapper that provides controlled state and only honors close events from Radix\nconst Tooltip = ({ children, ...props }: React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Root>) => {\n  const tooltipId = React.useId();\n  const [open, setOpen] = React.useState(false);\n  \n  // Listen to global tooltip state changes\n  React.useEffect(() => {\n    const listener = (openId: string | null) => {\n      if (openId !== tooltipId && open) {\n        setOpen(false);\n      }\n    };\n    \n    tooltipStateListeners.add(listener);\n    return () => {\n      tooltipStateListeners.delete(listener);\n    };\n  }, [tooltipId, open]);\n  \n  const toggle = React.useCallback(() => {\n    setOpen(prev => {\n      const newState = !prev;\n      if (newState) {\n        // Close any other open tooltips\n        notifyTooltipStateChange(tooltipId);\n      } else {\n        notifyTooltipStateChange(null);\n      }\n      return newState;\n    });\n  }, [tooltipId]);\n\n  const handleOpenChange = React.useCallback((newOpen: boolean) => {\n    // Only honor close events (Escape, blur, outside click)\n    // Ignore hover/focus open events - we control those via click\n    if (!newOpen) {\n      setOpen(false);\n      if (currentOpenTooltipId === tooltipId) {\n        notifyTooltipStateChange(null);\n      }\n    }\n  }, [tooltipId]);\n\n  return (\n    <TooltipContext.Provider value={{ open, toggle }}>\n      <TooltipPrimitive.Root \n        open={open} \n        onOpenChange={handleOpenChange}\n        disableHoverableContent={true}\n        {...props}\n      >\n        {children}\n      </TooltipPrimitive.Root>\n    </TooltipContext.Provider>\n  );\n};\n\n// Custom TooltipTrigger that only responds to clicks and keyboard (Enter/Space)\nconst TooltipTrigger = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Trigger>\n>(({ onClick, onPointerEnter, onPointerLeave, onFocus, onKeyDown, ...props }, ref) => {\n  const { toggle, open } = useTooltipContext();\n  const triggerRef = React.useRef<HTMLButtonElement>(null);\n\n  React.useImperativeHandle(ref, () => triggerRef.current!);\n\n  const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    // Small delay to ensure Radix's state is settled\n    setTimeout(() => {\n      toggle();\n    }, 10);\n    \n    onClick?.(e);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLButtonElement>) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n      toggle();\n    }\n    onKeyDown?.(e);\n  };\n\n  // Suppress hover/focus events that would trigger Radix's default opening\n  const handlePointerEnter = (e: React.PointerEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    onPointerEnter?.(e);\n  };\n\n  const handlePointerLeave = (e: React.PointerEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    onPointerLeave?.(e);\n  };\n\n  const handleFocus = (e: React.FocusEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    onFocus?.(e);\n  };\n\n  return (\n    <TooltipPrimitive.Trigger\n      ref={triggerRef}\n      onClick={handleClick}\n      onKeyDown={handleKeyDown}\n      onPointerEnter={handlePointerEnter}\n      onPointerLeave={handlePointerLeave}\n      onFocus={handleFocus}\n      {...props}\n    />\n  );\n});\nTooltipTrigger.displayName = \"TooltipTrigger\";\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-5 py-4 text-base md:text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":5205},"src/components/Header.tsx":{"content":"import { useState } from 'react';\nimport logoImage from '@assets/logo.png';\n\nexport default function Header() {\n  const [imageLoaded, setImageLoaded] = useState(false);\n\n  return (\n    <header className=\"border-b bg-card/50 backdrop-blur-sm sticky top-0 z-40\">\n      <div className=\"container mx-auto px-4 py-4 md:py-5\">\n        <div className=\"flex items-center justify-center\">\n          <div className=\"relative h-10 md:h-12\">\n            {!imageLoaded && (\n              <div className=\"h-10 md:h-12 w-32 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 dark:from-gray-700 dark:via-gray-600 dark:to-gray-700 animate-pulse rounded\" />\n            )}\n            <img\n              src={logoImage}\n              alt=\"Raupyam\"\n              className={`h-10 md:h-12 w-auto transition-opacity duration-500 ${imageLoaded ? 'opacity-100' : 'opacity-0 absolute inset-0'}`}\n              data-testid=\"img-logo\"\n              onLoad={() => setImageLoaded(true)}\n              loading=\"lazy\"\n            />\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n}\n","size_bytes":1074},"src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"src/components/examples/FeedbackForm.tsx":{"content":"import FeedbackForm from '../FeedbackForm';\n\nexport default function FeedbackFormExample() {\n  return <FeedbackForm />;\n}\n","size_bytes":122},"api/classes/open-ai.php":{"content":"<?php \nrequire_once(\"config.php\");\n\nclass OPENAITOOL {\n    public static $data;\n    \n    // Optimize: Cache prompts to avoid DB queries on every request\n    private static $promptCache = null;\n    private static $promptCacheTime = 0;\n    private static $promptCacheTTL = 1; // 1 hour cache\n    \n    public static function visionGpt($image, $prompt, $accessToken, $airQuality, $userData) {\n        try {\n            if (!isset($prompt['result']['vision'])) {\n                throw new \\Exception('Vision prompt not found');\n            }\n            \n            $instruction = $prompt['result']['vision'];\n            \n            // Optimize: Build user text more efficiently\n            $userTextParts = [$airQuality];\n            \n            $userFields = [\n                'fullName' => 'Name',\n                'age' => 'Age',\n                'gender' => 'Gender',\n                'skinType' => 'Skin Type'\n            ];\n            \n            foreach ($userFields as $key => $label) {\n                if (!empty($userData[$key])) {\n                    $userTextParts[] = \"$label: {$userData[$key]}\";\n                }\n            }\n            \n            $text = implode(\"\\n\", $userTextParts);\n            \n            // Optimize: Only log if logging is enabled (check first to avoid I/O)\n            if (defined('ENABLE_LOGGING') && ENABLE_LOGGING) {\n                $logFile = 'logs/vision_gpt_' . date('Y-m-d') . '.log';\n                file_put_contents(\n                    $logFile, \n                    \"User Text Data:\\n\" . $text . \"\\n\\n\", \n                    FILE_APPEND | LOCK_EX\n                );\n            }\n            \n            // Optimize: Build request payload efficiently\n            $payload = [\n                \"model\" => \"gpt-5-mini\",\n                \"input\" => [\n                    ['role' => 'developer', 'content' => $instruction],\n                    ['role' => 'user',\n                        'content' => [\n                            ['type' => 'input_text', 'text' => $text],\n                            ['type' => 'input_image', 'image_url' => $image],\n                            ['type' => 'input_text',  'text'=>  \"IMPORTANT: Format your response using HTML tags for proper structure:\n                                    - Use <h2> for main section headings\n                                    - Use <h3> for sub-section headings\n                                    - Use <p class=\\\"final-result-para\\\"> for paragraphs\n                                    - Use <ul> and <li> for lists\n                                    - Use <strong> for emphasis  \n                                    Structure your response with clear HTML formatting to make it easy to read and understand.\n\n                                    Note: Avoid too much margin bottom between <p> tags.\"\n                            ],\n                        ]\n                    ]\n                ],\n                \"max_output_tokens\" => 5000\n            ];\n            \n            // Optimize: Use more efficient curl options\n            $ch = curl_init(\"https://api.openai.com/v1/responses\");\n            curl_setopt_array($ch, [\n                CURLOPT_RETURNTRANSFER => true,\n                CURLOPT_POST => true,\n                CURLOPT_POSTFIELDS => json_encode($payload),\n                CURLOPT_HTTPHEADER => [\n                    \"Content-Type: application/json\",\n                    \"Authorization: Bearer \" . $accessToken\n                ],\n                CURLOPT_TIMEOUT => 60,\n                CURLOPT_CONNECTTIMEOUT => 10,\n                CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_2_0,\n                CURLOPT_ENCODING => '',\n            ]);\n            \n            $response = curl_exec($ch);           \n            $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);\n            \n            if (curl_errno($ch)) {\n                $error = curl_error($ch);\n                curl_close($ch);\n                throw new Exception('cURL Error: ' . $error);\n            }\n            \n            curl_close($ch);\n            \n            if ($httpCode !== 200) {\n                throw new Exception('API returned HTTP ' . $httpCode);\n            }\n            \n            $jsonData = json_decode($response, true);\n            if (json_last_error() !== JSON_ERROR_NONE) {\n                throw new Exception('JSON Decode Error: ' . json_last_error_msg());\n            }\n            \n            if (isset($jsonData['error'])) {\n                throw new Exception('API Error: ' . ($jsonData['error']['message'] ?? 'Unknown error'));\n            }\n            \n            // Optimize: Extract text content more efficiently\n            $resultSet = self::extractTextFromResponse($jsonData);\n            \n            if (empty($resultSet)) {\n                throw new Exception('No text content found in API response');\n            }\n            \n            return [\n                'status' => 'success',\n                'msg' => \"Analysis executed successfully\",\n                'result' => $resultSet\n            ];\n            \n        } catch (Exception $e) {\n            return ['status' => 'error', 'msg' => $e->getMessage()];\n        }\n    }\n    \n    /**\n     * Personalize Magic Section\n     * Generates personalized skincare text based on user profile and environmental data\n     */\n    public static function personalizeMagic($userData, $environmentData, $accessToken) {\n        try {\n            // Template text\n            $templateText = \"Your World's Whisper to Your Skin: How We Craft Smarter\nWe don't guesswe *get* your backdrop. Pulling live deets like:\n- **Air Quality (AQI/PM2.5)**: Smog in **[CITY]**? Antioxidant armor (think liposome vitamin Csips in protection without the weight).\n- **Water Quality**: Mineral-heavy taps? Soothing hyaluronics to melt away that parched pull.\n- **UV & Humidity**: Fierce rays or sticky air? Tailored shieldsmatte in the tropics, rich in the chill.\nBlend with your age/gender/skin intel = your no-BS recipe. (E.g., 28yo oily type in sunny Sydney? Niacinamide gel with UV-synced mattifiersclearer, bouncier by week 3.)\";\n            \n            // System prompt for personalization\n            $instruction = \"You are a Dynamic Text Personalizer for a skincare app. Your job: Take a static text template and user/env data, then rewrite it to feel hyper-personallike a custom note from a skincare coach.\n\nRules:\n- Inject data naturally: Swap placeholders (e.g., [CITY]) with exact values; adapt examples to match user profile (e.g., if age=42, skin=oily, high UVsuggest \\\"niacinamide mist for oil-taming glow\\\").\n- Keep tone warm, witty, global: Empathetic, fun, empowering (e.g., \\\"Your city's haze? We've got shields!\\\").\n- Brevity: Output exactly matches the template structure/lengthtrim fluff, no additions.\n- Personalization Logic:\n  - Env: Tie to skincare (e.g., high AQI  \\\"antioxidant boost\\\"; high humidity  \\\"matte textures\\\").\n  - User: Blend age/gender/skin (e.g., \\\"For your 30s oily vibe...\\\").\n  - Examples: Always 1 tailored \\\"E.g.\\\" sentence; quantify wins (e.g., \\\"smoother by week 2\\\").\n- Output ONLY the modified textno intros, explanations, or code. Use markdown for lists/bolds.\n- If data missing, use neutrals (e.g., \\\"your city\\\" for [CITY]).\n\n\nModify the template by injecting the data. Make the \\\"E.g.\\\" example user-specific (e.g., tie skin/env to a rec like \\\"ceramide lock for rainy days\\\"). Keep structure identical.\";\n            \n// Build user context with JSON data\n$userContext = \"Template Text to Modify:\n$templateText\n\nRaw Data (JSONuse only this for personalization):\n{\n    user:\". json_encode($userData, JSON_PRETTY_PRINT) . \"\n    env:\". json_encode($environmentData, JSON_PRETTY_PRINT) . \"\n}\n\nInstructions: Modify the template by injecting the data. Make the \\\"E.g.\\\" example user-specific (e.g., tie skin/env to a rec like \\\"ceramide lock for rainy days\\\"). Keep structure identical.\";\n\n            \n            // Optimize: Only log if logging is enabled\n            //if (defined('ENABLE_LOGGING') && ENABLE_LOGGING) {\n                $logFile = 'logs/personalize_magic_' . date('Y-m-d') . '.log';\n                file_put_contents(\n                    $logFile, \n                    \"User Context:\\n\" . $userContext . \"\\n\\n\", \n                    FILE_APPEND | LOCK_EX\n                );\n           // }\n            \n            // Build request payload using Responses API format (like visionGpt)\n            $payload = [\n                \"model\" => \"gpt-4.1-mini\",\n                \"input\" => [\n                    ['role' => 'developer', 'content' => $instruction],\n                    ['role' => 'user', 'content' => [\n                        ['type' => 'input_text', 'text' => $userContext]\n                    ]]\n                ],         \n                \"max_output_tokens\" => 500,\n                \"temperature\"=> 0.3\n            ];\n            \n            // Make curl request to OpenAI Responses API\n            $ch = curl_init(\"https://api.openai.com/v1/responses\");\n            curl_setopt_array($ch, [\n                CURLOPT_RETURNTRANSFER => true,\n                CURLOPT_POST => true,\n                CURLOPT_POSTFIELDS => json_encode($payload),\n                CURLOPT_HTTPHEADER => [\n                    \"Content-Type: application/json\",\n                    \"Authorization: Bearer \" . $accessToken\n                ],\n                CURLOPT_TIMEOUT => 60,\n                CURLOPT_CONNECTTIMEOUT => 10,\n                CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_2_0,\n                CURLOPT_ENCODING => '',\n            ]);\n            \n            $response = curl_exec($ch);\n\n            //echo\"<pre>\";print_r($response);\n            $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);\n            \n            if (curl_errno($ch)) {\n                $error = curl_error($ch);\n                curl_close($ch);\n                throw new Exception('cURL Error: ' . $error);\n            }\n            \n            curl_close($ch);\n            \n            if ($httpCode !== 200) {\n                throw new Exception('API returned HTTP ' . $httpCode);\n            }\n            \n            $jsonData = json_decode($response, true);\n            if (json_last_error() !== JSON_ERROR_NONE) {\n                throw new Exception('JSON Decode Error: ' . json_last_error_msg());\n            }\n            \n            if (isset($jsonData['error'])) {\n                throw new Exception('API Error: ' . ($jsonData['error']['message'] ?? 'Unknown error'));\n            }\n            \n            // Extract text content using the same method as visionGpt\n            $personalizedText = self::extractTextFromResponse($jsonData);\n            \n            if (empty($personalizedText)) {\n                throw new Exception('No text content found in API response');\n            }\n            \n            return [\n                'status' => 'success',\n                'msg' => 'Text personalized successfully',\n                'result' => $personalizedText\n            ];\n            \n        } catch (Exception $e) {\n            return ['status' => 'error', 'msg' => $e->getMessage()];\n        }\n    }\n    \n    /**\n     * Optimize: Separate method for extracting text from response\n     */\n    private static function extractTextFromResponse($jsonData) {\n        $resultSet = '';\n        \n        if (!isset($jsonData['output']) || !is_array($jsonData['output'])) {\n            return $resultSet;\n        }\n        \n        foreach ($jsonData['output'] as $block) {\n            if (!isset($block['type']) || $block['type'] !== 'message') {\n                continue;\n            }\n            \n            if (!isset($block['content']) || !is_array($block['content'])) {\n                continue;\n            }\n            \n            foreach ($block['content'] as $contentItem) {\n                if (\n                    isset($contentItem['type']) &&\n                    $contentItem['type'] === 'output_text' &&\n                    isset($contentItem['text'])\n                ) {\n                    $resultSet .= $contentItem['text'];\n                }\n            }\n        }\n        \n        // Fallback\n        if (empty($resultSet) && isset($jsonData['output'][0]['content'][0]['text'])) {\n            $resultSet = $jsonData['output'][0]['content'][0]['text'];\n        }\n        \n        return $resultSet;\n    }\n    \n    /**\n     * Optimize: Cache prompts with TTL\n     */\n    public static function getPrompt() {\n        try {\n            // Check cache\n            $currentTime = time();\n            if (\n                self::$promptCache !== null && \n                ($currentTime - self::$promptCacheTime) < self::$promptCacheTTL\n            ) {\n                return [\n                    'status' => 'success',\n                    'msg' => \"Prompt fetched from cache\",\n                    'result' => self::$promptCache\n                ];\n            }\n            \n            // Fetch from database\n            $resultSet = [];\n            $query = \"SELECT `model`, `prompt` FROM `prompts`\";\n            $result = dbconfig::run($query);\n            \n            if (!$result) {\n                throw new Exception(\"Database query failed\");\n            }\n            \n            if (mysqli_num_rows($result) > 0) {\n                while ($row = mysqli_fetch_assoc($result)) {\n                    $resultSet[$row['model']] = $row['prompt'];\n                }\n            }\n            \n            // Update cache\n            self::$promptCache = $resultSet;\n            self::$promptCacheTime = $currentTime;\n            \n            return [\n                'status' => 'success',\n                'msg' => \"Prompt fetched successfully\",\n                'result' => $resultSet\n            ];\n            \n        } catch (Exception $e) {\n            return ['status' => 'error', 'msg' => $e->getMessage()];\n        }\n    }\n    \n    /**\n     * Optional: Method to clear prompt cache if needed\n     */\n    public static function clearPromptCache() {\n        self::$promptCache = null;\n        self::$promptCacheTime = 0;\n    }\n}","size_bytes":14115},"src/components/examples/AnalysisResults.tsx":{"content":"import AnalysisResults from '../AnalysisResults';\n\nexport default function AnalysisResultsExample() {\n  const mockResults = {\n    severity: \"moderate\" as const,\n    analysis: \"Based on the images provided, the skin appears to show signs of acne vulgaris with moderate inflammatory lesions. The affected areas show a combination of comedones (blackheads and whiteheads) and papules, primarily concentrated in the T-zone area.\\n\\nThe skin also exhibits some signs of post-inflammatory hyperpigmentation, which is common with acne. The overall skin texture appears to be combination type with some areas showing increased sebum production.\",\n    recommendations: [\n      \"Use a gentle, non-comedogenic cleanser twice daily to maintain skin hygiene without stripping natural oils\",\n      \"Apply a topical treatment containing salicylic acid or benzoyl peroxide to affected areas\",\n      \"Consider incorporating a retinoid into your nighttime routine to help prevent clogged pores\",\n      \"Use a broad-spectrum SPF 30+ sunscreen daily to prevent further hyperpigmentation\",\n      \"Avoid picking or squeezing lesions to minimize scarring and inflammation\",\n      \"Consult with a dermatologist for personalized treatment options, which may include prescription medications\"\n    ]\n  };\n\n  return <AnalysisResults results={mockResults} />;\n}\n","size_bytes":1333},"src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"src/components/ProgressSteps.tsx":{"content":"import { Check } from \"lucide-react\";\n\ninterface ProgressStepsProps {\n  currentStep: number;\n  steps: string[];\n  onStepClick?: (stepNumber: number) => void;\n}\n\nexport default function ProgressSteps({ currentStep, steps, onStepClick }: ProgressStepsProps) {\n  return (\n    <div className=\"w-full flex justify-center mb-8 md:mb-12 px-4\">\n      <div className=\"w-full max-w-3xl\">\n        <div className=\"flex items-start justify-between\">\n          {steps.map((step, index) => {\n            const stepNumber = index + 1;\n            const isActive = currentStep === stepNumber;\n            const isCompleted = currentStep > stepNumber;\n            const isClickable = isCompleted && onStepClick;\n\n            return (\n              <div key={index} className=\"flex items-start\" style={{ flex: index < steps.length - 1 ? '1' : '0 0 auto' }}>\n                <div className=\"flex flex-col items-center\">\n                  <div\n                    className={`w-12 h-12 md:w-14 md:h-14 rounded-full flex items-center justify-center border-2 transition-all duration-300 ease-in-out z-10 bg-background ${\n                      isCompleted\n                        ? \"bg-primary border-primary text-primary-foreground shadow-md\"\n                        : isActive\n                        ? \"border-primary text-primary bg-primary/10 ring-2 ring-primary/20 ring-offset-2 animate-gentle-pulse shadow-lg\"\n                        : \"border-gray-300 dark:border-gray-600 text-muted-foreground\"\n                    }`}\n                    data-testid={`step-${stepNumber}`}\n                  >\n                    {isCompleted ? (\n                      <Check className=\"w-6 h-6 md:w-7 md:h-7 animate-in fade-in zoom-in duration-300\" />\n                    ) : (\n                      <span className=\"font-bold text-base md:text-lg\">{stepNumber}</span>\n                    )}\n                  </div>\n                  <span\n                    className={`text-sm md:text-base mt-3 text-center font-semibold transition-colors duration-200 whitespace-nowrap ${\n                      isActive || isCompleted ? \"text-customText\" : \"text-muted-foreground\"\n                    }`}\n                  >\n                    {step}\n                  </span>\n                </div>\n                {index < steps.length - 1 && (\n                  <div\n                    className={`flex-1 h-[2px] mt-5 md:mt-6 mx-2 md:mx-3 transition-all duration-500 ${\n                      isCompleted ? \"bg-primary\" : \"bg-gray-300 dark:bg-gray-600\"\n                    }`}\n                  />\n                )}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":2675},"src/App.tsx":{"content":"import { Switch, Route, Router } from \"wouter\";  \nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport SkinAnalysis from \"@/pages/skin-analysis\";\nimport NotFound from \"@/pages/not-found\";\n\nconst BASE_PATH = import.meta.env.PROD ? \"/skin-disease\" : \"\";\n\nfunction AppRouter() {\n  return (\n    <Router base={BASE_PATH}>\n      <Switch>\n        <Route path=\"/\" component={SkinAnalysis} />\n        <Route component={NotFound} />\n      </Switch>\n    </Router>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <AppRouter />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":856},"src/components/examples/AnalysisLoading.tsx":{"content":"import AnalysisLoading from '../AnalysisLoading';\n\nexport default function AnalysisLoadingExample() {\n  return <AnalysisLoading />;\n}\n","size_bytes":134},"src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"src/components/FeedbackForm.tsx":{"content":"import { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { feedbackFormSchema, type FeedbackFormData } from \"@/types/schema\";\nimport { submitFeedback } from \"@/lib/api\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { MessageSquare, Loader2 } from \"lucide-react\";\nimport { useState } from \"react\";\n\nexport default function FeedbackForm() {\n  const { toast } = useToast();\n  const [isPending, setIsPending] = useState(false);\n  const form = useForm<FeedbackFormData>({\n    resolver: zodResolver(feedbackFormSchema),\n    defaultValues: {\n      suggestion: \"\",\n      email: \"\",\n    },\n  });\n\n  const onSubmit = async (data: FeedbackFormData) => {\n    setIsPending(true);\n    try {\n      await submitFeedback(data.suggestion, data.email);\n      toast({\n        title: \"Feedback submitted\",\n        description: \"Thank you for your feedback. We'll get back to you soon.\",\n        duration: 5000,\n      });\n      form.reset();\n    } catch (error) {\n      toast({\n        title: \"Submission failed\",\n        description: \"There was an error submitting your feedback. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsPending(false);\n    }\n  };\n\n  return (\n    <Card data-testid=\"card-feedback-form\">\n      <CardHeader>\n        <CardTitle className=\"flex items-center gap-2\">\n          <MessageSquare className=\"w-5 h-5 text-primary\" />\n          Reply here for tweaks\n        </CardTitle>\n        <CardDescription className=\"less-line-height\">\n          Let us know if you'd like any adjustments to your analysis\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n            <FormField\n              control={form.control}\n              name=\"suggestion\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Your Suggestions *</FormLabel>\n                  <FormControl>\n                    <Textarea\n                      placeholder=\"Please share any questions or requests for clarification...\"\n                      className=\"min-h-32 resize-none\"\n                      data-testid=\"textarea-suggestion\"\n                      {...field}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"email\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Email Address *</FormLabel>\n                  <FormControl>\n                    <Input\n                      type=\"email\"\n                      placeholder=\"your.email@example.com\"\n                      data-testid=\"input-feedback-email\"\n                      {...field}\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n          </form>\n        </Form>\n      </CardContent>\n\n      {/* Submit button */}\n      <div className=\"flex justify-end px-6 pb-6\">\n        <Button\n          type=\"submit\"\n          onClick={form.handleSubmit(onSubmit)}\n          className=\"px-6 h-12 text-lg\"\n          data-testid=\"button-submit-feedback\"\n          disabled={isPending}\n        >\n          {isPending ? (\n            <>\n              <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n              Submitting...\n            </>\n          ) : (\n            \"Submit Feedback\"\n          )}\n        </Button>\n      </div>\n    </Card>\n  );\n}\n","size_bytes":4015},"src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"api/route.php":{"content":"<?php \n// ini_set('display_errors', 1);\n// ini_set('display_startup_errors', 1);\nini_set('log_errors', 1);\nini_set('error_log', __DIR__ . '/logs/php_errors.log');\nerror_reporting(E_ALL);\n\nrequire_once('classes/googleSheet.php');\nrequire_once('classes/mails.php');\nrequire_once('classes/open-ai.php');\n\n// Handle preflight request\nif ($_SERVER['REQUEST_METHOD'] === 'OPTIONS') {\n    header('Access-Control-Allow-Origin: *');\n    header('Access-Control-Allow-Methods: GET, POST');\n    header('Access-Control-Allow-Headers: Authorization, Content-Type');\n    header('Access-Control-Max-Age: 3600');    \n    http_response_code(200);\n    exit();\n}\n\n// Regular API processing\nheader(\"Access-Control-Allow-Origin: *\");\nheader(\"Access-Control-Allow-Methods: GET, POST, OPTIONS\");\nheader(\"Access-Control-Allow-Headers: Authorization, Content-Type\"); \nheader(\"Content-Type: application/json; charset=utf-8\");\n\n// Optimize: Avoid base64 decode on every request\n$type = isset($_GET['type']) ? base64_decode($_GET['type']) : '';\n\nif ($type == \"analysis\") {\n    // Validate inputs first (faster than processing)\n    if (!isset($_POST['image']) || !isset($_POST['user_detail'])) {\n        http_response_code(400);\n        echo json_encode([\"msg\" => 'error', 'notice' => 'Missing required fields: image and user_detail']);\n        exit;\n    }\n\n    // Optimize: Decode user_detail once\n    $user_detail = json_decode($_POST['user_detail'], true);\n    if (!$user_detail) {\n        http_response_code(400);\n        echo json_encode([\"msg\" => 'error', 'notice' => 'Invalid user detail format']);\n        exit;\n    }\n\n    // Optimize: Process image data efficiently\n    $imageData = $_POST['image'];\n    if (strpos($imageData, 'data:application/octet-stream;base64,') === 0) {\n        $imageData = str_replace('data:application/octet-stream;base64,', 'data:image/png;base64,', $imageData);\n    }\n\n    $air_quality = $_POST['air_quality'] ?? 'Air quality data not available';\n\n    // Optimize: Get prompt once (consider caching this in production)\n    $prompt = OPENAITOOL::getPrompt();\n    if ($prompt['status'] == 'error') {\n        http_response_code(500);\n        echo json_encode([\"msg\" => 'error', 'notice' => 'Failed to fetch prompt: ' . $prompt['msg']]);\n        exit;\n    }\n\n    // Execute OpenAI analysis\n    $call = OPENAITOOL::visionGpt($imageData, $prompt, OPEN_API_KEY, $air_quality, $user_detail);\n\n    if ($call['status'] == 'error') {\n        http_response_code(500);\n        echo json_encode([\"msg\" => 'error', 'notice' => $call['msg']]);\n        exit;\n    }\n\n    // Optimize: Extract mime type more efficiently\n    $mimeType = 'image/png'; // Default\n    if (preg_match('/data:([^;]+);/', $imageData, $matches)) {\n        $mimeType = $matches[1];\n    }\n    \n    $fileName = \"analysis_image_\" . time() . \".png\";\n\n    // CRITICAL OPTIMIZATION: Run upload and sheet append in parallel using async approach\n    // However, since PHP doesn't support true async natively, we'll optimize the sequence\n    \n    // Upload file to Drive\n    $upload = SHEET::uploadBase64FileToDrive(\n        $imageData, \n        $fileName, \n        $mimeType, \n        $call['result'], \n        $user_detail\n    );\n\n    // Prepare sheet data\n    $sheetData = [\n        $user_detail['fullName'] ?? '',\n        $user_detail['age'] ?? '',\n        $user_detail['gender'] ?? '',\n        $user_detail['address'] ?? '',\n        $user_detail['city'] ?? '',\n        $user_detail['state'] ?? '',\n        $user_detail['country'] ?? '',\n        $user_detail['skinType'] ?? '',\n        $fileName, \n        date('Y-m-d H:i:s'), \n        $upload['fileUrl'] ?? '',   \n        $call['result']\n    ];\n\n    // Append to sheet\n    $sheet = SHEET::appendSheet($sheetData);\n\n    // Return response immediately (don't wait for sheet if not critical)\n    echo json_encode([\n        \"msg\" => 'success', \n        'notice' => $call['msg'], \n        'result' => $call['result'],\n        'fileUrl' => $upload['fileUrl'] ?? null\n    ]);\n\n} else if ($type == 'personalize-magic' && $_SERVER['REQUEST_METHOD'] === 'POST') {\n    // Optimize: Read input once\n    $requestBody = file_get_contents('php://input');\n    $data = json_decode($requestBody, true);\n\n    if (!$data || !isset($data['userData']) || !isset($data['environmentData'])) {\n        http_response_code(400);\n        echo json_encode(['error' => 'Invalid request body']);\n        exit();\n    }\n\n    $userData = $data['userData'];\n    $envData = $data['environmentData'];\n\n    $call = OPENAITOOL::personalizeMagic($userData, $envData, OPEN_API_KEY);\n    \n    $statusCode = ($call[\"status\"] == \"error\") ? 500 : 200;\n    http_response_code($statusCode);\n    \n    echo json_encode([\n        \"msg\" => $call[\"status\"] == \"error\" ? 'error' : 'success', \n        'notice' => $call['msg'],\n        'personalizedText' => $call['result'] ?? ''\n    ]);\n\n} else if ($type == 'feedback' && $_SERVER['REQUEST_METHOD'] === 'POST') {\n    // Optimize: Read input once\n    $rawJson = file_get_contents('php://input');\n    $jsonData = json_decode($rawJson, true);\n\n    if (!$jsonData) {\n        http_response_code(400);\n        echo json_encode([\"msg\" => 'error', 'notice' => 'Invalid JSON data']);\n        exit;\n    }\n\n    $call = MAIL::sendEmail($jsonData, 'tweaks');\n    \n    $statusCode = ($call[\"status\"] == \"error\") ? 500 : 200;\n    http_response_code($statusCode);\n    \n    echo json_encode([\n        \"msg\" => $call[\"status\"] == \"error\" ? 'error' : 'success', \n        'notice' => $call['msg']\n    ]);\n\n} else {\n    http_response_code(404);\n    echo json_encode([\"msg\" => 'error', 'notice' => 'Invalid request type']);\n}\n?>","size_bytes":5611},"src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"src/components/AnalysisResults.tsx":{"content":"import {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  AlertCircle,\n  CheckCircle,\n  AlertTriangle,\n} from \"lucide-react\";\nimport type { AnalysisResponse } from \"@/types/schema\";\nimport DOMPurify from \"dompurify\";\nimport { useMemo } from \"react\";\n\ninterface AnalysisResultsProps {\n  results: AnalysisResponse;\n}\n\nexport default function AnalysisResults({ results }: AnalysisResultsProps) {\n  const sanitizedAnalysis = useMemo(() => {\n    // First sanitize the HTML\n    const sanitized = DOMPurify.sanitize(results.analysis, {\n      ALLOWED_TAGS: [\n        \"p\",\n        \"br\",\n        \"strong\",\n        \"em\",\n        \"u\",\n        \"h1\",\n        \"h2\",\n        \"h3\",\n        \"h4\",\n        \"h5\",\n        \"h6\",\n        \"ul\",\n        \"ol\",\n        \"li\",\n        \"small\",\n        \"span\",\n        \"div\",\n      ],\n      ALLOWED_ATTR: [\"class\"],\n      KEEP_CONTENT: true,\n      RETURN_TRUSTED_TYPE: false,\n    });\n\n    // Remove bullets by converting ul/ol lists to plain divs\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = sanitized;\n\n    // Convert all <li> elements to <p> elements\n    const listItems = tempDiv.querySelectorAll('li');\n    listItems.forEach(li => {\n      const p = document.createElement('p');\n      p.innerHTML = li.innerHTML;\n      p.className = li.className;\n      li.parentNode?.replaceChild(p, li);\n    });\n\n    // Remove <ul> and <ol> wrapper tags but keep their content\n    const lists = tempDiv.querySelectorAll('ul, ol');\n    lists.forEach(list => {\n      const parent = list.parentNode;\n      while (list.firstChild) {\n        parent?.insertBefore(list.firstChild, list);\n      }\n      parent?.removeChild(list);\n    });\n\n    return tempDiv.innerHTML;\n  }, [results.analysis]);\n  const severityConfig = {\n    mild: {\n      icon: CheckCircle,\n      color: \"text-green-600 dark:text-green-400\",\n      bgColor: \"bg-green-50 dark:bg-green-950/50\",\n      borderColor: \"border-green-200 dark:border-green-800\",\n      label: \"Mild Condition\",\n    },\n    moderate: {\n      icon: AlertTriangle,\n      color: \"text-yellow-600 dark:text-yellow-400\",\n      bgColor: \"bg-yellow-50 dark:bg-yellow-950/50\",\n      borderColor: \"border-yellow-200 dark:border-yellow-800\",\n      label: \"Moderate Condition\",\n    },\n    severe: {\n      icon: AlertCircle,\n      color: \"text-red-600 dark:text-red-400\",\n      bgColor: \"bg-red-50 dark:bg-red-950/50\",\n      borderColor: \"border-red-200 dark:border-red-800\",\n      label: \"Severe Condition\",\n    },\n  };\n\n  const config = severityConfig[results.severity];\n  const SeverityIcon = config.icon;\n\n  return (\n    <Card data-testid=\"card-analysis-results\">\n      <CardContent className=\"space-y-6 md:space-y-10\">\n        <div>\n          <div className=\"bg-muted/30 rounded-lg p-4 md:p-8\">\n            <div\n              className=\"text-customText leading-relaxed prose prose-base md:prose-lg max-w-none dark:prose-invert [&_p]:text-base [&_p]:md:text-lg [&_p]:leading-relaxed [&_p]:mb-5 [&_p]:text-left [&_h1]:text-2xl [&_h1]:md:text-3xl [&_h1]:font-bold [&_h1]:mb-4 [&_h1]:text-left [&_h2]:text-xl [&_h2]:md:text-2xl [&_h2]:font-bold [&_h2]:mb-4 [&_h2]:text-left [&_h3]:text-lg [&_h3]:md:text-xl [&_h3]:font-semibold [&_h3]:mb-3 [&_h3]:text-left [&_strong]:font-semibold [&_strong]:text-customText [&_span]:text-base [&_span]:md:text-lg [&_span]:leading-relaxed [&_small]:text-sm [&_small]:leading-relaxed [&_em]:text-base [&_em]:md:text-lg [&_u]:text-base [&_u]:md:text-lg [&_div]:text-base [&_div]:md:text-lg [&_div]:leading-relaxed [&_div]:text-left [&_ul]:list-none [&_ul]:pl-0 [&_ol]:list-none [&_ol]:pl-0 [&_li]:list-none [&_li]:pl-0 results-div-main\"\n              style={{ fontFamily: 'var(--font-body)' }}\n              data-testid=\"text-analysis\"\n              dangerouslySetInnerHTML={{ __html: sanitizedAnalysis }}\n            />\n          </div>\n        </div>\n\n        {results.recommendations.length > 0 && (\n          <div className=\"pt-2\">\n            <h3 className=\"text-2xl md:text-3xl font-bold mb-6 flex items-center gap-2\">\n              <div className=\"w-1 h-7 bg-primary rounded-full\" />\n              Recommendations\n            </h3>\n            <div className=\"space-y-5\">\n              {results.recommendations.map((recommendation, index) => (\n                <div\n                  key={index}\n                  className=\"flex items-start gap-3 md:gap-5 bg-card border rounded-lg p-4 md:p-7 hover-elevate\"\n                  data-testid={`recommendation-${index}`}\n                >\n                  <div className=\"w-10 h-10 md:w-11 md:h-11 rounded-full bg-primary text-primary-foreground flex items-center justify-center flex-shrink-0 font-bold text-lg md:text-xl\">\n                    {index + 1}\n                  </div>\n                  <p className=\"text-base md:text-lg leading-relaxed flex-1 pt-1\" style={{ fontFamily: 'var(--font-body)' }}>\n                    {recommendation}\n                  </p>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":5150},"src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"src/components/ImageUpload.tsx":{"content":"import { useState, useRef } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Upload, Camera, X, ImagePlus } from \"lucide-react\";\nimport { BulletIcon } from \"@/components/BulletIcon\";\nimport CameraCapture from \"./CameraCapture\";\n\ninterface ImageUploadProps {\n  onImagesChange: (images: string[]) => void;\n  onStartAnalysis?: () => void;\n}\n\nexport default function ImageUpload({ onImagesChange, onStartAnalysis }: ImageUploadProps) {\n  const [image, setImage] = useState<string | null>(null);\n  const [showCamera, setShowCamera] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (!files || files.length === 0) return;\n\n    const file = files[0];\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      const imageSrc = reader.result as string;\n      setImage(imageSrc);\n      onImagesChange([imageSrc]);\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const handleCameraCapture = (imageSrc: string) => {\n    setImage(imageSrc);\n    onImagesChange([imageSrc]);\n    setShowCamera(false);\n  };\n\n  const removeImage = () => {\n    setImage(null);\n    onImagesChange([]);\n  };\n\n  if (showCamera) {\n    return (\n      <CameraCapture\n        onCapture={handleCameraCapture}\n        onClose={() => setShowCamera(false)}\n      />\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <input\n        type=\"file\"\n        ref={fileInputRef}\n        onChange={handleFileUpload}\n        accept=\"image/*\"\n        className=\"hidden\"\n        data-testid=\"input-file-upload\"\n      />\n\n      {!image ? (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <Card\n            className=\"hover-elevate cursor-pointer border-2 border-dashed transition-colors hover:border-primary/50 shadow-md\"\n            onClick={() => fileInputRef.current?.click()}\n            data-testid=\"card-upload-file\"\n          >\n            <CardContent className=\"flex flex-col items-center justify-center min-h-56 p-8\">\n              <div className=\"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-4\">\n                <Upload className=\"w-8 h-8 text-primary\" />\n              </div>\n              <p className=\"font-semibold text-lg text-center mb-2\">Upload Image</p>\n              <p className=\"text-sm text-muted-foreground text-center\">\n                Click to browse or drag and drop\n              </p>\n              <p className=\"text-xs text-muted-foreground text-center mt-2\">\n                PNG, JPG or JPEG (one image only)\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card\n            className=\"hover-elevate cursor-pointer border-2 border-dashed transition-colors hover:border-primary/50 shadow-md\"\n            onClick={() => setShowCamera(true)}\n            data-testid=\"card-upload-camera\"\n          >\n            <CardContent className=\"flex flex-col items-center justify-center min-h-56 p-8\">\n              <div className=\"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-4\">\n                <Camera className=\"w-8 h-8 text-primary\" />\n              </div>\n              <p className=\"font-semibold text-lg text-center mb-2\">Take Photo</p>\n              <p className=\"text-sm text-muted-foreground text-center\">\n                Use your device camera\n              </p>\n              <p className=\"text-xs text-muted-foreground text-center mt-2\">\n                Front or back camera available\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n      ) : (\n        <div className=\"space-y-4\">\n          <Card className=\"relative overflow-hidden shadow-lg\">\n            <CardContent className=\"p-0\">\n              <div className=\"relative w-full\" style={{ height: 'calc(100vh - 400px)', minHeight: '500px', maxHeight: '800px' }}>\n                <img\n                  src={image}\n                  alt=\"Uploaded image\"\n                  className=\"w-full h-full object-cover rounded-md\"\n                  data-testid=\"image-preview\"\n                />\n                \n                <div className=\"absolute top-4 right-4 flex gap-2\">\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={() => fileInputRef.current?.click()}\n                    className=\"bg-black/60 hover:bg-black/80 text-white rounded-full backdrop-blur-sm\"\n                    data-testid=\"button-change-image\"\n                  >\n                    <Upload className=\"w-5 h-5\" />\n                  </Button>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={removeImage}\n                    className=\"bg-black/60 hover:bg-black/80 text-white rounded-full backdrop-blur-sm\"\n                    data-testid=\"button-remove-image\"\n                  >\n                    <X className=\"w-5 h-5\" />\n                  </Button>\n                </div>\n\n                {onStartAnalysis && (\n                  <div className=\"absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/60 to-transparent\">\n                    <Button\n                      size=\"lg\"\n                      onClick={onStartAnalysis}\n                      className=\"w-full min-h-12 md:h-14 bg-[#34a853] hover:bg-[#2d8e47] text-white font-semibold gap-2 shadow-lg hover:shadow-xl transition-shadow duration-300 text-base\"\n                      data-testid=\"button-start-analysis\"\n                    >\n                      <BulletIcon className=\"w-5 h-5\" />\n                      Reveal Results\n                    </Button>\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":5919},"src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"src/pages/skin-analysis.tsx":{"content":"import { useState } from \"react\";\nimport { type ConsentFormData, type AnalysisResponse } from \"@/types/schema\";\nimport { analyzeImages } from \"@/lib/api\";\nimport { sessionStorage } from \"@/lib/sessionStorage\";\nimport Header from \"@/components/Header\";\nimport ConsentForm from \"@/components/ConsentForm\";\nimport ImageUpload from \"@/components/ImageUpload\";\nimport AnalysisLoading from \"@/components/AnalysisLoading\";\nimport AnalysisResults from \"@/components/AnalysisResults\";\nimport FeedbackForm from \"@/components/FeedbackForm\";\nimport ProgressSteps from \"@/components/ProgressSteps\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { ArrowLeft } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ntype Step = \"consent\" | \"upload\" | \"loading\" | \"results\";\n\nconst stepMapping: Record<Step, number> = {\n  consent: 1,\n  upload: 2,\n  loading: 2,\n  results: 3,\n};\n\nexport default function SkinAnalysis() {\n  const [step, setStep] = useState<Step>(\"consent\");\n  const [consentData, setConsentData] = useState<ConsentFormData | null>(null);\n  const [images, setImages] = useState<string[]>([]);\n  const [analysisResults, setAnalysisResults] =\n    useState<AnalysisResponse | null>(null);\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  const { toast } = useToast();\n\n  const transitionToStep = (newStep: Step) => {\n    setIsTransitioning(true);\n\n    setStep(newStep);\n    setIsTransitioning(false);\n  };\n\n  const handleConsentSubmit = (data: ConsentFormData) => {\n    setConsentData(data);\n    transitionToStep(\"upload\");\n  };\n\n  const handleStartAnalysis = async () => {\n    if (images.length === 0) {\n      toast({\n        title: \"No images uploaded\",\n        description: \"Please upload at least one image to continue.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    sessionStorage.saveImages(images);\n\n    // Use transition for smooth loading popup appearance\n    setIsTransitioning(true);\n    setTimeout(() => {\n      setStep(\"loading\");\n      setIsTransitioning(false);\n    }, 200);\n\n    try {\n      const results = await analyzeImages(images);\n\n      if (results.msg === \"success\") {\n        setAnalysisResults({\n          analysis: results.result || results.notice,\n          recommendations: [],\n          severity: \"mild\",\n        });\n        transitionToStep(\"results\");\n      } else {\n        throw new Error(results.notice || \"Analysis failed\");\n      }\n    } catch (error) {\n      console.error(\"Analysis error:\", error);\n      toast({\n        title: \"Analysis failed\",\n        description:\n          error instanceof Error\n            ? error.message\n            : \"There was an error analyzing your images. Please try again.\",\n        variant: \"destructive\",\n      });\n      transitionToStep(\"upload\");\n    }\n  };\n\n  const handleBackToConsent = () => {\n    transitionToStep(\"consent\");\n  };\n\n  const handleStartOver = () => {\n    setIsTransitioning(true);\n    setTimeout(() => {\n      setStep(\"consent\");\n      setConsentData(null);\n      setImages([]);\n      setAnalysisResults(null);\n      sessionStorage.clearAll();\n      setIsTransitioning(false);\n    }, 150);\n  };\n\n  const getTaglineContent = () => {\n    switch (step) {\n      case \"consent\":\n        return {\n          title: \"Unlock Your Skin's Global Edge\",\n          description:\n            \"In 60 seconds, we'll whip up a custom elixir tuned to your worldwhether it's NYC's urban grit or Paris's crisp chill. We tap your city's air, water, and rays for ninja-level protection. Ready to outglow your everyday?\",\n        };\n      case \"upload\":\n      case \"loading\":\n        return {\n          title: \"Show Us Your Glow Up Close\",\n          description:\n            \"Upload a clear photo of your skin  no filters, no pressure. This helps us read your tone, texture, and vibe to fine-tune your routine for real-world results.\",\n        };\n      case \"results\":\n        return {\n          title: \"Your Personalized Routine\",\n          description: \"\",\n        };\n      default:\n        return {\n          title: \"Unlock Your Skin's Global Edge\",\n          description:\n            \"In 60 seconds, we'll whip up a custom elixir tuned to your worldwhether it's NYC's urban grit or Paris's crisp chill. We tap your city's air, water, and rays for ninja-level protection. Ready to outglow your everyday?\",\n        };\n    }\n  };\n\n  const taglineContent = getTaglineContent();\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Header />\n\n      <div className=\"container mx-auto px-4 py-8 md:py-12\">\n        <div className=\"text-center mb-8 md:mb-12\">\n          <h2 className=\"text-2xl md:text-3xl lg:text-4xl font-bold text-customText leading-tight mb-4\">\n            {taglineContent.title}\n          </h2>\n          <p className=\"text-base md:text-lg lg:text-xl text-customText/80 mt-2 max-w-3xl mx-auto leading-relaxed\">\n            {taglineContent.description}\n          </p>\n        </div>\n\n        {step !== \"loading\" && step !== \"results\" && (\n          <ProgressSteps\n            currentStep={stepMapping[step]}\n            steps={[\"Quick Profile\", \"Upload Image\", \"Results\"]}\n          />\n        )}\n\n        <div\n          className={`transition-opacity duration-300 ${\n            isTransitioning ? \"opacity-0\" : \"opacity-100\"\n          }`}\n        >\n          {step === \"consent\" && (\n            <div className=\"max-w-3xl mx-auto animate-in fade-in duration-300\">\n              <ConsentForm\n                onSubmit={handleConsentSubmit}\n                initialData={consentData}\n              />\n            </div>\n          )}\n\n          {step === \"upload\" && (\n            <div className=\"space-y-8 max-w-4xl mx-auto animate-in fade-in duration-300\">\n              <ImageUpload\n                onImagesChange={setImages}\n                onStartAnalysis={\n                  images.length > 0 ? handleStartAnalysis : undefined\n                }\n              />\n            </div>\n          )}\n\n          {step === \"loading\" && (\n            <div\n              className={`fixed inset-0 z-50 transition-opacity duration-500 ease-in-out ${\n                step === \"loading\"\n                  ? \"opacity-100 pointer-events-auto\"\n                  : \"opacity-0 pointer-events-none\"\n              }`}\n            >\n              <AnalysisLoading />\n            </div>\n          )}\n\n          {step === \"results\" && analysisResults && (\n            <div className=\"space-y-8 max-w-4xl mx-auto animate-in fade-in duration-300\">\n              <AnalysisResults results={analysisResults} />\n              <FeedbackForm />\n\n              <div className=\"flex justify-center pt-4\">\n                <Button\n                  size=\"lg\"\n                  onClick={handleStartOver}\n                  data-testid=\"button-start-over\"\n                  className=\"bg-[#353535] hover:bg-[#252525] text-white font-medium px-12 min-h-12 md:h-14 shadow-lg hover:shadow-xl transition-all duration-200 text-lg\"\n                >\n                  Start New Analysis\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":7243},"src/components/examples/ConsentForm.tsx":{"content":"import ConsentForm from '../ConsentForm';\n\nexport default function ConsentFormExample() {\n  const handleSubmit = (data: any) => {\n    console.log('Consent form submitted:', data);\n  };\n\n  return <ConsentForm onSubmit={handleSubmit} />;\n}\n","size_bytes":238},"api/classes/config.php":{"content":"<?php \n// ini_set('display_errors', 1);\n// ini_set('display_startup_errors', 1);  \n// error_reporting(E_ALL);\n\n@ob_start();\nsession_start();\n\ndefine('VISION_AI_KEY', '');\ndefine('GOOGLE_API_KEY', '');\ndefine('OPEN_API_KEY', '');\n\ndefine('APP_NAME','Skin Analysis');\ndate_default_timezone_set(\"Asia/Kolkata\");\ndefine('ADMIN_URL','/skin-disease/admin/');\ndefine('SITE_URL','/skin-disease/');\ndefine('APP_URL','/skin-disease/');\n\ndefine('DB_HOST','localhost');\ndefine('DB_USERNAME','user_skin');\ndefine('DB_PASSWORD','0o7%elP13');\ndefine('DB_NAME','skin_analysis');\n\n$data['DateFormat'] = 'm/d/Y h:i:s A';  \n$data['OnlyDate']   = 'm/d/Y';\n$data['NoRecord']   = '<i class=\"fa fa-exclamation-triangle\"></i> No record found';\n$data['SuccessIcon']   = '<i class=\"fa fa-check\"></i>';\n$data['ErrorIcon']   = '<i class=\"fa fa-exclamation-triangle\"></i>';\n$data['ExclamationIcon'] = '<i class=\"fa fa-exclamation-circle\"></i>';\n\nclass dbconfig {\n  // database hostname\n  protected static $host = DB_HOST;\n  // database username\n  protected static $username = DB_USERNAME;\n  // database password\n \n  protected static $password = DB_PASSWORD;\n\n  //database name\n  protected static $dbname = DB_NAME;   \n\n  static $con;\n\n  function __construct() {\n    self::$con = self::connect();\n  }\n\n  // open connection\n  protected static function connect() {\n     try {      \n       $link = mysqli_connect(self::$host, self::$username, self::$password, self::$dbname); \n        if(!$link) {\n          throw new exception(mysqli_error($link));\n        }\n        return $link;\n     } catch (Exception $e) {\n       echo \"Error: \".$e->getMessage();\n     }\n  }\n\n // close connection\n  public static function close() {\n     mysqli_close(self::$con);\n  }\n\n// run query\n  public static function run($query) {\n    try {\n      if(empty($query) && !isset($query)) {\n        throw new exception(\"Query string is not set.\");\n      }\n      $result = mysqli_query(self::$con, $query);\n     \n     return $result;\n    } catch (Exception $e) {\n      echo \"Error: \".$e->getMessage();\n    }\n\n  }\n// insert_run\npublic static function insertrun($query) {\n    try {\n      if(empty($query) && !isset($query)) {\n        throw new exception(\"Query string is not set.\");\n      }\n\n      $result = mysqli_query(self::$con, $query);\n      $insert_id = mysqli_insert_id(self::$con);\n      \n     return $insert_id;\n    } catch (Exception $e) {\n      echo \"Error: \".$e->getMessage();\n    }\n  }\n}\n\n$config = new DBCONFIG();\n\nfunction FD_add_notices($message, $notice_type=\"error\", $key=\"\"){\n  \n  $notices = array(); \n  $notices = get_session( 'ef_notices' ); \n  if(!empty($key)){\n    $notices[$notice_type][$key] = $message;\n  }\n  else{\n    $notices[$notice_type][] = $message;  \n  }\n  set_session('FD_notices',  $notices);\n}\n\nfunction FD_print_notices(){\n  global $data;\n  \n  $all_notices  = array();\n  $all_notices  = get_session( 'FD_notices' );\n  \n  if(empty($all_notices)) return;\n\n  foreach ($all_notices as $key=>$notice_type ) {   \n    if($key=='error' && count($notice_type) > 0) {     \n      echo '<div class=\"alert alert-warning alert-dismissible mb-2\" role=\"alert\">';\n        foreach ( $notice_type as $message ) {\n          echo $data['ErrorIcon'].' '.$message;\n        }\n        echo '<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\"></span></button></div>';\n    }\n    if($key=='success'  && count($notice_type) > 0) {\n         echo '<div class=\"alert alert-success alert-dismissible mb-2\" role=\"alert\">';\n        foreach ( $notice_type as $message ) {\n          echo $data['SuccessIcon'].' '.$message;\n        }\n        echo '<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\"></span></button></div>';\n    }    \n  }   \n  FD_clear_notices(); \n}\nfunction get_session($key){\n  if(isset($_SESSION[$key])){\n    return $_SESSION[$key];   \n    } \n}\nfunction FD_clear_notices(){\n  clear_session('FD_notices');    \n}\nfunction clear_session($key){\n    unset($_SESSION[$key]); \n}\nfunction set_session($key, $val){\n    $_SESSION[$key] = $val;\n}\nfunction pr($array) {\n  echo \"<pre>\";\n  print_r($array);\n  echo \"</pre>\";\n}\nfunction random_gen($length)\n{\n  $random= \"\";\n  srand((double)microtime()*1000000);\n  $char_list = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n  $char_list .= \"abcdefghijklmnopqrstuvwxyz\";\n  $char_list = \"1234567890\";\n  // Add the special characters to $char_list if needed\n  for($i = 0; $i < $length; $i++)\n  {\n    $random .= substr($char_list,(rand()%(strlen($char_list))), 1);  \n  }\n  return $random;\n}\nfunction getCredentials(){  \n  $absolutePath = 'https://raupyam.com/gopal_keys/credentials.php?type='.base64_encode('get-token');\n  $curl = curl_init();\n  curl_setopt($curl, CURLOPT_URL, $absolutePath);\n  curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); \n  $response = curl_exec($curl);\n  if ($response !== false) {\n      return json_decode($response);\n  } else {\n      return;\n  }\n  curl_close($curl);\n}\n?>\n","size_bytes":4971},"api/classes/googleSheet.php":{"content":"<?php \nrequire_once(__DIR__ . '/../../vendor/autoload.php');\nuse Google\\Client;\nuse Google\\Service\\Drive;\nuse Google\\Service\\Sheets\\SpreadSheet;\nuse Google\\Service\\Drive\\DriveFile;\nuse Google\\Http\\MediaFileUpload;\n\nclass SHEET {\n    public static $data;\n    \n    // Optimize: Cache client instance to avoid recreating it\n    private static $clientInstance = null;\n    \n    private static function getClient($scope = Drive::DRIVE) {\n        if (self::$clientInstance === null) {\n            self::$clientInstance = new Client();\n            self::$clientInstance->setAuthConfig('./creds.json');\n        }\n        \n        // Only add scope if not already added\n        $existingScopes = self::$clientInstance->getScopes();\n        if (!in_array($scope, $existingScopes)) {\n            self::$clientInstance->addScope($scope);\n        }\n        \n        return self::$clientInstance;\n    }\n    \n    public static function appendSheet($data) { \n        try {\n            $client = self::getClient(Drive::DRIVE);\n            $service = new Google_Service_Sheets($client);\n            $spreadsheetId = '1PloIde_aQWGZ5QcnqX3LrC2pl_1B4j92-ida4ZSZKD8';\n            \n            $body = new Google_Service_Sheets_ValueRange([\n                'values' => [$data]\n            ]);\n            \n            $params = ['valueInputOption' => \"RAW\"];\n            $range = \"Sheet1!A:L\";\n            \n            $result = $service->spreadsheets_values->append(\n                $spreadsheetId, \n                $range, \n                $body, \n                $params\n            );\n            \n            return [\n                'status' => 'success', \n                'msg' => \"Data appended successfully\", \n                'result' => ['updatedRange' => $result->updates->updatedRange]\n            ];\n            \n        } catch (Exception $e) {\n            return ['status' => 'error', 'msg' => $e->getMessage()];\n        }\n    }\n    \n    /**\n     * Optimized: Uploads base64 file to Google Drive with improved performance\n     */\n    public static function uploadBase64FileToDrive($base64Data, $fileName, $mimeType, $analysisData, $userData) {\n        $folderId = '1e4ZSFXyWKabOnY797E--zaNZqJuYaeoL';\n        $tempStream = null;\n        \n        try {\n            // Optimize: Extract and decode base64 more efficiently\n            $base64Content = (strpos($base64Data, ',') !== false) \n                ? substr($base64Data, strpos($base64Data, ',') + 1) \n                : $base64Data;\n            \n            // Optimize: Decode with strict mode\n            $binaryData = base64_decode($base64Content, true);\n            if ($binaryData === false) {\n                throw new \\Exception(\"Invalid base64 data\");\n            }\n            \n            $decodedSize = strlen($binaryData);\n            \n            // Optimize: Only create stream if file is large enough to benefit\n            // For small files (< 1MB), use direct upload\n            if ($decodedSize < 1048576) { // 1MB\n                return self::uploadSmallFile($binaryData, $fileName, $mimeType, $folderId);\n            }\n            \n            // For larger files, use chunked upload\n            $tempStream = fopen('php://temp', 'r+');\n            fwrite($tempStream, $binaryData);\n            rewind($tempStream);\n            \n            $client = self::getClient(Drive::DRIVE_FILE);\n            $service = new Google_Service_Drive($client);\n            \n            $fileMetadata = new DriveFile([\n                'name' => $fileName,\n                'parents' => [$folderId]\n            ]);\n            \n            $client->setDefer(true);\n            \n            $request = $service->files->create($fileMetadata, [\n                'supportsAllDrives' => true\n            ]);\n            \n            // Optimize: Use larger chunk size for faster uploads (2MB instead of 1MB)\n            $chunkSize = 2 * 1024 * 1024;\n            $media = new MediaFileUpload(\n                $client,\n                $request,\n                $mimeType,\n                null,\n                true,\n                $chunkSize\n            );\n            $media->setFileSize($decodedSize);\n            \n            $status = false;\n            \n            while (!feof($tempStream)) {\n                $chunk = fread($tempStream, $chunkSize);\n                \n                if ($chunk === false) {\n                    throw new \\Exception(\"Failed to read chunk from stream\");\n                }\n                \n                if (empty($chunk)) {\n                    break;\n                }\n                \n                $status = $media->nextChunk($chunk);\n                \n                if (is_object($status)) {\n                    break;\n                }\n            }\n            \n            $client->setDefer(false);\n            \n            if ($status && is_object($status) && property_exists($status, 'id')) {\n                $fileId = $status->id;\n                $fileUrl = \"https://drive.google.com/file/d/\" . $fileId . \"/view\";\n                \n                return [\n                    'status' => 'success',\n                    'msg' => 'File uploaded successfully',\n                    'fileUrl' => $fileUrl,\n                    'fileId' => $fileId\n                ];\n            } else {\n                throw new \\Exception(\"Upload failed to finalize\");\n            }\n            \n        } catch (Exception $e) {\n            return ['status' => 'error', 'msg' => $e->getMessage()];\n        } finally {\n            if ($tempStream && is_resource($tempStream)) {\n                fclose($tempStream);\n            }\n        }\n    }\n    \n    /**\n     * Optimize: Direct upload for small files (< 1MB) - much faster\n     */\n    private static function uploadSmallFile($binaryData, $fileName, $mimeType, $folderId) {\n        try {\n            $client = self::getClient(Drive::DRIVE_FILE);\n            $service = new Google_Service_Drive($client);\n            \n            $fileMetadata = new DriveFile([\n                'name' => $fileName,\n                'parents' => [$folderId]\n            ]);\n            \n            // Direct upload without chunking\n            $file = $service->files->create(\n                $fileMetadata,\n                [\n                    'data' => $binaryData,\n                    'mimeType' => $mimeType,\n                    'uploadType' => 'multipart',\n                    'supportsAllDrives' => true\n                ]\n            );\n            \n            $fileUrl = \"https://drive.google.com/file/d/\" . $file->id . \"/view\";\n            \n            return [\n                'status' => 'success',\n                'msg' => 'File uploaded successfully',\n                'fileUrl' => $fileUrl,\n                'fileId' => $file->id\n            ];\n            \n        } catch (Exception $e) {\n            return ['status' => 'error', 'msg' => $e->getMessage()];\n        }\n    }\n}","size_bytes":6895},"src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"README.md":{"content":"# Skin Analysis Web Application\n\nA **frontend-only** React application for AI-powered skin analysis. This app connects to an external PHP backend for processing skin images and providing personalized recommendations.\n\n## Quick Start\n\n### Prerequisites\n- Node.js 18+ or 20+\n- npm package manager\n\n### Installation & Development\n\n```bash\n# Install dependencies\nnpm install\n\n# Run development server\nnpm run dev\n```\n\nThe app will be available at `http://localhost:5000`\n\n### Build for Production\n\n```bash\n# Create production build\nnpm run build\n```\n\nOutput files will be in `dist/public/` directory.\n\n## Project Structure\n\n```\nskin-analysis-app/\n client/                # Frontend application\n    src/\n       components/   # React components\n       pages/        # Page components\n       lib/          # API client and utilities\n       hooks/        # Custom React hooks\n       types/        # TypeScript types\n       App.tsx       # Main app component\n    public/           # Static assets\n    index.html        # HTML entry point\n attached_assets/      # Images and media\n server/               # Vite launcher (not a backend server)\n vite.config.ts        # Vite configuration\n tailwind.config.ts    # Tailwind CSS configuration\n tsconfig.json         # TypeScript configuration\n package.json          # Dependencies\n```\n\n**Note:** The `server/` folder only contains a launcher script for Vite. This is NOT a backend server - the app is purely frontend and connects to your external PHP backend.\n\n## Features\n\n-  Multi-step user flow (Consent  Upload  Analysis  Results)\n-  Three image upload methods (file, gallery, camera)\n-  Google Maps address autocomplete\n-  Real-time camera capture with front/back toggle\n-  Responsive Material Design UI\n-  Form validation with Zod\n-  Loading states and progress indicators\n-  Feedback submission system\n\n## Configuration\n\n### 1. External API Backend\n\nUpdate the PHP backend URL in `client/src/lib/api.ts`:\n\n```typescript\nconst API_BASE_URL = 'https://your-php-backend.com';\n```\n\nYour PHP backend must implement:\n- `POST /analyze` - Accepts FormData with consent info and images\n- `POST /feedback` - Accepts feedback suggestions\n\n### 2. Google Maps API\n\nAdd your API key in `client/index.html`:\n\n```html\n<script src=\"https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places\"></script>\n```\n\nMake sure to enable the Places API in your Google Cloud Console.\n\n## Deployment\n\nSee [DEPLOYMENT.md](DEPLOYMENT.md) for detailed deployment instructions including:\n- Static hosting (Apache, Nginx, CDN)\n- Server configuration for SPA routing\n- Production checklist\n- Troubleshooting guide\n\n### Quick Deploy Steps\n\n1. Build the production files:\n   ```bash\n   npm run build\n   ```\n\n2. Upload the `dist/public/` folder to your web server\n\n3. Configure your server for SPA routing (see DEPLOYMENT.md)\n\n4. Update API URLs and Google Maps key\n\nThat's it! Your frontend is ready to serve.\n\n## Technology Stack\n\n- **React 18** - UI library\n- **TypeScript** - Type safety\n- **Vite** - Build tool and dev server\n- **Tailwind CSS** - Styling\n- **shadcn/ui** - UI components\n- **React Hook Form + Zod** - Form validation\n- **TanStack Query** - Server state management\n- **Wouter** - Client-side routing\n\n## Development\n\n### Available Scripts\n\n- `npm run dev` - Start development server\n- `npm run build` - Build for production\n- `npm run preview` - Preview production build locally\n- `npm run check` - Type check with TypeScript\n\n### Development Notes\n\n- The app uses Vite's hot module replacement (HMR)\n- TypeScript strict mode is enabled\n- Tailwind CSS with custom design tokens\n- All components use TypeScript for type safety\n\n## Browser Support\n\n- Modern browsers (Chrome, Firefox, Safari, Edge)\n- ES6+ required\n- No IE11 support\n\n## License\n\nMIT\n\n## Support\n\nFor deployment issues, check [DEPLOYMENT.md](DEPLOYMENT.md).\nFor code documentation, see [replit.md](replit.md).\n","size_bytes":4135},"src/components/CameraCapture.tsx":{"content":"import { useState, useRef } from \"react\";\nimport Webcam from \"react-webcam\";\nimport { Button } from \"@/components/ui/button\";\nimport { Camera, X, FlipHorizontal } from \"lucide-react\";\nimport logoUrl from \"@assets/logo.png\";\n\ninterface CameraCaptureProps {\n  onCapture: (imageSrc: string) => void;\n  onClose: () => void;\n}\n\nexport default function CameraCapture({ onCapture, onClose }: CameraCaptureProps) {\n  const [facingMode, setFacingMode] = useState<\"user\" | \"environment\">(\"user\");\n  const webcamRef = useRef<Webcam>(null);\n\n  const capture = () => {\n    const imageSrc = webcamRef.current?.getScreenshot();\n    if (imageSrc) {\n      onCapture(imageSrc);\n    }\n  };\n\n  const toggleCamera = () => {\n    setFacingMode((prev) => (prev === \"user\" ? \"environment\" : \"user\"));\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 bg-black\">\n      <Webcam\n        ref={webcamRef}\n        audio={false}\n        screenshotFormat=\"image/jpeg\"\n        videoConstraints={{\n          facingMode: facingMode,\n        }}\n        className=\"w-full h-full object-cover\"\n        data-testid=\"webcam-preview\"\n      />\n\n      <div className=\"absolute top-0 left-0 right-0 p-4 bg-gradient-to-b from-black/80 to-transparent\">\n        <div className=\"flex items-center justify-center mb-4\">\n          <img src={logoUrl} alt=\"RAUPYAM\" className=\"h-12\" />\n        </div>\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          onClick={onClose}\n          className=\"absolute top-4 left-4 bg-black/50 hover:bg-black/70 text-white rounded-full w-12 h-12 z-10\"\n          data-testid=\"button-close-camera\"\n        >\n          <X className=\"w-6 h-6\" />\n        </Button>\n      </div>\n\n      <div className=\"absolute bottom-0 left-0 right-0 pb-8 pt-6 bg-gradient-to-t from-black/80 to-transparent\">\n        <div className=\"flex items-center justify-center gap-8\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={toggleCamera}\n            className=\"bg-white/20 hover:bg-white/30 text-white rounded-full w-12 h-12 backdrop-blur-sm\"\n            data-testid=\"button-toggle-camera\"\n          >\n            <FlipHorizontal className=\"w-6 h-6\" />\n          </Button>\n\n          <button\n            onClick={capture}\n            className=\"w-20 h-20 rounded-full bg-white border-4 border-[#34a853] hover:scale-105 transition-transform shadow-lg active:scale-95\"\n            data-testid=\"button-capture-photo\"\n          >\n            <div className=\"w-full h-full rounded-full bg-[#34a853] p-2 flex items-center justify-center\">\n              <Camera className=\"w-10 h-10 text-white\" />\n            </div>\n          </button>\n\n          <div className=\"w-12 h-12\" />\n        </div>\n\n        <p className=\"text-sm text-white/90 text-center mt-4\">\n          {facingMode === \"user\" ? \"Front Camera\" : \"Back Camera\"}\n        </p>\n      </div>\n    </div>\n  );\n}\n","size_bytes":2887},"src/lib/googleApis.ts":{"content":"const GOOGLE_API_KEY = import.meta.env.VITE_GOOGLE_MAPS_API_KEY;\n\nexport interface Coordinates {\n  lat: number;\n  lng: number;\n}\n\nexport interface AirQualityResponse {\n  aqi?: number;\n  category?: string;\n  pollutants?: any;\n  dominantPollutant?: string;\n  indexes?: any[];\n}\n\nexport interface WeatherResponse {\n  temperature?: {\n    value: number;\n    unit: string;\n  };\n  humidity?: number;\n  windSpeed?: {\n    value: number;\n    unit: string;\n  };\n  condition?: string;\n  uvIndex?: number;\n  weatherDesc?: string;\n  feelsLike?: number;\n  cloudCover?: number;\n}\n\nexport async function fetchAirQuality(coordinates: Coordinates): Promise<AirQualityResponse | null> {\n  try {\n    const response = await fetch(\n      'https://airquality.googleapis.com/v1/currentConditions:lookup?key=' + GOOGLE_API_KEY,\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          universalAqi: true,\n          location: {\n            latitude: coordinates.lat,\n            longitude: coordinates.lng,\n          },\n          extraComputations: [\n            'DOMINANT_POLLUTANT_CONCENTRATION',\n            'POLLUTANT_CONCENTRATION',\n            'LOCAL_AQI'\n          ],\n        }),\n      }\n    );\n\n    if (!response.ok) {\n      throw new Error('Air quality request failed');\n    }\n\n    const data = await response.json();\n\n    if (data.indexes && data.indexes.length > 0) {\n      const universalAqi = data.indexes.find((index: any) => index.code === 'uaqi');\n      \n      return {\n        aqi: universalAqi?.aqi || data.indexes[0]?.aqi,\n        category: universalAqi?.category || data.indexes[0]?.category,\n        dominantPollutant: universalAqi?.dominantPollutant || data.indexes[0]?.dominantPollutant,\n        pollutants: data.pollutants,\n        indexes: data.indexes,\n      };\n    }\n\n    return null;\n  } catch (error) {\n    console.error('Error fetching air quality:', error);\n    return null;\n  }\n}\n\nexport async function fetchWeather(coordinates: Coordinates): Promise<WeatherResponse | null> {\n  try {\n    const response = await fetch(\n      `https://weather.googleapis.com/v1/currentConditions:lookup?key=${GOOGLE_API_KEY}&location.latitude=${coordinates.lat}&location.longitude=${coordinates.lng}`,\n      {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n    );\n\n    if (!response.ok) {\n      throw new Error('Weather request failed');\n    }\n\n    const data = await response.json();\n    \n    return {\n      //  Climate factors\n      temperature: {\n        value: data.temperature?.value || data.temperature?.degrees,\n        unit: data.temperature?.unit || 'C'\n      },\n      humidity: data.relativeHumidity?.value || data.relativeHumidity,            \n\n      //  UV and sun exposure\n      uvIndex: data.uvIndex?.value || data.uvIndex,                     \n      condition: data.weatherCondition?.descriptionon?.text, \n\n      //  Air and barrier impact\n      windSpeed: data.wind?.speed?.value, \n      weatherDesc: data.weatherCondition.description.text, \n      feelsLike: data.feelsLikeTemperature.degrees,      \n      cloudCover: data.cloudCover\n    };\n  } catch (error) {\n    console.error('Error fetching weather:', error);\n    return null;\n  }\n}\n\nexport async function fetchAirQualityInBackground(coordinates: Coordinates, onSuccess?: (data: AirQualityResponse) => void) {\n  try {\n    const airQualityData = await fetchAirQuality(coordinates);\n    if (airQualityData && onSuccess) {\n      onSuccess(airQualityData);\n    }\n  } catch (error) {\n    console.error('Background air quality fetch failed:', error);\n  }\n}\n\nexport async function fetchEnvironmentalData(coordinates: Coordinates): Promise<{\n  airQuality: AirQualityResponse | null;\n  weather: WeatherResponse | null;\n}> {\n  try {\n    const [airQuality, weather] = await Promise.all([\n      fetchAirQuality(coordinates),\n      fetchWeather(coordinates),\n    ]);\n\n    return {\n      airQuality,\n      weather,\n    };\n  } catch (error) {\n    console.error('Error fetching environmental data:', error);\n    return {\n      airQuality: null,\n      weather: null,\n    };\n  }\n}\n\nexport interface IPGeolocationResponse {\n  city: string;\n  region: string;\n  country: string;\n  latitude: number;\n  longitude: number;\n  error?: string;\n}\n\nexport async function detectLocationFromIP(): Promise<IPGeolocationResponse | null> {\n  try {\n    const response = await fetch('https://ipapi.co/json/');\n    \n    if (!response.ok) {\n      throw new Error('IP geolocation request failed');\n    }\n\n    const data = await response.json();\n    \n    if (data.error) {\n      console.error('IP geolocation error:', data.reason);\n      return null;\n    }\n\n    return {\n      city: data.city || '',\n      region: data.region || '',\n      country: data.country_name || '',\n      latitude: data.latitude,\n      longitude: data.longitude,\n    };\n  } catch (error) {\n    console.error('Error detecting location from IP:', error);\n    return null;\n  }\n}\n","size_bytes":5039},"src/lib/sessionStorage.ts":{"content":"import { ConsentFormData } from \"@/types/schema\";\n\nconst STORAGE_KEYS = {\n  PATIENT_DATA: 'skin_analysis_patient_data',\n  COORDINATES: 'skin_analysis_coordinates',\n  AIR_QUALITY: 'skin_analysis_air_quality',\n  WEATHER: 'skin_analysis_weather',\n  IMAGES: 'skin_analysis_images',\n  AUTO_LOCATION: 'skin_analysis_auto_location',\n} as const;\n\nexport interface PatientSessionData extends ConsentFormData {\n  coordinates?: {\n    lat: number;\n    lng: number;\n  };\n}\n\nexport interface AirQualityData {\n  aqi?: number;\n  category?: string;\n  dominantPollutant?: string;\n  pollutants?: any;\n  indexes?: any[];\n  timestamp?: string;\n}\n\nexport interface WeatherData {\n  temperature?: {\n    value: number;\n    unit: string;\n  };\n  humidity?: number;\n  windSpeed?: {\n    value: number;\n    unit: string;\n  };\n  condition?: string;\n  uvIndex?: number;\n  timestamp?: string;\n}\n\nexport interface AutoDetectedLocation {\n  city: string;\n  state: string;\n  country: string;\n  coordinates: {\n    lat: number;\n    lng: number;\n  };\n  airQuality: AirQualityData | null;\n  weather: WeatherData | null;\n  detectedAt: string;\n}\n\nexport const sessionStorage = {\n  savePatientData(data: PatientSessionData) {\n    window.sessionStorage.setItem(STORAGE_KEYS.PATIENT_DATA, JSON.stringify(data));\n  },\n\n  getPatientData(): PatientSessionData | null {\n    const data = window.sessionStorage.getItem(STORAGE_KEYS.PATIENT_DATA);\n    return data ? JSON.parse(data) : null;\n  },\n\n  saveAirQuality(data: AirQualityData) {\n    window.sessionStorage.setItem(STORAGE_KEYS.AIR_QUALITY, JSON.stringify(data));\n  },\n\n  getAirQuality(): AirQualityData | null {\n    const data = window.sessionStorage.getItem(STORAGE_KEYS.AIR_QUALITY);\n    return data ? JSON.parse(data) : null;\n  },\n\n  saveWeather(data: WeatherData) {\n    window.sessionStorage.setItem(STORAGE_KEYS.WEATHER, JSON.stringify(data));\n  },\n\n  getWeather(): WeatherData | null {\n    const data = window.sessionStorage.getItem(STORAGE_KEYS.WEATHER);\n    return data ? JSON.parse(data) : null;\n  },\n\n  saveImages(images: string[]) {\n    window.sessionStorage.setItem(STORAGE_KEYS.IMAGES, JSON.stringify(images));\n  },\n\n  getImages(): string[] {\n    const data = window.sessionStorage.getItem(STORAGE_KEYS.IMAGES);\n    return data ? JSON.parse(data) : [];\n  },\n\n  saveAutoLocation(data: AutoDetectedLocation) {\n    window.sessionStorage.setItem(STORAGE_KEYS.AUTO_LOCATION, JSON.stringify(data));\n  },\n\n  getAutoLocation(): AutoDetectedLocation | null {\n    const data = window.sessionStorage.getItem(STORAGE_KEYS.AUTO_LOCATION);\n    return data ? JSON.parse(data) : null;\n  },\n\n  clearAll() {\n    Object.values(STORAGE_KEYS).forEach(key => {\n      window.sessionStorage.removeItem(key);\n    });\n  },\n};\n","size_bytes":2718},".local/state/replit/agent/progress_tracker.md":{"content":"[x] 1. Install the required packages\n[x] 2. Restart the workflow to see if the project is working\n[x] 3. Verify the project is working using the feedback tool\n[x] 4. Inform user the import is completed and they can start building, mark the import as completed using the complete_project_import tool\n[x] 5. Complete migration from Replit Agent to Replit environment (Nov 7, 2025)\n[x] 5. Implement session storage system for patient data and air quality\n[x] 6. Integrate Google Geocoding and Air Quality APIs\n[x] 7. Update consent form to geocode addresses and trigger background air quality calls\n[x] 8. Update analysis flow to use session data\n[x] 9. Modify PHP backend to accept request body data instead of PHP sessions\n[x] 10. Optimize Google API integration - use only Autocomplete (geocode type) for coordinates\n[x] 11. Remove separate Geocoding API call - extract coordinates directly from autocomplete results\n[x] 12. Keep Air Quality API integration for fetching air quality index data\n[x] 13. Update frontend air quality API to include universalAqi and extraComputations fields\n[x] 14. Remove backend air quality method and fallback logic\n[x] 15. Optimize file uploads to use memory directly (no temp files)\n[x] 16. Remove 8 unused npm packages for faster builds\n[x] 17. Verify production build (543.94 kB bundle, 170.94 kB gzipped)\n[x] 18. Configure workflow with proper webview output type and port 5000\n[x] 19. Install all npm dependencies successfully\n[x] 20. Verify application is running and accessible through webview\n[x] 21. Complete project import process\n[x] 22. Fix PostCSS configuration to use ES module syntax (array format)\n[x] 23. Update src/lib/api.ts to use VITE_BACKEND_BASE_URL for API calls\n[x] 24. Document required .env file change (BACKEND_BASE_URL  VITE_BACKEND_BASE_URL)\n[x] 25. Optimize air quality data formatting to include ALL AQI indexes (Universal, regional)\n[x] 26. Remove pollutant filtering to send all 7 pollutants to OpenAI (CO, NO2, O3, PM10, PM2.5, SO2, NH3)\n[x] 27. Configure workflow with webview output type and port 5000\n[x] 28. Install npm dependencies\n[x] 29. Fix missing logo asset issue by replacing with text-based header\n[x] 30. Restart workflow successfully\n[x] 31. Verify application is running without errors\n[x] 32. Update Header component with Raupyam logo\n[x] 33. Update page title and meta description for Raupyam branding\n[x] 34. Create professional SVG favicon for Raupyam\n[x] 35. Remove 6 unused npm packages (input-otp, react-day-picker, recharts, react-resizable-panels, cmdk, vaul)\n[x] 36. Remove 14 unused UI component files\n[x] 37. Update AnalysisResults to render HTML with proper formatting\n[x] 38. Create SQL file and documentation for OpenAI prompt update\n[x] 39. Verify workflow is running without errors\n[x] 40. Fix missing logo file error in Header component\n[x] 41. Restart workflow and verify application is running successfully\n[x] 42. Confirm application is accessible and displaying properly in webview\n[x] 43. Update progress tracker with all completed tasks\n[x] 44. Remove 22 unused npm packages (framer-motion, @radix-ui components)\n[x] 45. Delete 35 unused UI component files from src/components/ui\n[x] 46. Remove framer-motion usage and replace with CSS transitions\n[x] 47. Add actual Raupyam logo to Header component\n[x] 48. Update theme colors to match Raupyam branding (charcoal + vibrant colors)\n[x] 49. Verify application running with new logo and theme\n[x] 50. Configure workflow with webview output type and port 5000\n[x] 51. Install npm dependencies\n[x] 52. Add \"Skin Analysis\" title and \"AI-Powered Dermatology Assistant\" subtitle to header\n[x] 53. Make step indicator connecting lines more visible (increased thickness and contrast)\n[x] 54. Add light gray background to Patient Information card to match reference design\n[x] 55. Verify all UI updates match the reference image exactly\n[x] 56. Restructure ProgressSteps component to show horizontal connecting lines properly\n[x] 57. Position connecting lines at circle center level (not below)\n[x] 58. Update Patient Information card background to subtle #f8f8f8 color\n[x] 59. Verify step indicators match reference image with visible connecting lines\n[x] 60. Confirm theme colors complement Raupyam logo (blue, yellow, green, red)\n[x] 61. Update \"Start New Analysis\" button with #353535 background color\n[x] 62. Add hover effect to button (darker shade #252525)\n[x] 63. Add proper padding and transitions for smooth interactions\n[x] 64. Fix form validation - clear errors when fields are auto-filled from Google Places\n[x] 65. Add shouldValidate option to setValue calls for city, state, country fields\n[x] 66. Add lazy loading skeleton/placeholder for logo image with smooth fade-in\n[x] 67. Implement smooth screen transitions with opacity fade effects\n[x] 68. Fix form data persistence - patient info retained when navigating back from upload\n[x] 69. Improve analysis loader with larger circular spinner matching reference design\n[x] 70. Update all text references from \"images\" to \"image\" (single image support)\n[x] 71. Pass consentData to ConsentForm as initialData to preserve form values\n[x] 72. Configure workflow with webview output type and port 5000 for Replit environment\n[x] 73. Install npm dependencies successfully\n[x] 74. Verify application is running without errors on Replit\n[x] 75. Complete migration from Replit Agent to Replit environment\n[x] 76. Add autocomplete='off' to all form input fields to prevent browser auto-suggestion\n[x] 77. Verify geocoding failures use toast notifications instead of alert popups\n[x] 78. Remove 'Important Disclaimer' section from analysis results page\n[x] 79. Add loading state with spinner to feedback submission button\n[x] 80. Fix \"location not found\" alert showing on form re-submission without changes\n[x] 81. Initialize coordinates and lastSubmittedAddress from initialData when navigating back\n[x] 82. Update alert logic to only show when address has actually changed\n[x] 83. Test and verify fix: re-submitting form without changes no longer shows alert\n[x] 84. Restart workflow and confirm application is running successfully","size_bytes":6137},"OPENAI_PROMPT_UPDATE.md":{"content":"# OpenAI Prompt Update Instructions\n\nTo enable HTML formatting in AI responses, you need to update the `prompts` table in your MySQL database.\n\n## Database Update Required\n\nThe AI responses are currently returning plain text. To get properly formatted HTML responses with tags like `<p>`, `<ul>`, `<li>`, `<h2>`, `<h3>`, `<small>`, etc., update the prompt for the 'vision' model in your database.\n\n### SQL Query to Update Prompt:\n\n```sql\nUPDATE `prompts` \nSET `prompt` = 'You are an expert dermatologist AI assistant analyzing skin conditions. Based on the provided image and patient information (including air quality data), provide a comprehensive skin analysis.\n\nIMPORTANT: Format your response using HTML tags for proper structure:\n- Use <h2> for main section headings\n- Use <h3> for sub-section headings\n- Use <p> for paragraphs\n- Use <ul> and <li> for lists\n- Use <strong> for emphasis\n- Use <small> for secondary information\n- Use <br> for line breaks when needed\n\nYour analysis should include:\n\n1. **Condition Identification**: Clearly identify any visible skin conditions or concerns\n2. **Severity Assessment**: Categorize as mild, moderate, or severe\n3. **Environmental Factors**: Consider the air quality data and its potential impact on skin health\n4. **Patient Context**: Consider age, gender, skin type, and other provided information\n5. **Detailed Recommendations**: Provide specific, actionable skincare recommendations\n\nStructure your response with clear HTML formatting to make it easy to read and understand.'\nWHERE `model` = 'vision';\n```\n\n### Alternative: Use Admin Interface\n\nIf you have an admin interface for managing prompts, update the 'vision' model prompt there with the above text.\n\n### Verification\n\nAfter updating the prompt:\n1. Submit a new skin analysis\n2. Check that the AI response includes HTML tags\n3. Verify the formatting displays correctly on the results page\n\n## Frontend Changes (Already Completed)\n\nThe frontend has been updated to render HTML responses using:\n- `dangerouslySetInnerHTML` for rendering HTML\n- Tailwind Typography (`prose` classes) for styling\n- Proper sanitization of HTML content\n\nThe AnalysisResults component now displays formatted HTML instead of plain text.\n","size_bytes":2223},"src/components/ui/accordion.tsx":{"content":"import * as AccordionPrimitive from \"@radix-ui/react-accordion\";\nimport { ChevronDown } from \"lucide-react\";\nimport * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst Accordion = AccordionPrimitive.Root;\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n));\nAccordionItem.displayName = \"AccordionItem\";\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n));\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName;\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n));\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName;\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent };\n","size_bytes":1988},"src/lib/magicSection.ts":{"content":"import type { ConsentFormData } from \"@/types/schema\";\nimport type { AirQualityResponse, WeatherResponse } from \"./googleApis\";\nimport type { PersonalizeMagicRequest, EnvironmentData } from \"./api\";\n\n/**\n * Helper function to extract pollutant value from air quality response\n * Normalizes codes by converting to lowercase and removing dots/underscores\n */\nfunction extractPollutantValue(\n  pollutants: any[] | undefined,\n  code: string\n): number {\n  if (!pollutants || !Array.isArray(pollutants)) {\n    return 0;\n  }\n  \n  // Normalize the search code (lowercase, remove dots and underscores)\n  const normalizedCode = code.toLowerCase().replace(/[._]/g, '');\n  \n  const pollutant = pollutants.find((p: any) => {\n    if (!p.code) return false;\n    // Normalize the pollutant code the same way\n    const normalizedPollutantCode = p.code.toLowerCase().replace(/[._]/g, '');\n    return normalizedPollutantCode === normalizedCode;\n  });\n  \n  return pollutant?.concentration?.value ?? 0;\n}\n\n/**\n * Helper function to categorize humidity level\n * Treats only null/undefined as missing data, 0% is valid and maps to \"Low\"\n */\nfunction categorizeHumidity(humidity: number | undefined | null): string {\n  // Only treat null/undefined as missing data (0 is a valid humidity value)\n  if (humidity === null || humidity === undefined) return \"Medium\";\n  \n  if (humidity <= 40) return \"Low\";\n  if (humidity <= 70) return \"Medium\";\n  return \"High\";\n}\n\n/**\n * Format data for personalize magic API\n * Builds payload matching backend expectations: { userData, environmentData }\n * Only includes environment data if we have valid air quality and weather data\n */\nexport function formatPersonalizationData(\n  formData: Partial<ConsentFormData>,\n  city: string,\n  airQuality: AirQualityResponse | null,\n  weather: WeatherResponse | null\n): PersonalizeMagicRequest {\n  // Build user data with only relevant fields (no location, no fullName)\n  const userData = {\n    age: formData.age,\n    gender: formData.gender,\n    skinType: formData.skinType,\n    topConcern: formData.topConcern,\n  };\n  \n  // Only build environment data if we have real data (not null/undefined)\n  const hasValidEnvData = !!(airQuality && weather && city);\n  \n  const environmentData: Partial<EnvironmentData> = hasValidEnvData ? {\n    city: city,\n    aqi: airQuality.aqi,\n    aqiCategory: airQuality.category,\n    dominantPollutant: airQuality.dominantPollutant ?? \"Unknown\",\n    temperature: weather.temperature?.value ?? 0,\n    feelsLike: weather.feelsLike ?? weather.temperature?.value ?? 0,\n    humidity: weather.humidity ?? 0,\n    humidityCategory: categorizeHumidity(weather.humidity),\n    uvIndex: weather.uvIndex ?? 0,\n    windSpeed: weather.windSpeed?.value ?? 0,\n    weatherDesc: weather.weatherDesc ?? \"Clear\",\n    waterHardness: \"Medium minerals\", // Placeholder - can be enhanced later\n    // Extract all 6 pollutants\n    pm25: extractPollutantValue(airQuality.pollutants, \"pm25\"),\n    pm10: extractPollutantValue(airQuality.pollutants, \"pm10\"),\n    co: extractPollutantValue(airQuality.pollutants, \"co\"),\n    no2: extractPollutantValue(airQuality.pollutants, \"no2\"),\n    so2: extractPollutantValue(airQuality.pollutants, \"so2\"),\n    o3: extractPollutantValue(airQuality.pollutants, \"o3\"),\n  } : {};\n  \n  return {\n    userData,\n    environmentData,\n  };\n}\n\n","size_bytes":3320},"api/classes/mails.php":{"content":"<?php\n// ini_set('display_errors', 1);\n// ini_set('display_startup_errors', 1);\n// error_reporting(E_ALL);\nuse PHPMailer\\PHPMailer\\PHPMailer;\nuse PHPMailer\\PHPMailer\\Exception;\nrequire_once(__DIR__ . '/../../vendor/autoload.php');\nclass MAIL {\n\tprotected static $HOST = \"\";\t\t \n\tprotected static $USERNAME = \"\";\n\tprotected static $PASSWORD = \"\";\t\n    public static $data;\n   function __construct() {\n\n   }\n\n\tpublic static function sendEmail($req, $reqFor){\n\t\ttry{\n\t\t\t$mail = new PHPMailer();\n\t\t\t$mail->IsSMTP();\n\t\t\t$mail->Mailer = \"smtp\";\n\n\t\t\t$mail->SMTPDebug  = 0;\n\t\t\t$mail->SMTPAuth   = TRUE;\n\t\t\t$mail->SMTPSecure = \"tls\";\n\t\t\t$mail->Port       = 587;\n\t\t\t$mail->Host       = self::$HOST;\n\t\t\t$mail->Username   = self::$USERNAME;\n\t\t\t$mail->Password   = self::$PASSWORD;\n\n\t\t\t$mail->IsHTML(true);\t\t\t\t\t\n\t\t\tif($reqFor == 'tweaks'){\t\t\t\n\t\t\t\t$mail->AddAddress('phpdevgmicro@gmail.com');\t\t\t\n\t\t\t\t$mail->setFrom($req['email'], 'Raupyam Skin Analysis');\n\t\t\t\t$mail->Subject = 'Reply for Tweaks';\n\t\t\t\t$template = self::tweaksReplyTemplate($req);\n\t\t\t}\n\n\t\t\t$mail->MsgHTML($template['result']);\n\t\t\tif(!$mail->Send()) {\n\t\t\t  throw new exception(\"Error: Your message not send.\");\n\t\t\t} else {\n\t\t\t  $data = array('status'=>'success', 'msg'=>\"Your enquiry has been sent successfully.\", 'result'=>'');\n\t\t\t}\n\t\t}catch(Exception $e){\n\t\t   $data = array('status'=>'error', 'msg'=>$e->getMessage());\n\t\t}finally{\n\t\t\treturn $data;\n\t\t}\n\t}\t\n\n\tpublic static function tweaksReplyTemplate($formData){\n\t    try{\n\t        $template = '\n\t        <div style=\"font-family: Arial, sans-serif; background-color:#f9f9f9; padding:20px;\">\n\t            <table cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"max-width:600px; margin:auto; background:#ffffff; border-radius:10px; overflow:hidden; box-shadow:0 2px 6px rgba(0,0,0,0.1);\">\n\t                <tr style=\"background:#0066cc;\">\n\t                    <td style=\"padding:20px; text-align:center; color:#ffffff; font-size:20px; font-weight:bold;\">\n\t                        Raupyam Skin Analysis\n\t                    </td>\n\t                </tr>\n\t                <tr>\n\t                    <td style=\"padding:20px; font-size:16px; color:#333333;\">\n\t                        <p><strong>New tweak/feedback submission received!</strong></p>\n\t                        <table border=\"0\" cellpadding=\"6\" cellspacing=\"0\" width=\"100%\">\t                          \n\t                            <tr>\n\t                                <td width=\"35%\" style=\"font-weight:bold;\">Email Address:</td>\n\t                                <td>'.$formData[\"email\"].'</td>\n\t                            </tr>\n\t                            <tr>\n\t                                <td width=\"35%\" style=\"font-weight:bold;\">Message:</td>\n\t                                <td>'.nl2br($formData[\"suggestion\"]).'</td>\n\t                            </tr>\n\t                        </table>\n\t                        <p style=\"margin-top:20px; color:#555;\">You can reply directly to this email to continue the conversation.</p>\n\t                    </td>\n\t                </tr>\n\t                <tr style=\"background:#f0f0f0;\">\n\t                    <td style=\"padding:15px; text-align:center; font-size:13px; color:#777;\">\n\t                         '.date('Y').' Raupyam Skin Analysis. All rights reserved.\n\t                    </td>\n\t                </tr>\n\t            </table>\n\t        </div>';\n\t        \n\t        $data = array('status'=>'success', 'msg'=>\"\", 'result'=>$template);\n\t    }catch(Exception $e){\n\t        $data = array('status'=>'error', 'msg'=>$e->getMessage());\n\t    }finally{\n\t        return $data;\n\t    }\n\t}\n\n\n}\n\n?>","size_bytes":3603},"docs/BACKEND_INTEGRATION.md":{"content":"# Backend Integration Guide for Magic Section\n\n## Overview\n\nThe Magic Section requires a PHP backend endpoint to securely call OpenAI's API without exposing the API key on the client-side.\n\n## Required PHP Endpoint\n\n### Endpoint Details\n- **URL**: `/route.php?type=personalize-magic`\n- **Method**: POST\n- **Content-Type**: application/json\n\n### Request Body\n\n```json\n{\n  \"userData\": {\n    \"age\": 30,\n    \"gender\": \"female\",\n    \"skinType\": \"combination\",\n    \"topConcern\": [\"acne\", \"redness\"]\n  },\n  \"environmentData\": {\n    \"city\": \"San Francisco\",\n    \"aqi\": 45,\n    \"aqiCategory\": \"Good\",\n    \"humidity\": 65,\n    \"uvIndex\": 6,\n    \"temperature\": 18\n  }\n}\n```\n\n### Response\n\n```json\n{\n  \"personalizedText\": \"**Your World's Whisper to Your Skin: How We Craft Smarter**\\n\\nWe don't guesswe *get* your backdrop...\"\n}\n```\n\n### Error Response\n\n```json\n{\n  \"error\": \"Failed to generate personalized text\",\n  \"details\": \"OpenAI API error message\"\n}\n```\n\n## Implementation\n\nSee `docs/php-backend/personalize-magic-endpoint.php` for the complete implementation example.\n\n## Security Notes\n\n1. **Never** expose the OpenAI API key on the client-side\n2. Store the API key in server environment variables\n3. Validate and sanitize all input data\n4. Implement rate limiting to prevent abuse\n5. Add CORS headers for your frontend domain only\n\n## Frontend Integration\n\nThe frontend is already configured to use the static template. To enable backend integration:\n\n1. Deploy the PHP endpoint to your backend server\n2. Update `src/lib/magicSection.ts` to call the backend endpoint instead of using the static template\n3. Handle loading states and errors appropriately\n\n## Testing\n\nTest the endpoint with:\n\n```bash\ncurl -X POST https://your-backend.com/route.php?type=personalize-magic \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"userData\": {\n      \"age\": 30,\n      \"gender\": \"female\",\n      \"skinType\": \"combination\",\n      \"topConcern\": [\"acne\"]\n    },\n    \"environmentData\": {\n      \"city\": \"Seattle\",\n      \"aqi\": 55,\n      \"aqiCategory\": \"Moderate\",\n      \"humidity\": 75,\n      \"uvIndex\": 4,\n      \"temperature\": 15\n    }\n  }'\n```\n","size_bytes":2132},"docs/php-backend/personalize-magic-endpoint.php":{"content":"<?php\n/**\n * Personalize Magic Section Endpoint\n * \n * This endpoint generates personalized skincare text using OpenAI's GPT-5 model\n * based on user profile data and environmental conditions.\n * \n * @endpoint POST /route.php?type=personalize-magic\n * @requires OpenAI API Key in environment variable OPENAI_API_KEY\n */\n\n// Allow CORS for your frontend domain only\nheader('Access-Control-Allow-Origin: https://your-frontend-domain.com');\nheader('Access-Control-Allow-Methods: POST, OPTIONS');\nheader('Access-Control-Allow-Headers: Content-Type');\nheader('Content-Type: application/json');\n\n// Handle preflight requests\nif ($_SERVER['REQUEST_METHOD'] === 'OPTIONS') {\n    http_response_code(200);\n    exit();\n}\n\n// Only accept POST requests\nif ($_SERVER['REQUEST_METHOD'] !== 'POST') {\n    http_response_code(405);\n    echo json_encode(['error' => 'Method not allowed']);\n    exit();\n}\n\n// Get OpenAI API key from environment\n$openaiApiKey = getenv('OPENAI_API_KEY');\nif (!$openaiApiKey) {\n    http_response_code(500);\n    echo json_encode(['error' => 'OpenAI API key not configured']);\n    exit();\n}\n\n// Read and validate request body\n$requestBody = file_get_contents('php://input');\n$data = json_decode($requestBody, true);\n\nif (!$data || !isset($data['userData']) || !isset($data['environmentData'])) {\n    http_response_code(400);\n    echo json_encode(['error' => 'Invalid request body']);\n    exit();\n}\n\n// Extract data\n$userData = $data['userData'];\n$envData = $data['environmentData'];\n\n// Template text\n$templateText = \"Your World's Whisper to Your Skin: How We Craft Smarter\nWe don't guesswe *get* your backdrop. Pulling live deets like:\n- **Air Quality (AQI/PM2.5)**: Moderate haze in **[CITY]**? Antioxidant armor (think liposome vitamin Csips in protection without the weight).\n- **Water Quality**: High minerals? Soothing hyaluronics to melt away that parched pull.\n- **UV & Humidity**: Low rays in sticky air? Tailored shieldsmatte in the tropics, rich in the chill.\nBlend with your age/gender/skin intel = your no-BS recipe. (E.g., 35yo combination type in rainy Seattle? Peptide emulsion with humectant layersbalanced, dewy by week 3.)\";\n\n// System prompt for OpenAI\n$systemPrompt = \"You are a Dynamic Text Personalizer for a skincare app. Your job: Take a static text template and user/environment data (provided as JSON), then rewrite it to feel hyper-personallike a custom note from a skincare coach.\n\nRules:\n- Parse JSON data: Extract relevant values from the userData and environmentData JSON objects. Handle missing/null values gracefully.\n- Inject data naturally: Swap placeholders (e.g., [CITY]) with exact values from the JSON; adapt examples to match user profile (e.g., if age=42, skinType=oily, high UVsuggest \\\"niacinamide mist for oil-taming glow\\\").\n- Keep tone warm, witty, global: Empathetic, fun, empowering (e.g., \\\"Your city's haze? We've got shields!\\\").\n- Brevity: Output exactly matches the template structure/lengthtrim fluff, no additions.\n- Personalization Logic:\n  - Environment: Use data like aqi, pm25, humidity, temperature, uvIndex, weatherDesc, etc. to recommend skincare (e.g., high AQI  \\\"antioxidant boost\\\"; high humidity  \\\"matte textures\\\").\n  - User: Blend age, gender, skinType, topConcern from JSON (e.g., \\\"For your 30s oily vibe...\\\").\n  - Examples: Always 1 tailored \\\"E.g.\\\" sentence; quantify wins (e.g., \\\"smoother by week 2\\\").\n- Output ONLY the modified textno intros, explanations, or code. Use markdown for lists/bolds.\n- If data missing from JSON, use neutrals (e.g., \\\"your city\\\" if city is missing).\";\n\n// Build user context with JSON data\n$userContext = \"User Profile (JSON):\n\" . json_encode($userData, JSON_PRETTY_PRINT) . \"\n\nEnvironmental Data (JSON):\n\" . json_encode($envData, JSON_PRETTY_PRINT) . \"\n\nTemplate to personalize:\n$templateText\";\n\n// Prepare OpenAI API request\n$openaiPayload = [\n    'model' => 'gpt-5', // Note: gpt-5 was released on August 7, 2025\n    'messages' => [\n        [\n            'role' => 'system',\n            'content' => $systemPrompt\n        ],\n        [\n            'role' => 'user',\n            'content' => $userContext\n        ]\n    ],\n    'max_completion_tokens' => 500\n];\n\n// Make curl request to OpenAI\n$ch = curl_init('https://api.openai.com/v1/chat/completions');\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\ncurl_setopt($ch, CURLOPT_POST, true);\ncurl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($openaiPayload));\ncurl_setopt($ch, CURLOPT_HTTPHEADER, [\n    'Content-Type: application/json',\n    'Authorization: Bearer ' . $openaiApiKey\n]);\n\n$response = curl_exec($ch);\n$httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);\n$curlError = curl_error($ch);\ncurl_close($ch);\n\n// Handle curl errors\nif ($curlError) {\n    http_response_code(500);\n    echo json_encode([\n        'error' => 'Failed to connect to OpenAI',\n        'details' => $curlError\n    ]);\n    exit();\n}\n\n// Handle non-200 responses from OpenAI\nif ($httpCode !== 200) {\n    http_response_code($httpCode);\n    echo json_encode([\n        'error' => 'OpenAI API error',\n        'details' => $response\n    ]);\n    exit();\n}\n\n// Parse OpenAI response\n$openaiResponse = json_decode($response, true);\nif (!$openaiResponse || !isset($openaiResponse['choices'][0]['message']['content'])) {\n    http_response_code(500);\n    echo json_encode([\n        'error' => 'Invalid response from OpenAI',\n        'details' => $response\n    ]);\n    exit();\n}\n\n// Return the personalized text\n$personalizedText = $openaiResponse['choices'][0]['message']['content'];\n\necho json_encode([\n    'personalizedText' => $personalizedText\n]);\n","size_bytes":5616},"src/components/BulletIcon.tsx":{"content":"interface BulletIconProps {\n  className?: string;\n}\n\nexport function BulletIcon({ className = \"w-4 h-4\" }: BulletIconProps) {\n  return (\n    <svg\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={className}\n      aria-hidden=\"true\"\n    >\n      <path\n        d=\"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z\"\n        fill=\"currentColor\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n","size_bytes":581}},"version":2}